<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  
  <meta name="keywords" content="royvanrijn,programming,java,blog,devoxx,conference,speaker,technology,science,math,azspcs,tips,tricks" />
  
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://royvanrijn.com/page/5/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="http://royvanrijn.com/feed/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@royvanrijn" />
  <meta name="twitter:title" content="royvanrijn" />
  <meta name="twitter:description" content="Java, algorithms, math, science and more!" />
  
  <meta name="twitter:image" content="http://www.royvanrijn.com/thumbnails/default.jpg"/>
  

<script>
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-1', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" width="990" height="307"/>
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <hr/>
  <!-- This loops through the paginated posts -->
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/11/devoxx-and-my-online-identity/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Devoxx and my online identity" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-11-15T16:19:07+01:00" class="date">
            Nov 15, 2013 16:19:07
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/11/devoxx-and-my-online-identity/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/11/devoxx-and-my-online-identity/">Devoxx and my online identity</a></h1>

        <span itemprop="articleBody">
          <p>This week I was at <a href="http://devoxx.be">Devoxx 2013</a> in Belgium. Like the previous years I helped film the event. Together with other a couple of <a href="http://www.devoxx.com/display/4KIDS/Home">Devoxx4Kids</a> organizers we also did a session and an informal <a href="http://en.wikipedia.org/wiki/Birds_of_a_Feather_%28computing%29">BoF</a> talk. I might do some more posts on the actual conference sessions later, lot of cool things to talk about, from making live music with Clojure and OverTone to flying quadcopters with <a href="https://www.thalmic.com/en/myo/">digital bracelets</a>.</p>

<h1 id="digital-me">Digital me</h1>

<p>For me the biggest eye opener was during the pre-conference speakers dinner. Three times during this dinner/reception I was talking to someone and only after 30 minutes they suddenly realized they already knew me… online, not in real life. Because I’ve always used a crazy blue avatar and the anonymous ‘redcode.nl’ URL, people can’t possibly connect the face to the online presence. That is when <a href="https://twitter.com/Imifos">Tasha Carl</a> suggested to me to use an actual picture instead. (just noticed she also doesn’t have a recognizable picture, the irony!)</p>

<p>When I got to the hotel that evening and fired up my laptop I decided to quickly bridge the gap between my digital appearance and real life. I’ve now changed my avatar at Twitter/Facebook/Vimeo/LinkedIn etc to the image above <em>(the iconic blue creature is still there!)</em>. Also as you might have noticed I’ve decided to switch my complete website to my other domain: <a href="http://www.royvanrijn.com">royvanrijn.com</a>. All the links online that point to <em>redcode.nl</em> will still work, but all the links on that page point to the new domain.</p>

<h1 id="instant-confirmation">Instant confirmation</h1>

<p>The following day I was walking around on the conference floor when a woman approached me. She asked “Are you Roy?”. It turned out I replied to a tweet she wrote earlier that day and recognized my face from the image. Confirmation couldn’t be more instant!</p>

<p>The Devoxx theme this year was “Reborn at Devoxx”, at this is absolutely true for me, my digital identity is actually reborn!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/11/devoxx-and-my-online-identity/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/runtimeexception-with-asynchronous-annotation/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="RuntimeExceptions within @Asynchronous methods" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-21T22:09:10+02:00" class="date">
            Oct 21, 2013 22:09:10
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/runtimeexception-with-asynchronous-annotation/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/runtimeexception-with-asynchronous-annotation/">RuntimeExceptions within @Asynchronous methods</a></h1>

        <span itemprop="articleBody">
          <p>Since the introduction of EJB 3.1 we can use the <a href="http://docs.oracle.com/javaee/7/api/javax/ejb/Asynchronous.html">@Asynchronous</a> annotation. It provides a simple way to create a new asynchronous process in your application.</p>

<p>If a method with the @Asynchronous is invoked it will spawn a new thread and return immediately. The invocation can return either a <strong>void</strong> or a [Future<T>][Future_T]. When returning a **Future** it starts out completely empty, but the @Asynchronous can return something called **AsyncResult<T>** to fill the **Future** with a value. The original method can, at a later moment in time, call .get() or .get(long timeout, TimeUnit unit) to see the result of the Future. If needed it will stop and wait for the result. But in the mean time it could have executed some other pieces of code in parallel.</T></T></p>

<p>To find out more about how to use @Asynchronous and Future, read this page from <a href="http://tomee.apache.org/examples-trunk/async-methods/">TomEE</a>.</p>

<p>The problem I’ve found with this annotation is how it handles RuntimeException. If you have a <strong>void</strong> as return value, and inside the asynchronous method a RuntimeException occurs, it’ll be completely swallowed. Nothing will be send to your logs. This is something I couldn’t find in any documentation.</p>

<p>If you create a new Thread yourself (see example below) it will print the RuntimeException:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    		<span class="kd">final</span> <span class="n">Runnable</span> <span class="n">t</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
    			<span class="nd">@Override</span>
    			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    				<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Log me!!"</span><span class="o">);</span>
    			<span class="o">}</span>
    		<span class="o">};</span>
    		<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">t</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
    	<span class="o">}</span></code></pre></figure>

<p>When executed you’ll end up with the exception nicely printed in the console. But this isn’t the case for @Asynchronous. For example if you do:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Asynchronous</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
    		<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Where am I?"</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>This exception is swallowed, never to be seen again. Because this wasn’t what I expected it took me much longer then needed to find the actual bug!</p>

<p>To fix this problem you can instead return a Future and call <em>get()</em>. When calling <em>get()</em> on a Future, and the asynchronous method ends with an exception, it’ll immediately throw an <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html">ExecutionException</a> which wraps around the asynchronous exception (call getCause() to get it).</p>

<p>But calling get() basically makes the call synchronous again instead of the fire-and-forget I wanted to have. So instead I’ve now ended up with a big try/catch block around the entire @Asynchronous method. It feels a bit wrong… did I miss something? Is there a better method to log the RuntimeException from @Asynchronous methods?</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/runtimeexception-with-asynchronous-annotation/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/java-default-methods-future-problem/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Java 'default' methods, future problem?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-17T12:33:20+02:00" class="date">
            Oct 17, 2013 12:33:20
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/java-default-methods-future-problem/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/java-default-methods-future-problem/">Java 'default' methods, future problem?</a></h1>

        <span itemprop="articleBody">
          <p>In Java there is one golden rule, we <strong>don’t break backwards compatibility</strong>. Not in the JVM interpreter/compiler and not in the JDK classes.</p>

<h1 id="extending-interfaces">Extending interfaces</h1>

<p>With the introduction of Lambda’s in Java there was a suddenly a big need to extend some of the Collections interfaces. And this is something that breaks backwards compatibility. If Java wants to add <em>List.forEach</em> all custom implementations of the List interface won’t compile anymore. This breaks one of the most treasured rules in JDK development, the backwards compatibility.</p>

<h1 id="default">default</h1>

<p>To counter this the ‘<em>default</em>’ keyword is introduced. Just like an abstract method in an abstract class you can now add some default behaviour to interfaces. This means for example that the List interface can be extended with default logic which can be overwritten (but doesn’t have to be). For example, see the following new ‘default’ method from the Iterable interface:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">default</span> <span class="kt">void</span> <span class="nf">forEach</span><span class="o">(</span><span class="n">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
	<span class="k">for</span> <span class="o">(</span><span class="n">T</span> <span class="n">t</span> <span class="o">:</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
    	<span class="n">action</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>There are some important rules; the added code will operate on static data, it can’t and should never manipulate state!<br />
Some more info, examples and other solutions can be found <a href="http://zeroturnaround.com/rebellabs/java-8-explained-default-methods/">here</a>.</p>

<h1 id="possible-future-problems">Possible future problems…</h1>

<p>There is a new problem that will become larger once there are more and more extentions as default methods. There is a possibility of colliding default methods. This will still break backwards compatibility. For example the List interface and the Set interface both have:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">default</span> <span class="n">Spliterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">spliterator</span><span class="o">()</span></code></pre></figure>

<p>Now (crazy example) I’ve made something called <strong>MyListSet</strong> which implements all methods from List and also all methods from Set. This compiles fine in every Java version but will suddenly fail against Java 1.8. Both List and Set have the same <em>spilerator()</em> on the same level and will thus collide with the following exception:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">class MyListSet&lt;T&gt; inherits unrelated defaults for spliterator() from types Set and List
  where T is a type-variable:
    T extends Object declared in class MyListSet</code></pre></figure>

<p>The more these ‘default’ methods are going to be used the higher the chance collisions like this will break backwards compatibility in the future. Personally I’m not yet convinced about the default methods.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/java-default-methods-future-problem/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/openjdk-and-xkcd-random-number/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="OpenJDK and XKCD: Random number" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-15T16:47:44+02:00" class="date">
            Oct 15, 2013 16:47:44
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/openjdk-and-xkcd-random-number/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/openjdk-and-xkcd-random-number/">OpenJDK and XKCD: Random number</a></h1>

        <span itemprop="articleBody">
          <p>A couple of days ago a our <a href="http://www.jpoint.nl">JPoint</a> hackathon we discussed building (Adopt) OpenJDK. After finding out a better way to build OpenJDK on Windows (<a href="/blog/2013/10/building-openjdk-on-windows/">read it here</a>), I’ve made my first improvement to OpenJDK.</p>

<p>This is a famous XKCD cartoon I wanted to implement:<br />
<a href="http://xkcd.com/221/"><img src="/images/random_number.png" alt="getRandomNumber() { return 4; } // chosen by fair dice roll, guaranteed to be random" /></a></p>

<p>Where do we get started? Actually it turned out it is fairly easy to make this ‘improvement’. We just need to find the correct source file and do a build as described <a href="/blog/2013/10/building-openjdk-on-windows/">here</a>.</p>

<p>Instead of the HotSpot core (which is all written in C) the JDK libraries are just classes/Java files. If you want to look at these Java files you’ll need to browse to <strong>[openjdk]/jdk/src/share/classes</strong>. There you’ll find familiar directories/packages like “java.*”, “javax.*” and even “sun.*”.</p>

<p>The file we need to change to <em>improve</em> Random is of course: <strong>[openjdk]/jdk/src/share/classes/java/util/Random.java</strong></p>

<p>Now we browse until we find:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * Returns the next pseudorandom, uniformly distributed {@code int}
 * value from this random number generator's sequence. The general
 * contract of {@code nextInt} is that one {@code int} value is
 * pseudorandomly generated and returned. All 2&lt;sup&gt;32&lt;/sup&gt; possible
 * {@code int} values are produced with (approximately) equal probability.
 *
 * &lt;p&gt;The method {@code nextInt} is implemented by class {@code Random}
 * as if by:
 *  &lt;pre&gt; {@code
 * public int nextInt() {
 *   return next(32);
 * }}&lt;/pre&gt;
 *
 * @return the next pseudorandom, uniformly distributed {@code int}
 *         value from this random number generator's sequence
 */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">nextInt</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">next</span><span class="o">(</span><span class="mi">32</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>Now we need fix the obvious error and turn it into:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * Returns guaranteed random number, rolled by nerdy DnD d20 dice.
 *
 * http://en.wikipedia.org/wiki/D20_System
 *
 * @return guaranteed random number
 */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">nextInt</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">14</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>And after the build I pointed Eclipse to my newly generated JDK: <strong>[openjdk]/build/windows-x86_64-normal-server-release/images/j2sdk-image</strong>.<br />
Next I run the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">final</span> <span class="n">Random</span> <span class="n">rnd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>
		<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rnd</span><span class="o">.</span><span class="na">nextInt</span><span class="o">());</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Result:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">14
14
14
14
14
14
14
14
14
14</code></pre></figure>

<p><strong>Serious note</strong>:<br />
This is absolutely not a valid patch but it really shows how easy it is to modify the JDK itself! There is a lot of low hanging fruit in the JDK, from missing unit tests, to unused imports to classes that don’t use generics yet. For more things to hack on, please read: <a href="https://java.net/projects/adoptopenjdk/pages/WhatToWorkOnForOpenJDK">https://java.net/projects/adoptopenjdk/pages/WhatToWorkOnForOpenJDK</a>!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/openjdk-and-xkcd-random-number/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/building-openjdk-on-windows/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Building OpenJDK on Windows" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-13T20:05:14+02:00" class="date">
            Oct 13, 2013 20:05:14
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/building-openjdk-on-windows/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/building-openjdk-on-windows/">Building OpenJDK on Windows</a></h1>

        <span itemprop="articleBody">
          <p>Tomorrow I’ll be enjoying an OpenJDK hack session with Martijn Verburg (aka The Diabolical Developer). To prepare for this session he told us to follow the <a href="https://java.net/projects/adoptopenjdk/pages/AdoptOpenJDKBuildInstructions">AdoptOpenJDK build instructions</a>.</p>

<p>Most <em>cool</em> developers today seem to be using OS/X, but some of us are stuck on Windows laptops. I actually choose to stick with Windows 7 because every single client I’ve worked for has Windows workstations and only require the application to run on Windows. But anyway Martijn said: <em>“Getting OpenJDK to build on Linux/Mac would be easy, Windows can be dicey”</em></p>

<p>With a bit of Googling and some small problems I’ve got it working just fine on my Windows 7 (64 bit). Most information I got was from <a href="https://weblogs.java.net/blog/simonis/archive/2011/10/28/yaojowbi-yet-another-openjdk-windows-build-instruction">this</a> write-up, but I encountered some problems and could skip some steps I didn’t need.</p>

<p>All the tools mentioned are <strong>free</strong>, but you <em>will</em> have to install some Microsoft Visual C++ packages to compile (which most Java programmers try to avoid).</p>

<h1 id="windows-sdk-for-windows-71">Windows SDK for Windows 7.1</h1>

<p>Instead of the blogpost above mentioning this step second, I recommend doing it first. If you install VisualC++ 2010 Express first this step might fail with some weird error. The solution? Uninstall VisualC++ 2010 Express and first install Windows SDK for Windows 7.1.</p>

<p>So go here and install: <a href="http://www.microsoft.com/download/en/details.aspx?id=8279">http://www.microsoft.com/download/en/details.aspx?id=8279</a></p>

<h1 id="microsoft-visualc-2010-express">Microsoft VisualC++ 2010 Express</h1>

<p>Next install VisualC++ 2010 Express (beware, Microsoft tries to install another version, pick 2010 Express):<br />
<a href="http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express">http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express</a><br />
And next Windows Imaging Component (64-bit):<br />
<a href="http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=1385">http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=1385</a></p>

<h1 id="cygwin-64-bit">Cygwin (64 bit)</h1>

<p>For some reason I ran into problems early on using the 64 bit Cygwin, so I decided to install the 64 bit version as well. This worked, so I recommend doing this.<br />
During the installation you’ll need to add some development packages:</p>

<ul>
  <li>binutils</li>
  <li>cpio</li>
  <li>diffutils</li>
  <li>file</li>
  <li>gawk</li>
  <li>gcc-core</li>
  <li>m4</li>
  <li>unzip</li>
  <li>zip</li>
</ul>

<p>I might have forgotten one or two, this will probably popup during the ‘configure’ step below. If you find a missing package, please tell me and I’ll update the post.</p>

<h1 id="make">make</h1>

<p>The version of ‘make’ that is packaged with Cygwin doesn’t work with OpenJDK. Instead we need to download the source from <a href="http://ftp.gnu.org/gnu/make/">http://ftp.gnu.org/gnu/make/</a>. I picked version 3.82 (this one is mentioned on the OpenJDK page). I downloaded and unzipped the source code here: <strong>C:\Projects\OpenJDK\make-3-82</strong></p>

<p>To compile, fire up Cygwin and type:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd /cygdrive/c/Projects/OpenJDK/make-3.82
$ ./configure
$ make</code></pre></figure>

<p>Now you could take the generated ‘make.exe’ and place it into the Cygwin bin directory, but this isn’t needed.</p>

<h1 id="freetype">freetype</h1>

<p>Next we need to have Freetype, this step is done exacly like descriped <a href="https://weblogs.java.net/blog/simonis/archive/2011/10/28/yaojowbi-yet-another-openjdk-windows-build-instruction">here</a>. Only do the ‘Freetype’ chapter generating the lib and dll.</p>

<p>Once you’ve generated the lib+dll, make a new directory (I used <strong>C:\Projects\OpenJDK\freetype</strong>). Add the ‘include’ directory from the freetype source code used in the step before. Also create a ‘lib’ directory and place the generated lib and dll in it.</p>

<h1 id="hgantjdk7">Hg/Ant/JDK7</h1>

<p>The other article mentions you’ll need to install TortoiseHg, Apache Ant and a current JDK 7 (as bootstrap). I didn’t have to do this because I already had all three installed. But please go ahead, they are probably needed:</p>

<ul>
  <li><a href="http://tortoisehg.bitbucket.org/download">TortoiseHg</a></li>
  <li><a href="http://ant.apache.org/bindownload.cgi">Apache Ant</a></li>
  <li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK 7</a> (make sure this JDK 7, 64 bit, is set as JAVA_HOME)</li>
</ul>

<h1 id="getting-openjdk-sources">Getting OpenJDK sources</h1>

<p>The other article mentions a lot of PATH requirements that need to be set. I didn’t encounter this at all because I configured my build in another way. First we’ll need to get the OpenJDK source code.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd /cygdrive/C/Projects/OpenJDK/
$ mkdir jdk8_tl
$ hg clone http://hg.openjdk.java.net/jdk8/tl jdk8_tl
$ cd jdk8_tl
$ ./get_source.sh</code></pre></figure>

<p>This will create a new directory: /cygdrive/C/Projects/OpenJDK/jdk8_tl with all the sources!</p>

<h1 id="configure">Configure</h1>

<p>Now we need to configure a build for OpenJDK. Instead of just calling ‘./configure’ we’ll need to add a few extra options, we’ll need to point it to the correct MAKE directory and we need to include our custom build freetype.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">./configure MAKE=/cygdrive/C/Projects/OpenJDK/make-3.82/make.exe with_freetype=/cygdrive/C/Projects/OpenJDK/freetype</code></pre></figure>

<p>This will throw a lot of warnings, but in the end it should print something like this:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">* OpenJDK target: OS: windows, CPU architecture: x86, address length: 64

Tools summary:
* Environment:    cygwin version 1.7.25(0.270/5/3) (root at /cygdrive/c/Development/cygwin64)
* Boot JDK:       java version "1.7.0_40"  Java(TM) SE Runtime Environment (build 1.7.0_40-b43)  Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)  (at /cygdrive/c/progra~1/java/jdk17~1.0_4)
* C Compiler:     Microsoft CL.EXE version 16.00.30319.01 (at /cygdrive/c/progra~2/micros~1.0/vc/bin/amd64/cl)
* C++ Compiler:   Microsoft CL.EXE version 16.00.30319.01 (at /cygdrive/c/progra~2/micros~1.0/vc/bin/amd64/cl)

Build performance summary:
* Cores to use:   7
* Memory limit:   16373 MB
* ccache status:  not available for your system</code></pre></figure>

<p>After the configure step you should have a new build directory added.<br />
Mine was located at: <strong>/cygdrive/C/Projects/OpenJDK/jdk8_tl/build/windows-x86_64-normal-server-release</strong></p>

<h1 id="build-it">Build it</h1>

<p>The next thing I did was to build everything, this can take anywhere from 10 to 40 minutes, my build took 20 minutes.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd /cygdrive/C/Projects/OpenJDK/jdk8_tl
$ /cygdrive/C/Projects/OpenJDK/make-3.82/make.exe clean images</code></pre></figure>

<p>After a long wait and a lot of warnings and messages it says it created your very own JDK 8 build. Time to give it a try:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cd /cygdrive/C/Projects/OpenJDK/jdk8_tl
$ cd build/windows-x86_64-normal-server-release/images/j2sdk-image
$ bin/java -version</code></pre></figure>

<p><img src="/images/814989381.jpg" alt="OpenJDK build completed" /></p>

<p><strong>It worked!</strong></p>

<p>Like I said before, I encountered some problems and errors along the way. Most involved the wrong Cygwin (32 bit), this caused bash to crash (STATUS_ACCESS_VIOLATION) during the configure phase. Also I ran into a problem installing ‘Microsoft SDK for Windows 7.1’ which required me to first uninstall Microsoft VisualC++ 2010. Another problem was not installing ‘diff’ in Cygwin (diffutils) so the build found some other diff.exe (from Git?) which gave differences during the actual build causing it to stop.</p>

<p>I might have forgotten to write down some step, if you encounter any problem (and solve them) please tell me so I can update this post!</p>

<h1 id="todo">Todo</h1>

<p>One thing I should add is ‘<strong>ccache</strong>’. This tool greatly improves the build speed because it caches all unchanged classes/files. It was in Cygwin (32 bit) but it is missing in Cygwin (64 bit)… I’ll have to compile and install it myself. This is one thing I haven’t tried yet, but I probably should do!</p>

<p><strong>Update:</strong> I’ve tried compiling and using ccache-3.1.9, but this broke the build. I might try different versions but for now I’ll just skip ‘clean’-ing altogether :-)</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/building-openjdk-on-windows/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/to-be-or-not-to-be-agile/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="To be or not to be... Agile!" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-02T15:32:05+02:00" class="date">
            Oct 2, 2013 15:32:05
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/to-be-or-not-to-be-agile/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/to-be-or-not-to-be-agile/">To be or not to be... Agile!</a></h1>

        <span itemprop="articleBody">
          <p>In my career I’ve seen a lot of <strong>misconceptions</strong> about Agile. And I’d like to do a step back and explain what being Agile means to me.</p>

<h1 id="we-do-agile">We ‘do’ Agile</h1>

<p>This is the biggest misconception of all, and the main reason for my blogpost. Again and again I’m hearing people/companies say: “We do agile”. And this is just wrong… Agile isn’t some system you ‘do’. It isn’t a selection of things you can learn from a book. It is just a mindset and all the other stuff are consequences, let me explain that!</p>

<h1 id="the-meaning-of-agile">The meaning of ‘Agile’</h1>

<p>If you look up the word Agile in the dictionary this is what it comes up with:</p>

<blockquote>
  <dl>
    <dt><strong>ag·ile</strong> adjective \ˈa-jəl, -ˌjī(-ə)l\</dt>
    <dd>able to move quickly and easily</dd>
    <dd>quick, smart, and clever</dd>
  </dl>

  <p>Source: <a href="http://www.merriam-webster.com/dictionary/agile">http://www.merriam-webster.com/dictionary/agile</a></p>
</blockquote>

<p>Agile means you’ll move quickly and easily. That is it basically, everything you do when you <em>are</em> agile boils down to:<br />
Start quickly, get something done quickly, expect changes in movement and go with it easily.</p>

<p>For example, in software, expect every bit of code to change (<a href="/blog/2011/10/great-code-is-written-twice-or-more/">more than once</a>). This will automatically make your code easy to read, extend and refactor. Not only code will change, the requirements will change. Nobody knows what a system will look like in two/three years (those who say they do are wrong), we might have a good idea what to make at this movement, but once you get started people will want other things… this <strong><em>always</em></strong> happens. Stay open to these changes in your movement, be agile!</p>

<h1 id="agile-scrum-we-need-to-do-stand-ups">Agile, Scrum, we need to do stand ups!</h1>

<p>Ah, the stand ups, you’ve been reading a book and it told you that you need stand ups? This is a requirement to be ‘agile’? <strong>WRONG</strong>. Like I said before, it is all just a consequence. Why do we do these stand ups? Because you need to know what everybody around you is doing at this moment. In waterfall projects you already know what people would be doing weeks (even months) in advance. But if you embrace the agile mindset and accept all these changes you might not even know what you’re doing tomorrow. The more you are open to changes and quickly move between tasks, the more often you’ll need to update your colleagues. That is why some projects do stand ups, a consequence of being open for changes.</p>

<h1 id="we-use-whiteboards-and-post-its-we-do-agile">We use whiteboards and post-its, we do agile!</h1>

<p>If your design and the requirements don’t change, write everything down with a pen, or maybe put it in some Software Architect solution (Rational anybody?) or just inscribe it in a stone tablet. Instead, if you are agile and move quickly, designs and requirements change. You don’t want to go into a meeting with a printed piece of paper which has tasks or designs etc, you’d rather want to have the design on a whiteboard. This will allow you to change it during the meeting instead of re-printing. Whiteboards are perfect to erase and redraw shapes and lines! It is just the best tool for somebody who <strong>is</strong> agile. Except for one problem, if you write down text and you have to move it… rewriting takes a long time. To counter this we use post-its: write once, stick everywhere! It complements the whiteboard very well.</p>

<p>So do we need to use a whiteboard and post-its to ‘be agile’? <strong>NO</strong>… Whiteboard and post-its are a consequence of being agile, it is the best tool for the job as far as I know.</p>

<h1 id="retrospective">Retrospective!</h1>

<p>If you don’t try new things and you don’t want to change the way you are working (being not agile) you don’t need to evaluate and come up with changes, obviously. But if you <em>are</em> agile, open for change, you need to have meetings on how you can change. As a consequence the retrospective arrives. This meeting is one of the most important meetings if you are agile; you talk about what can be improved in your process: What can make us more agile? What is holding us back?</p>

<h1 id="no-agile-rules">No agile rules…</h1>

<p>I don’t think agile needs a set of rules, you just need people to <strong>explain</strong> the basic concept of the <strong>mindset</strong>. The other things most organizations treat as ‘agile rules’ can be considered best practices because they make sense if you are agile; but please <strong>don’t just follow these rules</strong>.</p>

<p>Learn from others, embrace the agile mindset and come up with your own system… that works <strong><em>for you</em></strong>!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/to-be-or-not-to-be-agile/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/10/congratulations-to-devoxx4kids/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Congratulations to Devoxx4Kids!" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-10-02T14:35:27+02:00" class="date">
            Oct 2, 2013 14:35:27
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/congratulations-to-devoxx4kids/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/10/congratulations-to-devoxx4kids/">Congratulations to Devoxx4Kids!</a></h1>

        <span itemprop="articleBody">
          <p>If you haven’t heard about Devoxx4Kids, first read the following post and watch the video: <a href="/blog/2012/11/devoxx4kids/">here</a>!</p>

<p>The people behind Java (Oracle) have recognized the great potential behind Devoxx4Kids and decided to award the ‘concept’ with a <a href="https://www.java.net//dukeschoice">Duke’s Choice</a> award!<br />
This was presented to Stephan Janssen (the original mastermind behind the concept) at JavaOne this year. Because I filmed the original event and also our Dutch event in Amsterdam I was asked to make a very short impression video which was shown at the JavaOne Community Keynote.</p>

<p>You can see it here (including a great shout-out to me and my daughter, the ‘mascotte’) here:<br />
(from 10:17 up to 14:55)</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/10/congratulations-to-devoxx4kids/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/09/episode-1/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Episode #1" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-09-01T17:30:35+02:00" class="date">
            Sep 1, 2013 17:30:35
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/09/episode-1/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/09/episode-1/">Episode #1</a></h1>

        <span itemprop="articleBody">
          <p>Lately I’ve been having a lot of blog ideas, but I never take the time to write it all down in a blogpost.<br />
That’s why I’m now going to try to combine thing I love:</p>

<ul>
  <li>Programming</li>
  <li>Technology</li>
  <li>Filming/video editing</li>
</ul>

<p>Here is the first episode of Roy on programming:</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/C6wU-3BPK_4"></iframe>

<p>Item 1: Oculus Rift<br />
- <a href="http://www.oculusvr.com/">http://www.oculusvr.com/</a><br />
- <a href="http://www.reddit.com/r/oculus/">http://www.reddit.com/r/oculus/</a></p>

<p>Item 2: Rich Hickey<br />
- <a href="http://www.infoq.com/presentations/Simple-Made-Easy">http://www.infoq.com/presentations/Simple-Made-Easy</a><br />
- <a href="http://www.infoq.com/presentations/Design-Composition-Performance">http://www.infoq.com/presentations/Design-Composition-Performance</a></p>

<p>Item 3: Separation of Concerns<br />
- <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">http://en.wikipedia.org/wiki/Separation_of_concerns</a></p>

<p>Music by:<br />
- Nasty Goreng: <a href="https://soundcloud.com/nastygoreng">https://soundcloud.com/nastygoreng</a></p>

<p>Please let me know what you think about it.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/09/episode-1/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="No more DSL for acceptance/integration testing" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-07-25T22:33:38+02:00" class="date">
            Jul 25, 2013 22:33:38
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/">No more DSL for acceptance/integration testing</a></h1>

        <span itemprop="articleBody">
          <p>Everybody seems to be using <a href="http://fitnesse.org/">Fitnesse</a> or <a href="http://cukes.info/">Cucumber</a> for integration testing these days. The main idea is that users (testers/business analists and programmers) can write what your program should do in plain text. The programmer then creates a small layer of code which gets interpreted and executes your actual program to see if the specified requirements are met.</p>

<h1 id="fitnesse-example">Fitnesse example</h1>

<p>For example a (hypothetical) piece of code in Fitnesse as it could have been used in the Port of Rotterdam:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">!3 Anchorage tests

!|given a ship                                |
|Id  |Name       |Category|CallSign|Shipnumber|
|1001|Maersk Bali|TANKER  |D6DZ8   |7420211   |

|script                                                              |
|When a ship called|MAERSK BALI|reaches the port                     |
|And it reports anchor down                                          |
|ensure            |the ship is shown in the list of anchored vessels|
|check             |the list of anchored vessels now has size|1      |</code></pre></figure>

<p>This is something the testers and product owners can read and understand. Behind this layer of text Fitnesse will try to execute pieces of code. This is left as an exercise for the programmers to complete. They’ll need to write something like:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nl">GivenAShip:</span>
<span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setCategory</span><span class="o">(</span><span class="n">String</span> <span class="n">category</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setCallSign</span><span class="o">(</span><span class="n">String</span> <span class="n">callSign</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setShipnumber</span><span class="o">(</span><span class="n">String</span> <span class="n">shipnumber</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">execute</span><span class="o">();</span> <span class="c1">//Stores the ship in the database
</span>

<span class="nl">AnchorageScenarios:</span>
<span class="kt">void</span> <span class="nf">whenAShipCalledReachedThePort</span><span class="o">(</span><span class="n">String</span> <span class="n">shipName</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">andItReportsAnchorDown</span><span class="o">();</span>
<span class="kt">boolean</span> <span class="nf">theShipIsShownInTheListOfAnchoredVessels</span><span class="o">();</span>
<span class="kt">int</span> <span class="nf">theListOfAnchoredVesselsNowHasSize</span><span class="o">();</span></code></pre></figure>

<p>This is where the problems start, there is a lot of room for typos. Which will send you all over the codebase constantly translating Fitnesse text like “<em>and it reports anchor down</em>” to “<em>andItReportsAnchorDown</em>” during your searches.</p>

<p>Also people always say, because it is ‘plain text’ the testers, analists and product owners can instantly start writing tests. But this just isn’t true… It <strong>isn’t</strong> just writing down tests/requirements, it is programming with a DSL. Normal human text isn’t good enough, it still needs some DSL structure. They’ll have to learn to <strong>program</strong> in the Fitnesse DSL language. In almost all project I’ve worked on, it is the programmers writing and maintaining tests, people from the business stay far away from Fitnesse.</p>

<p>If you want to refactor the scenarios/fixtures in Fitnesse you’re in for a treat. Everything is bound by name only, and renaming code for example won’t rename the DSL! Using Fitnesse ‘sounds’ very agile, but it doesn’t really make the code agile at all. Most test code I’ve worked on is <strong>fragile</strong>, very <strong>ridged</strong> and <strong>not easy to refactor</strong>. Why not take advantage of that IDE and statically typed language if the programmers are writing and maintaining the tests?</p>

<h1 id="using-code-instead">Using code instead</h1>

<p>Today we had a “ShipIt”-day (nautical-pun intended) at work, where we’re free to work on any project for 24 hours straight and we present our findings afterwards. This boosts the creative ideas and in the long run efficiency and innovation.</p>

<p>After using Fitnesse now for three years we’ve become used to it, and don’t ever <strong>question its usage</strong>. Although we feel the <strong>pain</strong> of the rigid/fragile test code on a daily basis. I decided to start rethinking the way we do acceptance tests.</p>

<p>My goals was to make our tests:</p>

<ul>
  <li>Simpler to write</li>
  <li>Easier to refactor</li>
  <li>Maintain the readability</li>
  <li>Easier to reuse</li>
  <li>Faster! (no DSL parsing)</li>
</ul>

<p>This is what the initial design now looks like. The example used above would become the following:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Jitness</span>        <span class="c1">// Annotation that indicates this is a test class
</span>
<span class="nd">@SuiteSetUp</span><span class="o">({</span>   <span class="c1">// This is called once for all the methods in the class below
</span>
	<span class="nd">@Execute</span><span class="o">(</span>
			<span class="n">type</span> <span class="o">=</span> <span class="n">ShipExecutor</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
			<span class="n">data</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"1001"</span><span class="o">,</span> <span class="s">"Maersk Bali"</span><span class="o">,</span> <span class="s">"TANKER"</span><span class="o">,</span> <span class="s">"D6DZ8"</span><span class="o">,</span> <span class="s">"7420211"</span> <span class="o">})</span>
	<span class="o">})</span>
<span class="o">})</span>
<span class="nd">@SetUp</span><span class="o">({</span>
	       <span class="c1">// @Execute annotations here will be called before each of the methods below
</span>
	       <span class="c1">// The @SetUp annotation can also be placed on a single method in the test class
</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnchorageTests</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givingCommandAnchorDownCausesShipToAppearInList</span><span class="o">()</span> <span class="o">{</span>

		<span class="kd">final</span> <span class="n">AnchorageScenarios</span> <span class="n">scenarios</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnchorageScenarios</span><span class="o">();</span>

		<span class="n">scenarios</span><span class="o">.</span><span class="na">whenAShipReachedThePortCalled</span><span class="o">(</span><span class="s">"Maersk Bali"</span><span class="o">);</span>
		<span class="n">scenarios</span><span class="o">.</span><span class="na">andItReportsAnchorDown</span><span class="o">();</span>
		<span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">scenarios</span><span class="o">.</span><span class="na">theShipIsShownInTheListOfAnchoredVessels</span><span class="o">());</span>
		<span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">scenarios</span><span class="o">.</span><span class="na">theListOfAnchoredVesselsNowHasSize</span><span class="o">());</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">anotherTestHere</span><span class="o">()</span> <span class="o">{</span>
		<span class="o">...</span> <span class="n">etc</span> <span class="o">...</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Using Jitness (<em>working title</em>) the scenarios will be implemented in exactly the same way we’ve already been doing. This makes it easier to transition from Fitnesse to this code.<br />
The only bit of ‘magic’ is the execute annotation. You can write executors like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShipExecutor</span> <span class="kd">implements</span> <span class="n">Executor</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">ShipRepository</span> <span class="n">repository</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShipRepository</span><span class="o">();</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="n">repository</span><span class="o">.</span><span class="na">store</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">after</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="n">repository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
	<span class="o">}</span>

        <span class="kd">private</span> <span class="n">Ship</span> <span class="nf">parse</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">ShipBuilder</span><span class="o">()</span>
                         <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="n">Long</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">category</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">2</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">callSign</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">3</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">shipNumber</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">4</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>A (more elaborate) sample of the output it generates, with failure:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Results: 
OK	BunkeringTests.SuiteSetUp
OK	BunkeringTests.addTypeOfFuelToBunker
OK	BunkeringTests.changeTypeOfFuelToBunker
OK	BunkeringTests.removeTypeOfFuelToBunker
OK	BunkeringTests.bunkeringOnIncomingMovement
OK	BunkeringTests.bunkeringOnOutgoingMovement
OK	BunkeringTests.loadBunkeringForOpenVesselVisit
NOK	BunkeringTests.retrieveListOfBunkerBarges
expected:&lt;1&gt; but was:&lt;2&gt;
OK	BunkeringTests.SuiteTearDown
Took: 128 ms</code></pre></figure>

<p>The main advantages of using this are obviously leveraging the full potential of your IDE, including renaming/refactoring. Changing methods and classes in your production code will automatically show up as changes in Jitness. And everything is easy to refactor because it is just code! This will eventually lead to much more <strong>agile code</strong>, <strong>simpler</strong> and <strong>easier to refactor</strong>. Obviously there is one main drawback, it is harder for testers to read and write. But if they pair up with a programmer this should be no problem I think. I’d rather have the testers learn a bit of coding than the programmers learn a text DSL which leads to fragile tests.</p>

<p>Another big advantage is execution time, using compiled code is always faster than parsing plain text or HTML at runtime. Also this code is compiled during the build, so there is no need for additional classpath (Maven) plugins. I’m really fond of the idea to use code to describe the tests, and I’m very curious how my colleagues are going to rate this tomorrow when we demo the “ShipIt” ideas. With a couple of more days work this can be fully tested and made robust enough to start using it and maybe even open source it.</p>

<p>What are your thoughts? Any ideas about improving the API? Should we just keep using Fitnesse/Cucumber or any other alternative DSL instead?</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/06/ethics-for-programmers/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Ethics for programmers" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-06-21T16:39:54+02:00" class="date">
            Jun 21, 2013 16:39:54
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/06/ethics-for-programmers/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/06/ethics-for-programmers/">Ethics for programmers</a></h1>

        <span itemprop="articleBody">
          <p>Programmers need more ethics.<br />
And I’m not talking about ‘craftsmanship’ ethics such as <em>“always make clean code”</em>, <em>“be agile”</em> or <em>“coffee should be consumed pure and black”</em>.</p>

<p>No, I’m talking about real ethics:</p>

<blockquote>
  <p><strong>Ethics</strong>, also known as <strong>moral philosophy</strong>, is a branch of philosophy that involves systematizing, defending and recommending concepts of <strong>right</strong> and <strong>wrong</strong> conduct.</p>

  <p>Source: <a href="http://en.wikipedia.org/wiki/Ethics">http://en.wikipedia.org/wiki/Ethics</a></p>
</blockquote>

<h1 id="prism">PRISM</h1>

<p>Almost all the programmers I know are very active online, and all of them are condemning the US government project called <a href="http://en.wikipedia.org/wiki/PRISM_%28surveillance_program%29">PRISM</a>. It is a huge electronic surveillance program, recently revealed by <a href="http://en.wikipedia.org/wiki/Edward_Snowden">Edward Snowden</a>. This program collects (all) data from a huge list of international websites such as Google, Facebook, AOL, Apple, Yahoo, Microsoft, and more.</p>

<p>One can only imagine the magnitude of this project, it handles a humongous amount of data and it would have to filter and match the data. It will have a lot of (secret) API’s and other methods of collecting the data. And this is all created by…. <strong>us programmers</strong>!</p>

<h1 id="just-say-no">Just say no…</h1>

<p>Why would somebody help the government in making these applications? I <em>ethically</em> wouldn’t think about programming this. And I’m serious about it, I’ve already turned down two projects in my young career because of an ethical standpoint:</p>

<ol>
  <li>Helping to tweak an algorithm for the Dutch government for missile guidance (it would have been a cool project!)</li>
  <li>A project for a telecom company doing deep packet inspection, enabling them to ask subscription costs for (free) mobile apps<br />
(such as WhatsApp)</li>
</ol>

<p>Both these projects might influence my own, or other people’s life in a negative way, and I refuse to help people do that. It’s like being an arms dealer or gun manufacturer condemning the use of weapons. It would feel like selling a crowbar to a thief, making a bit of money, while actually enabling them to break in.</p>

<h1 id="ethics">Ethics!</h1>

<p>Maybe programmers should have an oath, something like the <a href="http://en.wikipedia.org/wiki/Hippocratic_Oath">Hippocratic Oath</a> or the <a href="http://en.wikipedia.org/wiki/Physician%27s_Oath">Physician’s Oath</a>. Here are some of the rules I follow:</p>

<ul>
  <li>I won’t write code which helps/enables people to harm others</li>
  <li>I won’t write code which will limit other people’s freedom</li>
  <li>I won’t work for companies using software patents to bully/attack other people and companies</li>
  <li>…</li>
</ul>

<p>If you have any good additions to the list, please drop a comment!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/06/ethics-for-programmers/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/06/devoxx4kids-in-the-netherlands/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Why are you not organizing a Devoxx4Kids?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-06-10T15:39:51+02:00" class="date">
            Jun 10, 2013 15:39:51
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/06/devoxx4kids-in-the-netherlands/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/06/devoxx4kids-in-the-netherlands/">Why are you not organizing a Devoxx4Kids?</a></h1>

        <span itemprop="articleBody">
          <p>Last year I attended the first Devoxx4Kids in Gent (Belgium). It is a day where programmers introduce children aged 10 to 14 to programming. That day we used Scratch (a fun online programming framework), Lego Mindstorms and a Mars rover (with emulation). And it was a blast!</p>

<p>Once I returned and edited <a href="https://vimeo.com/51393678">this</a> video and showed it to my colleagues we quickly came to the conclusion: We need to organize a Dutch version!</p>

<h1 id="organizing">Organizing</h1>

<p>Edwin (a <a href="http://www.jpoint.nl">JPoint</a> colleague) and I tried a couple of contacts and found a willing foe in the form of the <a href="http://www.uva.nl/en/home">University of Amsterdam</a>. They saw the potential and were kind enough to offer us rooms, laptops, Lego Mindstorms and a completely organized lunch! We in turn hired two students to assist with the sessions and took care of subscription, marketing and the technical know-how. It doesn’t take a lot of organizational skills to organize a Devoxx4Kids session.</p>

<h1 id="devoxx4kids-nl">Devoxx4Kids NL</h1>

<p>Last saturday was the moment of truth, in the morning kids and parents started to arrive at the university. We did a quick introduction, flew around with (off the shelf) quadcopter to start off with the wow-factor and then we went into the sessions. In Belgium all the parents left the kids, but this time most parents accompanied the children into the session rooms. In retrospect this wasn’t very good and next time we should banish parents from the sessions. The sessions we organized:</p>

<ul>
  <li><a href="http://scratch.mit.edu/about/">Scratch</a></li>
  <li><a href="http://mindstorms.lego.com/">Lego Mindstorms</a></li>
  <li><a href="http://www.arduino.cc//">Arduino</a> (my own session)</li>
</ul>

<p>The kids were split up into three groups and rotated over all the sessions. Every session was 90 minutes, in retrospect this is a bit long. Most kids got tired and a bit bored after about 45 to 60 minutes. The last track of the day the kids were a lot more distracted. For future Devoxx4Kids events I’d rather do short fun 45 minute sessions instead of complete in depth 90 minute sessions.</p>

<p>Kids learn quickly… even faster than adults! I tried my Arduino session on a couple of adults and they took about 75 minutes to complete all the tasks. The kids did it in record time, we had to improvise and set them a new challenge on the fly. They first made a blinking LED, then hooked up a piezo buzzer to play some music, then they created a ‘musical instrument’ with a photoresistor and the piezo buzzer. Finally (improvised on-the-fly) we made them create a traffic light with three colored LEDs! The quick learning was also noticed in the other sessions.</p>

<p>Our Devoxx4Kids was completely sold out in just 2 hours, so there is a lot of demand for events involving kids and programming. We are going to brainstorm this Wednesday on how we can do more on this front. Keep organizing Devoxx4Kids for 40 kids at the time? Or are there other options? How can we make it pay for itself instead of being fully voluntary…? All ideas are welcome, leave a comment/tweet/email!</p>

<h1 id="video-impression">Video impression</h1>

<p>Are you not yet convinced you should organize a Devoxx4Kids in your neighbourhood/country? Just watch the video I made during our event:</p>
<iframe type="text/html" src="http://player.vimeo.com/video/67959779" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>p.s. Having pictures and video help to tell the story. <a href="https://vimeo.com/51393678">This</a> video from Devoxx4Kids 2012 in Belgium helped us to get the University of Amsterdam involved!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/06/devoxx4kids-in-the-netherlands/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/05/teaching-programming-apprentices/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Teaching; Programming apprentices" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-05-21T14:13:45+02:00" class="date">
            May 21, 2013 14:13:45
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/teaching-programming-apprentices/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/teaching-programming-apprentices/">Teaching; Programming apprentices</a></h1>

        <span itemprop="articleBody">
          <p>We have a huge problem.</p>

<h1 id="the-knowledge-gap">The knowledge gap</h1>

<p>I’ve been a professional programmer now for over a decade, and during this time I’ve met a LOT of excellent programmers. Most of them are partially autodidactic and learned the business side of programming in school. But non of these guru’s/experts use their skills to teach the next generations. Sure, they attend programming conferences, give talks, join user groups etc. But all the other attendees are already good programmers! Companies usually send their brightest programmers to these conferences, not the beginning employees. This means there is already a gap in knowledge and it is increasing. The smart are getting smarter, and nobody is really helping the beginners…</p>

<p><img src="/images/teacher-300x300.jpg" alt="Teacher cleaning chalkboard with duster" class="alignright" /></p>

<h1 id="teachers-salary">Teachers salary</h1>

<p>During my time in college I wasn’t very happy with the programming teachers. They had some experience with the business side, they teached us about UML, gantt charts, and (then still hot) waterfall project planning. When it came to real programming, problem solving, algorithms, best practices… they didn’t really teach us much.<br />
Most of the time we had more programming experience and skill than the teachers.</p>

<p>Although I haven’t been in college for a couple of years, except two guest appearances at the University of Amsterdam, I don’t think much has changed. The whole problem is the status and rewards of being a teacher. The average salary of a college teacher (here in the Netherlands) is about half, maybe two thirds of the average professional programmers salary. No wonder why most average or better programmers don’t become teachers! Only the programmers with least experience and skill, or teachers which later on learned programming end up becoming programming teachers.</p>

<h1 id="mentoringapprenticeship">Mentoring/apprenticeship</h1>

<p>In the ancient Greece and Roman times teachers were important professions. Especially the most experienced craftsmen, they did not only master their craft, but earned most money by passing their skills as master/mentor to their protégés. This doesn’t happen anymore, the big names in programming now don’t have apprentices to pass on their knowledge. In the best case they write books, which will take years before the school teachers have read them and adopt the ideas.</p>

<h1 id="devoxx4kids">Devoxx4Kids?</h1>

<p>I’ve already mentioned <a href="http://www.devoxx.com/display/4KIDS/Home">Devoxx4Kids</a> in <a href="/blog/2012/11/devoxx4kids/">previous</a> blogposts. Although this is a great initiative (which I fully support, we’re holding our own version in the Netherlands!). It helps getting kids excited in IT/programming, but it won’t help getting the level of education to a higher level.</p>

<h1 id="highest-status">Highest status</h1>

<p>Being a teacher/mentor should have the highest social status in our modern world, it should be the highest paid profession and all the guru’s/experts should want to become teachers. But it isn’t. It is poorly paid and absolutely not the sought after job. How can we change this?</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/teaching-programming-apprentices/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/05/agile-epic-manifesto/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Agile: Epic Manifesto" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-05-06T21:13:23+02:00" class="date">
            May 6, 2013 21:13:23
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/agile-epic-manifesto/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/agile-epic-manifesto/">Agile: Epic Manifesto</a></h1>

        <span itemprop="articleBody">
          <p> </p>

<p>At work we’ve had a lot of discussion about epics lately. We seem to have forgotten what they are and how we learned to deal with epics. It became a ‘theme’ or just a big pile of stories which sounded like they belong together. But epics are much much more.</p>

<p>An epic is a goal, and just one goal only. All the stories in the epic should contribute to that epic! Also the epics goal should be a business goal, never a technical goal. The epic should describe a <a href="http://en.wikipedia.org/wiki/SMART_criteria">SMART</a> described measurable goal without hinting towards a (technical) solution.</p>

<p> </p>

<h1 id="epic-manifesto">Epic manifesto</h1>

<p> </p>

<p>In our project we tend to forget what epics are for and <strong>why</strong> they are so important after some time.<br />
To remind everybody we decided to write down a manifesto for the epic:</p>

<ol>
  <li>An epic has just <em>one</em> goal, not more and not less.</li>
  <li>An epic is always measurable, thou should always ask “why” until the business value is clear.</li>
  <li>An epic has a fixed goal, new insights will lead to new epics.</li>
  <li>An epic should have a solution conceived with and verified by the stakeholders, users, product owner and the team.</li>
  <li>An epic contains only stories that help to achieve the goal.</li>
  <li>An epic is ‘done’ when the goal is achieved.</li>
  <li>An epic is only estimated in relative complexity, never in units of time.</li>
  <li>An epic is always in the correct order on the backlog (by the product owner).</li>
  <li>An epic is realized by the team with the minimal viable solution.</li>
  <li>Does your epic break one of the rules above? It is an epic failure!</li>
</ol>

<p>This is going on several walls in our building just to remind us how important correct epics are. If the initial goal is wrong, all the stories are wrong as well. The epic is the base of all the solutions you’ll be creating and must be founded properly.</p>

<p>Any thoughts on this subject, don’t hesitate to reply. Agile projects get better by sharing best practices and trying to improve!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/agile-epic-manifesto/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/05/conference-videographer/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Conference videographer" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-05-06T20:45:35+02:00" class="date">
            May 6, 2013 20:45:35
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/conference-videographer/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/conference-videographer/">Conference videographer</a></h1>

        <span itemprop="articleBody">
          <p>A couple of years ago, when our family was planning a trip to South Africa, I bought a nice DSLR. We had friends with excellent cameras, huge lenses and wild life photography experience. So instead of trying to compete with them I decided to buy a camera suited for filming. It was the rise of filming-DSLRs, and even television shows were adapting DSLRs for filming. I settled on a Canon 550D also known as Rebel T2i.</p>

<p>Just before I left for South Africa I decided to take the camera to the <a href="http://www.devoxx.com/">Devoxx</a> 2011 conference. I didn’t even have a tripod at that time! After shooting some quick footage I decided to edit everything to make a nice movie and share it with the organiser. He liked it so much he placed it on the main website for a while. This is what I made:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/32170355" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx-2012">Devoxx 2012</h1>

<p>The following year Stephan asked me to be the official videographer for Devoxx 2012! So I went back and made another video, it seems like I’m turning from regular visitor/developer to videographer. I took some more time to analyse the conference to include the main sponsors, show every aspect of the conference and to get across the Devoxx atmosphere (including the James Bond theme, we all watched SkyFall during the conference!):</p>

<iframe type="text/html" src="http://player.vimeo.com/video/53695846" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx4kids-2012">Devoxx4Kids 2012</h1>

<p>The best time I had as videographer was during Devoxx4Kids. It is a separate event first hosted in 2012. The kids were having a great time and that is clearly visible in the video. Kids aren’t shy at all and much easier to approach then adults. That is why I did some quick interviews and I love the result, I might do that in the future for other conferences as well:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/51393678" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx-uk-2013">Devoxx UK 2013</h1>

<p>The latest conference I filmed was Devoxx UK. For the first time the Devoxx conference has crossed the big blue sea to go to the United Kingdom. I’ve tried to make the resulting video look a bit more professional although I’m still just a Java developer with a hobby:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/62905094" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="the-future">The future…</h1>

<p>The last three years I’ve filmed at three weddings, four conferences and edited together our vacations to South Africa, Norway and some trips into the Alps (wintersport). As an amateur videographer (with a growing list of references) there still is a lot to learn, but I’m really enjoying the process! Any tips/hints/tricks are absolutely welcome, and I’m open for invitations!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/05/conference-videographer/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Test Swing applications in Fitnesse (Nonkey)" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2013-02-08T11:35:28+01:00" class="date">
            Feb 8, 2013 11:35:28
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/">Test Swing applications in Fitnesse (Nonkey)</a></h1>

        <span itemprop="articleBody">
          <h1 id="fitnesse">Fitnesse</h1>

<p><a href="http://fitnesse.org/">Fitnesse</a> is a very popular test framework, used in a lot of projects. Using a wiki you describe the tests as plain text, which get translated into ‘fixtures’, code that is called that, in turn, can call your application. An example of a fixture we use:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">|when the user logs in with username|roy               |and password   |test123   |
|and asks for the account details                                                 |
|ensure                             |displayed fullname|Roy van Rijn              |
|ensure                             |websites contains |http://www.royvanrijn.com/|
|ensure                             |websites contains |http://www.redcode.nl/    |</code></pre></figure>

<p>The corresponding Java code could be something like:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">Credentials</span> <span class="n">credentials</span><span class="o">;</span>
<span class="kd">private</span> <span class="n">AccountDetails</span> <span class="n">accountDetails</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenTheUserLogsInWithUsernameAndPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Credentials</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">andAsksFotTheAccountDetails</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">accountDetails</span> <span class="o">=</span> <span class="n">mySystem</span><span class="o">.</span><span class="na">getAccountDetails</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">displayedFullname</span><span class="o">(</span><span class="n">String</span> <span class="n">fullname</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">fullname</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">accountDetails</span><span class="o">.</span><span class="na">getFullename</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">websitesContains</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="nl">website:</span><span class="n">accountDetails</span><span class="o">.</span><span class="na">getWebsites</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">website</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>This is a very simplified example on how you could use Fitnesse to test your application. But the idea is very powerful, there are implementations for Java (initially) and now .NET, Groovy etc. Also, most of the time the system you’re testing doesn’t have a Java API but instead you’d like to test the user interface. With most Java applications being web applications there are numerous plugins to connect Fitnesse with for example Selenium to ease web application testing. The fixtures fill webpages and analyze the resulting HTML response.</p>

<p>At my current client (Port of Rotterdam) we’re building a very rich, partially offline, Swing application. This application has a backend and numerous clients running the Swing application. We’ve used Fitnesse to test the backend code from the start, and the last year we’ve put in some effort to also use Fitnesse for the Swing application. We’ve called this “Nonkey”, being an automated version of our Monkey integration testing we’d been doing up to that moment.</p>

<h1 id="uispec4j">UISpec4J</h1>

<p>The first ingredient we need to test Swing GUI’s in Fitnesse is UISpec4J. This is an excellent Swing test framework that allows you to manipulate GUI elements from code. The framework is made with unit-tests in mind, but can also be used in integration testing. In our SetUp page in Fitnesse we call the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">Window</span> <span class="n">mainWindow</span><span class="o">;</span>
<span class="kd">private</span> <span class="n">JFrame</span> <span class="n">mainFrame</span><span class="o">;</span>
    
<span class="c1">//Called from the Suite Set Up page:
</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">launchNonkey</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">mainWindow</span> <span class="o">=</span> <span class="n">WindowInterceptor</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="k">new</span> <span class="n">Trigger</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">OurApplication</span><span class="o">().</span><span class="na">launch</span><span class="o">();</span>
            <span class="c1">// Get the main JFrame from Spring, used directly in some cases instead of UISpec4J
</span>
            <span class="n">mainFrame</span> <span class="o">=</span> <span class="n">BeanFactory</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"mainFrame"</span><span class="o">,</span> <span class="n">MainFrame</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span></code></pre></figure>

<p>The WindowInterceptor captures the Swing application and allows for manipulation in a later stage. For example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//In some fixture:
</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">loginWithUsernameAndPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//UISpec4J uses JComponent.setName() for lookup:
</span>
    <span class="n">Panel</span> <span class="n">loginPanel</span> <span class="o">=</span> <span class="n">nonKey</span><span class="o">.</span><span class="na">mainWindow</span><span class="o">.</span><span class="na">getPanel</span><span class="o">(</span><span class="s">"loginPanel"</span><span class="o">);</span> 
    <span class="kd">final</span> <span class="n">TextBox</span> <span class="n">usernameTextbox</span> <span class="o">=</span> <span class="n">loginPanel</span><span class="o">.</span><span class="na">getTextBox</span><span class="o">(</span><span class="s">"usernameTextbox"</span><span class="o">);</span>
    <span class="n">usernameTextbox</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">TextBox</span> <span class="n">passwordTextbox</span> <span class="o">=</span> <span class="n">loginPanel</span><span class="o">.</span><span class="na">getTextBox</span><span class="o">(</span><span class="s">"passwordTextbox"</span><span class="o">);</span>
    <span class="n">passwordTextbox</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
    
    <span class="n">loginPanel</span><span class="o">.</span><span class="na">getButton</span><span class="o">(</span><span class="s">"loginButton"</span><span class="o">).</span><span class="na">click</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>This fixture causes the Swing application to fill in the username, password and press the login button. It is easy to read and can be launched from Fitnesse with a single line:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">|login with username|roy   |and password   |test123   |</code></pre></figure>

<p>Nice! We are done, we can test Swing GUI’s in Fitnesse now! Well no… not really, unfortunately there are a couple more problem we ran into, regaring the Event Dispatch Thread (EDT).</p>

<h1 id="event-dispatch-thread-edt">Event Dispatch Thread (EDT)</h1>

<p>The EDT, sometimes called Swing Thread, is a special thread. Everything you do in Swing should always happen on this thread. Setting components to visible, pressing buttons etc, all need to be done in the EDT. If you don’t do this correctly the application gets into a lot of race conditions and it can even cause the application to hang.</p>

<p>When we combined Fitnesse with UISpec4J and started making a lot of tests we noticed that sometimes mysteriously a test would fail without changes. It turned out to be a problem with the EDT. UISpec4J doesn’t worry too much about the EDT, and when we click a button or setText (like the examples above) it does this in the current thread. In Fitnesse this thread is the thread that called the fixture, obviously not the EDT.</p>

<p>We brainstormed a lot about how we could fix this, maybe change UISpec4Js code? This turned out to be a hellish task. How about setting SwingUtilities.invokeAndWait() in every fixture? That could work but is also a massive undertaking. We decided to take a look at how Fitnesse calls the fixtures. This is always done from a ‘StatementExecutor’. So we decided to build a custom StatementExecutor which causes the fixtures to all run in the EDT.</p>

<p>To do this we need a custom SlimService. First I tried to extend the normal SlimService, but this wouldn’t work for some odd reason (still unexplained, should try this again). We decided to copy the SlimService code and make our own:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingSlimService</span> <span class="kd">extends</span> <span class="n">SocketService</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">SwingSlimService</span> <span class="n">instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">parseCommandLine</span><span class="o">(</span><span class="n">args</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">startWithFactory</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="k">new</span> <span class="n">SwingJavaSlimFactory</span><span class="o">());</span> <span class="c1">//&lt;-- custom SwingJavaSlimFactory!
</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">parseCommandLineFailed</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">parseCommandLineFailed</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Invalid command line arguments:"</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">startWithFactory</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> 
            <span class="kd">final</span> <span class="n">SlimFactory</span> <span class="n">slimFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SwingSlimService</span><span class="o">(</span><span class="n">port</span><span class="o">,</span> <span class="n">slimFactory</span><span class="o">.</span><span class="na">getSlimServer</span><span class="o">(</span><span class="n">verbose</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">parseCommandLine</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">CommandLine</span> <span class="n">commandLine</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommandLine</span><span class="o">(</span><span class="s">"[-v] port"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">commandLine</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">args</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">commandLine</span><span class="o">.</span><span class="na">hasOption</span><span class="o">(</span><span class="s">"v"</span><span class="o">);</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">portString</span> <span class="o">=</span> <span class="n">commandLine</span><span class="o">.</span><span class="na">getArgument</span><span class="o">(</span><span class="s">"port"</span><span class="o">);</span>
            <span class="n">port</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">portString</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">SwingSlimService</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SlimServer</span> <span class="n">slimServer</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">port</span><span class="o">,</span> <span class="n">slimServer</span><span class="o">);</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Next we needed a custom JavaSlimFactory:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingJavaSlimFactory</span> <span class="kd">extends</span> <span class="n">JavaSlimFactory</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">StatementExecutorInterface</span> <span class="nf">getStatementExecutor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">SwingStatementExecutor</span><span class="o">();</span> <span class="c1">//&lt;-- custom SwingStatementExecutor!
</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>And last but not least our custom StatementExecutor which forces all calls into the EDT thread:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">portofrotterdam</span><span class="o">.</span><span class="na">hamis</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">fitnesse.slim.StatementExecutor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">fitnesse.slim.StatementExecutorInterface</span><span class="o">;</span>

<span class="cm">/**
 * HaMIS custom StatementExecutor, to call and create in the EDT thread
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingStatementExecutor</span> <span class="kd">implements</span> <span class="n">StatementExecutorInterface</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StatementExecutor</span> <span class="n">wrapped</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StatementExecutor</span><span class="o">();</span>

    <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">EDTRunnable</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">Object</span> <span class="n">returnValue</span><span class="o">;</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">();</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setReturnValue</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">returnValue</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">returnValue</span> <span class="o">=</span> <span class="n">returnValue</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getReturnValue</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">returnValue</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">call</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">methodName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">caller</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">instanceName</span><span class="o">,</span> <span class="n">methodName</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">caller</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">caller</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callAndAssign</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">variable</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">methodName</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">callAndAssigner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">callAndAssign</span><span class="o">(</span><span class="n">variable</span><span class="o">,</span> <span class="n">instanceName</span><span class="o">,</span> <span class="n">methodName</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">callAndAssigner</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">callAndAssigner</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">create</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">className</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">creater</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">instanceName</span><span class="o">,</span> <span class="n">className</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">creater</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">creater</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">addPath</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">addPath</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">instanceName</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">reset</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">wrapped</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setVariable</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">wrapped</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">stopHasBeenRequested</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">stopHasBeenRequested</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This uses a small static class we’ve used in our code before to safely run a Runnable on the EDT and invokeAndWait (without waiting IN the EDT):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EDTRunner</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="kd">final</span> <span class="n">Runnable</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">SwingUtilities</span><span class="o">.</span><span class="na">isEventDispatchThread</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">r</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">EventQueue</span><span class="o">.</span><span class="na">invokeAndWait</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">InterruptedException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e1</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">InvocationTargetException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>The only thing left to do is to instruct Fitnesse to use our SlimService instead of the default implementation. This is done using the following parameter in our main page:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">!</span><span class="n">define</span> <span class="n">TEST_SYSTEM</span> <span class="o">{</span><span class="n">slim</span><span class="o">}</span>
<span class="o">!</span><span class="n">define</span> <span class="n">TEST_RUNNER</span> <span class="o">{</span><span class="n">com</span><span class="o">.</span><span class="na">portofrotterdam</span><span class="o">.</span><span class="na">hamis</span><span class="o">.</span><span class="na">SwingSlimService</span><span class="o">}</span></code></pre></figure>

<p>Make sure that the class can be found (for example, package it in a JAR and place it on Fitnesses classpath). And you’re done! Using a <a href="http://www.jidesoft.com/javadoc/com/jidesoft/utils/ThreadCheckingRepaintManager.html">ThreadCheckingRepaintManager</a> (workings described <a href="http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html">here</a>) we checked to see if the tests are now repainting/manipulating Swing from the correct thread, and it works like a charm.</p>

<p>Good luck testing with Fitnesse in the near future, if you have any problems/improvements/ideas please let me know (in the comments below).</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  

  <!-- Pagination -->
  
  <div class="pagination">
    <div class="pagination-center">
    
      <div class="pagination-item"><a href="/page/4">&laquo; Prev</a></div>
    

    
      
        <div class="pagination-item"><a href="/index.html">1</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/2">2</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/3">3</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/4">4</a></div>
      
    
      
        <div class="pagination-item"><strong>5</strong></div>
      
    
      
        <div class="pagination-item"><a href="/page/6">6</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/7">7</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/8">8</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/9">9</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/10">10</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/11">11</a></div>
      
    

    
      <div class="pagination-item"><a href="/page/6">Next &raquo;</a></div>
    
    </div>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <span class="svg-icon linkedin">Connect on LinkedIn</span>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <span class="svg-icon stackoverflow">Follow me on StackOverflow</span>
        </a>

        <a href="https://github.com/royvanrijn">
          <span class="svg-icon github">Follow me on GitHub</span>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <ispan class="svg-icon twitter">Follow me on Twitter</span>
        </a>
          
        <a href="/feed/index.xml">
          <span class="svg-icon rss">Check out the RSS feed</span>
        </a>
	  </div>
    
    </div>

  </div>

</footer>


  </body>

</html>
