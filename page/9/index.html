<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  
  <meta name="keywords" content="royvanrijn,programming,java,blog,devoxx,conference,speaker,technology,science,math,azspcs,tips,tricks" />
  
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://royvanrijn.com/page/9/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="http://royvanrijn.com/feed/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@royvanrijn" />
  <meta name="twitter:title" content="royvanrijn" />
  <meta name="twitter:description" content="Java, algorithms, math, science and more!" />
  <meta name="twitter:image" content="http://www.royvanrijn.com/images/twittercard.jpg"/>


<script>
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-1', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" width="990" height="307"/>
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <hr/>
  <!-- This loops through the paginated posts -->
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2010/01/guess-the-algorithm/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Guess the algorithm" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2010-01-23T21:54:24+01:00" class="date">
            Jan 23, 2010 21:54:24
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/guess-the-algorithm/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2010/01/guess-the-algorithm/">Guess the algorithm</a></h1>

        <span itemprop="articleBody">
          <p>Yesterday I found and programmed a nice little algorithm. I’m not going to tell you (yet) what it does and how its called, but I’ll just show the code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">int</span> <span class="nf">function</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="k">while</span><span class="o">(</span><span class="n">x</span><span class="o">!=</span><span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span><span class="o">((</span><span class="n">x</span><span class="o">&amp;</span><span class="mi">1</span><span class="o">)==</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">r</span><span class="o">+=</span><span class="n">y</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="n">x</span><span class="o">&gt;&gt;&gt;=</span><span class="mi">1</span><span class="o">;</span>
		<span class="n">y</span><span class="o">&lt;&lt;=</span><span class="mi">1</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>So tell me, what does this do, and what is the algorithm called?</p>

<p><strong>Edit:</strong></p>

<p>And indeed (it was a simple one) the correct solution is multiplication, and to be specific, Ethiopian or <a href="http://mathworld.wolfram.com/RussianMultiplication.html">Russian Multiplication</a>.</p>

<p>I’ll probably do more, harder ones, in the future..!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/guess-the-algorithm/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2010/01/dependency-injection-dissection/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Learn to use Dependency Injection" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2010-01-18T17:43:08+01:00" class="date">
            Jan 18, 2010 17:43:08
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/dependency-injection-dissection/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2010/01/dependency-injection-dissection/">Learn to use Dependency Injection</a></h1>

        <span itemprop="articleBody">
          <p>Recently I placed a comment on <a href="http://blog.objectmentor.com/articles/2010/01/17/dependency-injection-inversion">this</a> interesting blog from Uncle Bob Martin (Robert C. Martin). It contains a brief description on how I teach people how to use the Spring Framework.</p>

<p>Now, by popular demand (one person requested it over Twitter), I’ll guide you through the method and examples I use in this blogpost. It explains why people should use frameworks like Spring and/or Google Guice, and how.</p>

<h1 id="ordering-milk">Ordering Milk</h1>

<p>Lets take a look at the application we have. We have a service:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MilkRequestService</span> <span class="o">{</span>

	<span class="cm">/**</span>
<span class="cm">	 * Process a new order.</span>
<span class="cm">	 * @param customer</span>
<span class="cm">	 * @param amountOfBottles</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">);</span>

<span class="o">}</span></code></pre></figure>

<p>And we have a DAO (data access object) which will take care of persisting our order:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MilkDAO</span> <span class="o">{</span>

	<span class="cm">/**</span>
<span class="cm">	 * Save a new order.</span>
<span class="cm">	 * @param customer</span>
<span class="cm">	 * @param amountOfBottles</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>The implementation of this DAO isn’t really interesting, lets just pretent it goes to the database:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkDAODatabaseImpl</span> <span class="kd">implements</span> <span class="n">MilkDAO</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//Puts order in database</span>
	<span class="o">}</span>
	
<span class="o">}</span></code></pre></figure>

<p>And finally we have our service implementation:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkRequestServiceImpl</span> <span class="kd">implements</span> <span class="n">MilkRequestService</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">MilkDAO</span> <span class="n">milkDAO</span><span class="o">;</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Create a new service:</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">milkDAO</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkDAODatabaseImpl</span><span class="o">(</span>
				<span class="c1">//With SQLConnection or something</span>
				<span class="o">);</span>
	<span class="o">}</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Place a new order for milk.</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//Log the order:</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;LOG: Customer &quot;</span> <span class="o">+</span> <span class="n">customer</span> <span class="o">+</span> <span class="s">&quot; wants &quot;</span>
				<span class="o">+</span> <span class="n">amountOfBottles</span> <span class="o">+</span> <span class="s">&quot; bottle&quot;</span>
				<span class="o">+</span> <span class="o">((</span><span class="n">amountOfBottles</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot;s&quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
		<span class="c1">//Save the order:</span>
		<span class="n">milkDAO</span><span class="o">.</span><span class="na">saveOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Lets pretent that we are good obeying programmers, although we didn’t write our unit test up front, we are going to do it right away.</p>

<p>So… we want to test the service, how are we going to do this? Well, lets just create the service, call it, and then check if it does what we want it to do!</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkRequestServiceTest</span> <span class="o">{</span>

	<span class="n">MilkRequestService</span> <span class="n">milkRequestService</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">();</span>
	
	<span class="nd">@Test</span>
	<span class="cm">/**</span>
<span class="cm">	 * Test our milk request service.</span>
<span class="cm">	 * Pre:</span>
<span class="cm">	 * - We have a customer that wants to order 5 bottles of milk</span>
<span class="cm">	 * Post:</span>
<span class="cm">	 * - The milk DAO got a request to save 5 bottles of milk</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testProcessOrder</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="kd">final</span> <span class="n">String</span> <span class="n">customer</span> <span class="o">=</span> <span class="s">&quot;testUser&quot;</span><span class="o">;</span>
		<span class="kd">final</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
		
		<span class="n">milkRequestService</span><span class="o">.</span><span class="na">processOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
		
		<span class="c1">//Eeehh.... how do we check the call to the DAO?</span>
		
		<span class="c1">//HELP!!</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>We run into a problem rather quickly. Now this code makes a connection to the database and it might or might not save our order. But how do we check this? We could go to the database and check…</p>

<p>NO! Never go to the database in a unit test. We only want to test a single unit of work, and the database ain’t one of them.</p>

<p>We need to refactor our code…!</p>

<h1 id="the-factory">The Factory</h1>

<p>One possible solution to this problem is using a factory method. A factory creates objects so you don’t have to. Its best shown using an example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkFactory</span> <span class="o">{</span> <span class="c1">//no pun intended</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Here we save the mapping:</span>
<span class="cm">	 */</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">mapping</span><span class="o">;</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Create the mapping</span>
<span class="cm">	 */</span>
	<span class="kd">static</span> <span class="o">{</span>
		<span class="n">mapping</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
		<span class="n">mapping</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">MilkDAO</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="nf">MilkDAODatabaseImpl</span><span class="o">());</span>
		<span class="n">mapping</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">MilkRequestService</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="nf">MilkDAODatabaseImpl</span><span class="o">());</span>
	<span class="o">}</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Set a mapping by hand.</span>
<span class="cm">	 * Should only be used when unit testing.</span>
<span class="cm">	 * </span>
<span class="cm">	 * @param &lt;T&gt;</span>
<span class="cm">	 * @param clazz</span>
<span class="cm">	 * @param impl</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kd">static</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">replaceMapping</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="o">,</span> <span class="n">T</span> <span class="n">impl</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">mapping</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">clazz</span><span class="o">,</span> <span class="n">impl</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="cm">/**</span>
<span class="cm">	 * Not threadsafe ugly code-monkey code.</span>
<span class="cm">	 * @param &lt;T&gt;</span>
<span class="cm">	 * @param requestedClass</span>
<span class="cm">	 * @return</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kd">static</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">get</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">requestedClass</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span><span class="o">(</span><span class="n">mapping</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">requestedClass</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="o">(</span><span class="n">T</span><span class="o">)</span><span class="n">mapping</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">requestedClass</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Doesn&#39;t exist&quot;</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>So, lets dissect this.</p>

<p>The method get(class, object) will return an implementation for a given Class. It uses a Map to get the mapping. The map is created during the static initialization (yuk!) and contains the default mapping, but we can also provide our own mapping using replaceMapping(class, object).</p>

<p>Now how do we use it? Lets see our new MilkRequestServiceImpl:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkRequestServiceImpl</span> <span class="kd">implements</span> <span class="n">MilkRequestService</span> <span class="o">{</span>

	<span class="cm">/**</span>
<span class="cm">	 * Place a new order for milk.</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//Log the order:</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;LOG: Customer &quot;</span> <span class="o">+</span> <span class="n">customer</span> <span class="o">+</span> <span class="s">&quot; wants &quot;</span>
				<span class="o">+</span> <span class="n">amountOfBottles</span> <span class="o">+</span> <span class="s">&quot; bottle&quot;</span>
				<span class="o">+</span> <span class="o">((</span><span class="n">amountOfBottles</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot;s&quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
		
		<span class="c1">//Save the order:</span>
		<span class="n">MilkFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">MilkDAO</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">saveOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>As you can see we no longer need the constructor, we get the required DAO from the factory when we need it.</p>

<p>Now we can test it using the replaceMapping method:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkRequestServiceTest</span> <span class="o">{</span>

	<span class="n">MilkRequestService</span> <span class="n">milkRequestService</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">();</span>
	
	<span class="c1">//@Test</span>
	<span class="cm">/**</span>
<span class="cm">	 * Test our milk request service.</span>
<span class="cm">	 * Pre:</span>
<span class="cm">	 * - We have a customer that wants to order 5 bottles of milk</span>
<span class="cm">	 * Post:</span>
<span class="cm">	 * - The milk DAO got a request to save 5 bottles of milk</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testProcessOrder</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="kd">final</span> <span class="n">String</span> <span class="n">customer</span> <span class="o">=</span> <span class="s">&quot;testUser&quot;</span><span class="o">;</span>
		<span class="kd">final</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
		
		<span class="c1">//Better use a mock here, for example using Mockito or EasyMock.</span>
		<span class="n">MilkFactory</span><span class="o">.</span><span class="na">replaceMapping</span><span class="o">(</span><span class="n">MilkDAO</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="nf">MilkDAO</span><span class="o">()</span> <span class="o">{</span>
			<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">//Check if the customer = testUser</span>
				<span class="c1">//Check if the amountOfBottles = 5;</span>
			<span class="o">}</span>
		<span class="o">});</span>
		
		<span class="n">MilkFactory</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">MilkRequestService</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
			<span class="o">.</span><span class="na">processOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>As the comment says, you are probably much better of here using a mocking framework like EasyMock or Mockito. But the point is, we can test our class now without going to the database! We got our control back.</p>

<h1 id="dependency-injection">Dependency Injection</h1>

<p>Instead of writing a factory, there is a better way to do this. It is the Hollywood principle “Don’t call us, we’ll call you”.</p>

<p>All the dependencies of the objects are injected into them instead of created (initial example) or retrieved (factory example). So our service will look like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkRequestServiceImpl</span> <span class="kd">implements</span> <span class="n">MilkRequestService</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">MilkDAO</span> <span class="n">milkDao</span><span class="o">;</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * The milkDao is given to us by our creator.</span>
<span class="cm">	 * </span>
<span class="cm">	 * @param milkDao</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">(</span><span class="n">MilkDAO</span> <span class="n">milkDao</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">milkDao</span> <span class="o">=</span> <span class="n">milkDao</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Place a new order for milk.</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">processOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
		<span class="c1">//Log the order:</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;LOG: Customer &quot;</span> <span class="o">+</span> <span class="n">customer</span> <span class="o">+</span> <span class="s">&quot; wants &quot;</span>
				<span class="o">+</span> <span class="n">amountOfBottles</span> <span class="o">+</span> <span class="s">&quot; bottle&quot;</span>
				<span class="o">+</span> <span class="o">((</span><span class="n">amountOfBottles</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">?</span> <span class="s">&quot;s&quot;</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
		
		<span class="c1">//We just use the milkDao we got:</span>
		<span class="n">milkDao</span><span class="o">.</span><span class="na">saveOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Now lets take a look at our test-code, it now looks like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testProcessOrder</span><span class="o">()</span> <span class="o">{</span>
	
	<span class="kd">final</span> <span class="n">String</span> <span class="n">customer</span> <span class="o">=</span> <span class="s">&quot;testUser&quot;</span><span class="o">;</span>
	<span class="kd">final</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
	
	<span class="c1">//Better use a mock here, for example using Mockito or EasyMock.</span>
	<span class="n">MilkDAO</span> <span class="n">testMilkDao</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkDAO</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">//Check if the customer = testUser</span>
			<span class="c1">//Check if the amountOfBottles = 5;</span>
		<span class="o">}</span>
	<span class="o">};</span>
	
	<span class="n">MilkRequestService</span> <span class="n">milkRequestService</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">(</span><span class="n">testMilkDao</span><span class="o">);</span>
	
	<span class="n">milkRequestService</span><span class="o">.</span><span class="na">processOrder</span><span class="o">(</span><span class="n">customer</span><span class="o">,</span> <span class="n">amountOfBottles</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>We now have full control over the wiring. First we create our own little testMilkDao (use a mock here!) and we place it into our service. That’s all. Instead of the hidden creation in the service itself or in the factory we are in full control.</p>

<p>But if you want to use this application you’ll need “something else” to create all the objects and do the actual wiring. Lets create our own Spring or Google Guice..!!</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkApplication</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">MilkApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkApplication</span><span class="o">();</span>
		<span class="n">app</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">MilkApplication</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">//-----   Provide wiring:  -----</span>
		<span class="n">MilkDAO</span> <span class="n">milkDao</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkDAODatabaseImpl</span><span class="o">();</span>
		<span class="n">milkRequestService</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">(</span><span class="n">milkDao</span><span class="o">);</span>
		<span class="c1">//------------------------------</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">MilkRequestService</span> <span class="n">milkRequestService</span><span class="o">;</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Do stuff:</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">milkRequestService</span><span class="o">.</span><span class="na">processOrder</span><span class="o">(</span><span class="s">&quot;Roy van Rijn&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="using-spring">Using Spring</h1>

<p>The wiring we do in the constructor is what Spring and Google Guice would do for us. In the case of Spring you’ll write something like this:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/beans&quot;</span>
       <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
       <span class="na">xsi:schemaLocation=</span><span class="s">&quot;</span>
<span class="s">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd&quot;</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;milkDao&quot;</span> <span class="na">class=</span><span class="s">&quot;nl.redcode.examples.milkman.MilkDAODatabaseImpl&quot;</span> <span class="nt">/&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;milkRequestService&quot;</span> <span class="na">class=</span><span class="s">&quot;nl.redcode.examples.milkman.MilkRequestServiceImpl&quot;</span><span class="nt">&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;milkDao&quot;</span> <span class="na">ref=</span><span class="s">&quot;milkDao&quot;</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span></code></pre></figure>

<p>Now you’ll still need to retrieve these “beans” from Spring, this can be done using our old-friend the Factory!<br />
It’ll look something like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">ClassPathXmlApplicationContext</span> <span class="n">appContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span>
	<span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;applicationContext.xml&quot;</span><span class="o">});</span>
<span class="n">MilkRequestService</span> <span class="n">milkRequestService</span> <span class="o">=</span> <span class="n">appContext</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&quot;milkRequestService&quot;</span><span class="o">);</span></code></pre></figure>

<p>This instructs Spring to load the XML file and create all the objects. Then we retrieve the milkRequestService and it is fully wired and ready to use!</p>

<h1 id="using-guice">Using Guice</h1>

<p>Google Guice works exacly the same, only instead of using XML to define the mapping it only uses Java code and annotations.</p>

<p>First we tell Guice which implementations are the default implementations, for example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">.</span><span class="na">examples</span><span class="o">.</span><span class="na">milkman</span><span class="o">;</span>

<span class="nd">@ImplementedBy</span><span class="o">(</span><span class="n">MilkDAODatabaseImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MilkDAO</span> <span class="o">{</span>

	<span class="cm">/**</span>
<span class="cm">	 * Save a new order.</span>
<span class="cm">	 * @param customer</span>
<span class="cm">	 * @param amountOfBottles</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrder</span><span class="o">(</span><span class="n">String</span> <span class="n">customer</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">amountOfBottles</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>We also do this to the MilkRequestService. Next we tell Guice where to inject these implementations, in this case using ‘Constructor Injection’:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**</span>
<span class="cm"> * The milkDao is injected by Guice.</span>
<span class="cm"> * </span>
<span class="cm"> * @param milkDao</span>
<span class="cm"> */</span>
<span class="nd">@Inject</span>
<span class="kd">public</span> <span class="nf">MilkRequestServiceImpl</span><span class="o">(</span><span class="n">MilkDAO</span> <span class="n">milkDao</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">this</span><span class="o">.</span><span class="na">milkDao</span> <span class="o">=</span> <span class="n">milkDao</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>Now if we want to use it, we retrieve it from Guice like so:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MilkApplication</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">MilkApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MilkApplication</span><span class="o">();</span>
		<span class="n">app</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
	<span class="o">}</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Do stuff:</span>
<span class="cm">	 */</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
		
	    <span class="n">Injector</span> <span class="n">injector</span> <span class="o">=</span> <span class="n">Guice</span><span class="o">.</span><span class="na">createInjector</span><span class="o">();</span>
	    <span class="n">MilkRequestService</span> <span class="n">milkRequestService</span> <span class="o">=</span> 
	        <span class="n">injector</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">MilkRequestService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

		<span class="n">milkRequestService</span><span class="o">.</span><span class="na">processOrder</span><span class="o">(</span><span class="s">&quot;Roy van Rijn&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Thats about it, you’ve seen:</p>

<ul>
  <li>Why you should use these patterns</li>
  <li>How you would program them yourself (ugly monkey-code-style)</li>
  <li>How using Spring (with XML)</li>
  <li>How using Google Guice!</li>
</ul>

<p>Good luck and happy programming!</p>

<p>ps. The code examples are just examples…!!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/dependency-injection-dissection/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2010/01/movies-as-porn/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="What if your favourite movie was remade as porno" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2010-01-15T15:45:57+01:00" class="date">
            Jan 15, 2010 15:45:57
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/movies-as-porn/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2010/01/movies-as-porn/">What if your favourite movie was remade as porno</a></h1>

        <span itemprop="articleBody">
          <p>What if your favourite movie was remade as a porn movie? How would it be called, what would the title be?</p>

<p>My collegues and I were discussing this, and we came up with a top 10. We’ve also started a twitter <a href="http://hashtags.org/moviesasporn">hashtag</a>.</p>

<h1 id="top-10">Top 10</h1>

<ol>
  <li>Shaving Ryan’s Privates (everybodies favourite)</li>
  <li>The Curious Taste of Benjamin’s Bottom</li>
  <li>Honey, I shagged the kids</li>
  <li>Missionary Impossible III</li>
  <li>Good Will Humping</li>
  <li>Free my Willy</li>
  <li>Legally Boned</li>
  <li>I Know Who you did last Summer</li>
  <li>Schindler’s Fist</li>
  <li>Cliff Banger</li>
</ol>

<h1 id="honourable-mentions">Honourable mentions</h1>

<p>And some honourable mentions to the titles that just didn’t make the list:</p>

<ul>
  <li>When Harry ate Sally</li>
  <li>Saturday Night Beaver</li>
  <li>Spankenstein</li>
  <li>Swollow Hal</li>
  <li>Sorest Rump</li>
  <li>Bangs of New York</li>
  <li>American Bangster</li>
  <li>Thighs Wide Shut</li>
  <li>Citizen Came</li>
  <li>The Green Milf</li>
  <li>The Porn Identity</li>
  <li>Crouching Woman, Hidden Camera</li>
</ul>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/movies-as-porn/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2010/01/does-my-car-hate-me/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Does my car hate me?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2010-01-12T00:04:21+01:00" class="date">
            Jan 12, 2010 00:04:21
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/does-my-car-hate-me/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2010/01/does-my-car-hate-me/">Does my car hate me?</a></h1>

        <span itemprop="articleBody">
          <p>Why does my car do this to me? It bugs me everyday. When I drive with the snow outside I have to use my windscreen washer quite a lot. When I pull the little lever behind my steering wheel it spurts a jet of antifreeze/washer fluid onto my screen and it starts to wipe for about 10 times. Then it stops… my window is clean again!</p>

<p><img src="/images/windscreen-300x186.jpg" alt="picture of dirty windscreen" /></p>

<p>But after about 15 seconds it does one final sweep… and this last sweep <strong>always</strong> leaves ugly marks!</p>

<p>Why do cars do this!!!? First it cleans my window perfectly, and then spoils it!</p>

<p><strong>Update:</strong><br />
A collegue adviced me this: If the car has just finished wiping, quickly switch on the manual and stop it. This will still cause one extra wipe, but it comes right after the others. This produces a slightly better result.</p>

<p>I tried this two times on my car (a Fiat Bravo) and it worked one time, the other time it still did the final whipe after around 10 seconds.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/does-my-car-hate-me/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2010/01/md5-fixed-point/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="MD5 quine, fixed point" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2010-01-05T16:04:53+01:00" class="date">
            Jan 5, 2010 16:04:53
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/md5-fixed-point/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2010/01/md5-fixed-point/">MD5 quine, fixed point</a></h1>

        <span itemprop="articleBody">
          <h1 id="md5-quines">MD5 quines</h1>

<p>Sometimes I let my mind wonder and I get crazy questions. Today was a good example, I encountered a MD5 hash and I started to wonder, would there be a hash which would (when hashed again) be the same?</p>

<p>Thus: MD5(x) = x</p>

<p>This would be a kind of MD5 quine, when fed into the algorithm you get the original value back. This is actually called an MD5 fixed point.</p>

<h1 id="information-ive-found">Information I’ve found</h1>

<p>So I started investigating, soon I discovered <a href="http://www.mscs.dal.ca/~selinger/md5collision/">this</a> website about collisions. Its well known that all hashing algorithms must have collisions, you can’t always produce a unique hash for input larger then the output of course.</p>

<p>The output of the MD5 sum is 128 bit (16 byte) long, so the input should also have the same length. But the MD5 algorithm is defined to have 512 bits as input. This isn’t really a problem because the algorithm will extend smaller input with padding. Lets assume the MD5 sum of any input is uniformly distributed over all possible sums, then the probability that a 128-bit string is a fixed point is 1/2^128. This isn’t a crazy assumption because all hashing-algorithms are designed to distribute the output as uniformly as possible to avoid collisions.</p>

<p>So, the probability that no 128-bit string is a real fixed point is (1 - 1/2^128)^(2^128). The probability that there IS a fixed point is 1 - (1 - 1/2^128)^(2^128).</p>

<p>Since the limit as N goes to infinity of (1 - 1/N)^N is 1/e, and 2^128 is most certainly a very large number, this probability is almost exactly 1 - 1/e = 63.21%.</p>

<p>But, of course, there is no randomness involved here - there either is a fixed point or there isn’t. But, we can be 63.21% confident that there is a fixed point. (Also, notice that this number does not depend on the size of the keyspace - if MD5 sums were 32 bits or 1024 bits, the answer would be the same).</p>

<h1 id="looking-for-the-fixed-point">Looking for the fixed point</h1>

<p>I’ve just implemented a small program to look for these hashes, even though I know it will take millions of years to check all the numbers. But you never know, I might get lucky ;-)</p>

<p>The first algorithm I created took a single random String as input and kept applying the algorithm to the output. Eventually it will:</p>

<ol>
  <li>Go into a loop  </li>
  <li>Find a fixed point (which is a loop of size 1)</li>
</ol>

<p>The weird thing is, if it ends up in a loop of size 1… I’ve found two things. Not only a md5 fixed point, which creates itself after applying the algorithm. But also an input-value that produces this md5 as output, a collision!</p>

<h1 id="graph">Graph</h1>

<p>Another interesting thing would be a complete graph of all md5 answers. Which loops can we find, which md5 has most collisions etc. But this would take eternity to calculate, even using all the machines in the world.</p>

<h1 id="open-questions">Open questions</h1>

<ul>
  <li>Are there loops? (It is possible there aren’t any loops at all…?)</li>
  <li>Are there loops of size 1, a.k.a. fixed points?</li>
  <li>Which/how many 128 bit combinations can’t be created with the input values?</li>
  <li>Which/how many collisions will you get with all the input values?</li>
</ul>

<p>More thoughts, errors, solutions..?</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2010/01/md5-fixed-point/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/splitting-up-spring-web-flow-facelets-into-jars/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Splitting up Spring Web Flow & Facelets into JARs" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-15T15:25:15+01:00" class="date">
            Dec 15, 2009 15:25:15
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/splitting-up-spring-web-flow-facelets-into-jars/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/splitting-up-spring-web-flow-facelets-into-jars/">Splitting up Spring Web Flow & Facelets into JARs</a></h1>

        <span itemprop="articleBody">
          <p>In our current project we want to have multiple Spring Web Flow-flows in one WAR-file. <em>But</em> we also want the flows and pages to be inside seperate JAR files, making the application a bit more managable and modulair.</p>

<p>This sounds straightforward but it took quite a bit of code and time…</p>

<p>First I created a single WAR-project with all the basic Spring, JSF and Facelet configuration. Like any Spring Web Flow (SWF) project we have a project-servlet.xml.</p>

<p>The first thing I did was changing our flowRegistry:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- The registry of executable flow definitions --&gt;</span>
<span class="nt">&lt;webflow:flow-registry</span> <span class="na">id=</span><span class="s">&quot;flowRegistry&quot;</span> 
   <span class="na">flow-builder-services=</span><span class="s">&quot;facesFlowBuilderServices&quot;</span> 
   <span class="na">base-path=</span><span class="s">&quot;classpath*:flows&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;webflow:flow-location-pattern</span> <span class="na">value=</span><span class="s">&quot;/**/*-flow.xml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/webflow:flow-registry&gt;</span></code></pre></figure>

<p>The <em>classpath*:</em> allows SWF to search the whole classpath for flow-directories containing a flow definition.<br />
In our case it would be: <em>/flows/module1/module1-flow.xml</em></p>

<p>When you try to run this, and access a page we got the following exception:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Caused by: java.lang.IllegalStateException: A ContextResource is required to get relative view paths within this context; the resource was file [D:\projects\projectfromjar\module1\bin\flows\module1\page1.xhtml]
	at org.springframework.faces.webflow.FlowViewHandler.resolveResourcePath(FlowViewHandler.java:110)
	at org.springframework.faces.webflow.FlowViewHandler.restoreView(FlowViewHandler.java:74)
	at com.sun.facelets.FaceletViewHandler.restoreView(FaceletViewHandler.java:316)
	at org.springframework.faces.webflow.JsfViewFactory.getView(JsfViewFactory.java:93)
	at org.springframework.webflow.engine.ViewState.resume(ViewState.java:193)
	at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
	at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259)
	... 38 more</code></pre></figure>

<p>For some reason Spring Web Flow doesn’t want to load the facelet. After browsing around Spring’s forums I came across some solutions. They didn’t do the trick, only when combining several methods I got it working for Spring Web Flow 2.0.7.</p>

<p>This is how I did it, we need to tell Facelets to use our custom ClassPathResourceResolver:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- To load flows and pages from JARs, use this resolver --&gt;</span>
<span class="nt">&lt;context-param&gt;</span>
      <span class="nt">&lt;param-name&gt;</span>facelets.RESOURCE_RESOLVER<span class="nt">&lt;/param-name&gt;</span>
      <span class="nt">&lt;param-value&gt;</span>nl.redcode.ClassPathResourceResolver<span class="nt">&lt;/param-value&gt;</span>
<span class="nt">&lt;/context-param&gt;</span></code></pre></figure>

<p>The resolver itself is basic but does the job:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.sun.facelets.impl.ResourceResolver</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClassPathResourceResolver</span> <span class="kd">implements</span> <span class="n">ResourceResolver</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="n">URL</span> <span class="nf">resolveUrl</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
	    <span class="k">return</span> <span class="nf">getClass</span><span class="o">().</span><span class="na">getResource</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This will help Facelets to translate a given path to a java.net.URL using the current classloader.<br />
Spring Web Flow is currently giving us a FileSystemResource, and this doesn’t work because we want to load the pages with our classloader. For this we have the following wrapper:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.core.io.ClassPathResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.ContextResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.util.StringUtils</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">CustomClassPathContextResource</span> <span class="kd">extends</span> <span class="n">ClassPathResource</span> <span class="kd">implements</span> <span class="n">ContextResource</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">CustomClassPathContextResource</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">,</span> <span class="n">ClassLoader</span> <span class="n">classLoader</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">classLoader</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getPathWithinContext</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">getPath</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Resource</span> <span class="nf">createRelative</span><span class="o">(</span><span class="n">String</span> <span class="n">relativePath</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">pathToUse</span> <span class="o">=</span> <span class="n">StringUtils</span><span class="o">.</span><span class="na">applyRelativePath</span><span class="o">(</span><span class="n">getPath</span><span class="o">(),</span> <span class="n">relativePath</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CustomClassPathContextResource</span><span class="o">(</span><span class="n">pathToUse</span><span class="o">,</span> <span class="n">getClassLoader</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>To force Spring to use this Resource instead of FileSystemResource we use a post processor:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">nl</span><span class="o">.</span><span class="na">redcode</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeansException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.config.BeanPostProcessor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.support.GenericApplicationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.ClassPathResource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.Resource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.io.ResourceLoader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.webflow.definition.registry.FlowDefinitionRegistry</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlowRegistryClassPathPostProcessor</span> <span class="kd">implements</span> <span class="n">BeanPostProcessor</span> <span class="o">{</span>
	
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessBeforeInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessAfterInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">bean</span> <span class="k">instanceof</span> <span class="n">FlowDefinitionRegistry</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">alterRegistry</span><span class="o">((</span><span class="n">FlowDefinitionRegistry</span><span class="o">)</span> <span class="n">bean</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">alterRegistry</span><span class="o">(</span><span class="n">FlowDefinitionRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">flowId</span> <span class="o">:</span> <span class="n">registry</span><span class="o">.</span><span class="na">getFlowDefinitionIds</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">ApplicationContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="na">getFlowDefinition</span><span class="o">(</span><span class="n">flowId</span><span class="o">).</span><span class="na">getApplicationContext</span><span class="o">();</span>
            <span class="n">overrideResourceLoader</span><span class="o">((</span><span class="n">GenericApplicationContext</span><span class="o">)</span> <span class="n">ctx</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="cm">/**</span>
<span class="cm">     * Override the ResourceLoader:</span>
<span class="cm">     * We know our flow is always defined as &quot;flows/module1&quot;.</span>
<span class="cm">     * From the context we can derive the name of the flow (module1)</span>
<span class="cm">     * So we build up the ClassPathResource base as:</span>
<span class="cm">     * &quot;flows/&quot;+ ctx.getResource(&quot;&quot;)+ &quot;/&quot;</span>
<span class="cm">     * </span>
<span class="cm">     * @param ctx</span>
<span class="cm">     */</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">overrideResourceLoader</span><span class="o">(</span><span class="n">GenericApplicationContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
    	<span class="kd">final</span> <span class="n">ClassPathResource</span> <span class="n">cpr</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ClassPathResource</span><span class="o">(</span><span class="s">&quot;flows/&quot;</span><span class="o">+</span><span class="n">ctx</span><span class="o">.</span><span class="na">getResource</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">).</span><span class="na">getFilename</span><span class="o">()+</span><span class="s">&quot;/&quot;</span><span class="o">);</span>

    	<span class="n">ctx</span><span class="o">.</span><span class="na">setResourceLoader</span><span class="o">(</span><span class="k">new</span> <span class="nf">ResourceLoader</span><span class="o">()</span> <span class="o">{</span>
        	
        	<span class="kd">public</span> <span class="n">ClassLoader</span> <span class="nf">getClassLoader</span><span class="o">()</span> <span class="o">{</span>
        		<span class="k">return</span> <span class="n">cpr</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">();</span>
        	<span class="o">}</span>

        	<span class="kd">public</span> <span class="n">Resource</span> <span class="nf">getResource</span><span class="o">(</span><span class="n">String</span> <span class="n">location</span><span class="o">)</span> <span class="o">{</span>
        		<span class="k">return</span> <span class="k">new</span> <span class="nf">CustomClassPathContextResource</span><span class="o">(</span><span class="n">cpr</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span> <span class="o">+</span> <span class="n">location</span><span class="o">,</span> <span class="n">getClassLoader</span><span class="o">());</span>
        	<span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>When the FlowDefinitionRegistry is created we provide it with a new ResourceLoader. When the resources are requested by Spring Web Flow we create our own CustomClassPathContextResource. This consists of our current location plus the defined location (viewId).</p>

<p>To register this post processor add it to your project-servlet.xml:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;flowRegistryClassPathPostProcessor&quot;</span> <span class="na">class=</span><span class="s">&quot;nl.redcode.FlowRegistryClassPathPostProcessor&quot;</span> <span class="nt">/&gt;</span></code></pre></figure>

<h1 id="how-to-use-it">How to use it</h1>

<p>In our project we have the following flow(s) defined in a seperate JAR:<br />
/flows/module1/module1-flow.xml</p>

<p>And our pages are in the same directory:<br />
/flows/module1/page1.xhtml<br />
/flows/module1/page2.xhtml<br />
etc…</p>

<p>In the flow we can now use the following view-id’s:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;flow</span> 	<span class="na">xmlns=</span><span class="s">&quot;http://www.springframework.org/schema/webflow&quot;</span>
		<span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
		<span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.springframework.org/schema/webflow</span>
<span class="s">							http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;view-state</span> <span class="na">id=</span><span class="s">&quot;start&quot;</span> <span class="na">view=</span><span class="s">&quot;page1.xhtml&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/flow&gt;</span></code></pre></figure>

<p>Its also possible to have pages in other places, you can define the views as relative paths. For example:<br />
<em>”../../shared_pages/page2.xhtml”</em> turns into <em>“/shared_pages/page2.xhtml”</em><br />
<em>”../pages/page3.xhtml”</em> turns into <em>“/flows/pages/page3.xhtml”</em></p>

<p>The only problem we still have using this method is the deployment with RAD/Eclipse WTP and Facelets auto-refresh. For some reason after deploying our application locks the files in the bin-directory. Eclipse then can’t delete this directory and fails to publish. Ending in one big #fail. But a simple clean, clean, republish, clean, rebuild, restart, shout, scream, cry, rebuild and republish will solve this.</p>

<p>The big advantage is the fact that the flows and pages are now defined in their own JAR files, making releases and sharing classes (like shared services/shared menu’s etc) much easier.</p>

<p>Information on <a href="http://forum.springsource.org/showthread.php?t=64252">Spring forum</a></p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/splitting-up-spring-web-flow-facelets-into-jars/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/inversion_of_logic/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Cleaner code: Inversion of logic" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-11T10:14:10+01:00" class="date">
            Dec 11, 2009 10:14:10
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/inversion_of_logic/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/inversion_of_logic/">Cleaner code: Inversion of logic</a></h1>

        <span itemprop="articleBody">
          <h1 id="design-patterns">Design patterns</h1>

<p>Almost all programmers have heard about and used <a href="http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29">design patterns</a>. And there are a <em>lot</em> of them. Famous design patterns include the Singleton, Observer, Template method. These are all patterns that focus on objects and the relationship between them.</p>

<p>There are more groups of patterns, for example take <a href="http://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a> (or Inversion of Control). This is an architectural pattern. They tell you things about the design of the whole program. And there are specific pattern groups, like <a href="http://en.wikipedia.org/wiki/Concurrency_pattern">concurrency patterns</a>.</p>

<p>These patterns help you solve common problems in a well defined way, other programmers will recognise the patterns used and it will help produce more maintainable code.</p>

<h1 id="inversion-of-logic">Inversion of logic</h1>

<p>The patterns described above all say something about classes/methods and architecture. But I think another class of design patterns exist, which have a smaller granularity. These patterns say something about the code inside a single method. A good example is Inversion of logic.</p>

<p>Let me give an example, lets take the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">processRequests</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">RentalRequest</span><span class="o">&gt;</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
	
	<span class="k">for</span> <span class="o">(</span><span class="n">RentalRequest</span> <span class="n">rentalRequest</span> <span class="o">:</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span><span class="o">(</span><span class="n">rentalRequest</span><span class="o">.</span><span class="na">isFormFilledCorrectly</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">Tenant</span> <span class="n">tenant</span> <span class="o">=</span> <span class="n">rentalRequest</span><span class="o">.</span><span class="na">getTenant</span><span class="o">();</span>
			<span class="k">if</span><span class="o">(</span><span class="n">tenant</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">25</span> <span class="o">&amp;&amp;</span> <span class="n">checkLicenceStillValid</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="o">{</span>
				<span class="c1">//Approve the request</span>
				<span class="c1">//Process the request in database</span>
				<span class="c1">//Send email to HQ</span>
				<span class="c1">//Etc...</span>
			<span class="o">}</span>				
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Its a basic car-rental service and is has some logic before a request is processed. To make this code more readable and maintainable we can do two things. Of course it would be better to factor out the validation-logic into another piece of code. So lets do that first:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">processRequests</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">RentalRequest</span><span class="o">&gt;</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
	
	<span class="k">for</span> <span class="o">(</span><span class="n">RentalRequest</span> <span class="n">rentalRequest</span> <span class="o">:</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
    
		<span class="k">if</span><span class="o">(</span><span class="n">validateRequest</span><span class="o">(</span><span class="n">rentalRequest</span><span class="o">))</span> <span class="o">{</span>
			<span class="c1">//Approve the request</span>
			<span class="c1">//Process the request in database</span>
			<span class="c1">//Send email to HQ</span>
			<span class="c1">//Etc...</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">validateRequest</span><span class="o">(</span><span class="n">RentalRequest</span> <span class="n">rentalRequest</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">if</span><span class="o">(</span><span class="n">rentalRequest</span><span class="o">.</span><span class="na">isFormFilledCorrectly</span><span class="o">())</span> <span class="o">{</span>
		<span class="n">Tenant</span> <span class="n">tenant</span> <span class="o">=</span> <span class="n">rentalRequest</span><span class="o">.</span><span class="na">getTenant</span><span class="o">();</span>
		<span class="k">if</span><span class="o">(</span><span class="n">tenant</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">25</span> <span class="o">&amp;&amp;</span> <span class="n">checkLicenceStillValid</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
		<span class="o">}</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>Some programmers don’t like the validateRequest() method above because there are multiple exit points. This was more problematic in C code then in Java because in C you needed to do a bit more resource management (freeing mallocs etc), in Java I actually don’t mind having more then one exit-point in my code. In this case it makes it just a bit more readable. It would be easy to add a ‘requestIsValid’ boolean and fill that instead.</p>

<p>Anyway, the next step in refactoring this code is using what I call “Inversion of Logic”. The idea is that you don’t continue nesting if something is true, but instead inverse it, and bail out if something is false. The big advantage is that you’ll lose a lot of nesting, making the code more readable. I’m going to do this in two places, first in the processRequest for-loop, and second in the validateRequest method.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">processRequests</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">RentalRequest</span><span class="o">&gt;</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
	
	<span class="k">for</span> <span class="o">(</span><span class="n">RentalRequest</span> <span class="n">rentalRequest</span> <span class="o">:</span> <span class="n">requests</span><span class="o">)</span> <span class="o">{</span>
    
		<span class="k">if</span><span class="o">(!</span><span class="n">validateRequest</span><span class="o">(</span><span class="n">rentalRequest</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">continue</span><span class="o">;</span>
		<span class="o">}</span>
		
		<span class="c1">//Approve the request</span>
		<span class="c1">//Process the request in database</span>
		<span class="c1">//Send email to HQ</span>
		<span class="c1">//Etc...</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">validateRequest</span><span class="o">(</span><span class="n">RentalRequest</span> <span class="n">rentalRequest</span><span class="o">)</span> <span class="o">{</span>
	<span class="k">if</span><span class="o">(!</span><span class="n">rentalRequest</span><span class="o">.</span><span class="na">isFormFilledCorrectly</span><span class="o">())</span> <span class="o">{</span>
		<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="n">Tenant</span> <span class="n">tenant</span> <span class="o">=</span> <span class="n">rentalRequest</span><span class="o">.</span><span class="na">getTenant</span><span class="o">();</span>
	<span class="k">if</span><span class="o">(</span><span class="n">tenant</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">25</span> <span class="o">||</span> <span class="o">!</span><span class="n">tenant</span><span class="o">.</span><span class="na">checkLicenceStillValid</span><span class="o">(</span><span class="n">tenant</span><span class="o">))</span> <span class="o">{</span>
		<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>As you can see in the for-loop all the business logic is moved one indent back, this will make your code easier to scan for business rules. And if you look at the validateRequest method the code reads more fluent. Instead of stacking up and remembering the valid cases:</p>

<p><em>IF form is correct<br />
AND tenant age correct<br />
AND tenant licence is valid<br />
THEN proceed</em></p>

<p>We now eliminate the bad cases first:</p>

<p><em>IF form is incorrect: deny rental<br />
IF tenant’s age or licence is invalid: deny rental<br />
ELSE proceed</em></p>

<p>I’m trying to do this everywhere I can, it realy helps the readability.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/inversion_of_logic/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/java-ee-6-released-including-servlet-3-0/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Java EE 6 released, including Servlet 3.0" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-10T22:43:13+01:00" class="date">
            Dec 10, 2009 22:43:13
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/java-ee-6-released-including-servlet-3-0/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/java-ee-6-released-including-servlet-3-0/">Java EE 6 released, including Servlet 3.0</a></h1>

        <span itemprop="articleBody">
          <p>Today marks the release of Java EE 6. The reference implementation (Glassfish V3) has been released and the specifications are going into their final state very soon.</p>

<p>About two years ago, while I was attending the JavaOne conference, I first heard about the Servlet 3.0 ideas. As a web developer I’ve worked a lot with these Servlets so I was curious about the ideas. But what I saw wasn’t what I hoped for. On the contrary, what I saw was a huge mistake in my opinion!  </p>

<p>So I decided to contact the guys behind this JSR, to ask for some more information and share my views. Some time passed but I never got a reply… My next move was just to write about it, first on my own blog, then on <a href="http://java.dzone.com/articles/reviewing-early-draft-servlet-">DZone</a> (05/30/2008) and on <a href="http://www.theserverside.com/tt/articles/article.tss?l=PonderingAboutJSR135">The Server Side</a> a half year later, december 2008.</p>

<p>The only ‘reply’ I got from the people of the JSR was in the days following my (re-)post on The Server Side. Glassfish has a short re-cap on what happened <a href="http://swik.net/GlassFish/The+Aquarium/Servlet+3.0+...+Almost+at+PDR/cmaui">here</a>.</p>

<p>Now that the release is final I’m actually glad with the result. All the issues I raised from the early draft have been fixed. This is what a simple servlet would have looked like in the early draft:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Servlet</span><span class="o">(</span><span class="n">urlMappings</span><span class="o">={</span><span class="s">&quot;/foo&quot;</span><span class="o">,</span> <span class="s">&quot;/bar&quot;</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyServlet</span> <span class="o">{</span>
     <span class="nd">@GET</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleGet</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">res</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">//Handle the GET</span>
     <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>And this was my suggestion on how to improve it (see second article/link):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ServletMapping</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;myServlet&quot;</span><span class="o">,</span> <span class="n">mapping</span><span class="o">={</span><span class="s">&quot;/foo&quot;</span><span class="o">,</span> <span class="s">&quot;/bar&quot;</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>

     <span class="nd">@Override</span> <span class="c1">//keep strong typing!</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">res</span><span class="o">)</span> <span class="o">{</span>
          <span class="o">...</span>
     <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>And this is from the final release:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;myServlet&quot;</span><span class="o">,</span> <span class="n">urlPatterns</span><span class="o">={</span><span class="s">&quot;/foo&quot;</span><span class="o">,</span><span class="s">&quot;/bar&quot;</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>

     <span class="nd">@Override</span> <span class="c1">//keep strong typing!</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">res</span><span class="o">)</span> <span class="o">{</span>
          <span class="o">...</span>
     <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>That’s very similair, maybe a little too similair..? But anyway, I’m pleased about the result. It’ll be a lot easier in the future to write Servlets and Filters and a lot of cool new features have been added too.</p>

<p>I love the spec, despite the lack of feedback and replies from the expert group, ignoring all positive feedback and constructive advice. If I now look at the way the annotations turned out its almost identical to my first sketch after their JavaOne presentation in March 2008.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/java-ee-6-released-including-servlet-3-0/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/steve-oakley-the-head-hunter/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Steve Oakley, the head hunter" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-10T15:28:57+01:00" class="date">
            Dec 10, 2009 15:28:57
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/steve-oakley-the-head-hunter/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/steve-oakley-the-head-hunter/">Steve Oakley, the head hunter</a></h1>

        <span itemprop="articleBody">
          <p>Every once in a while head hunters call me. They call you at home, at work, they work out your email adress and mail you… This will probably sound very familiar to most IT professionals.</p>

<p>Anyway, the thing that strikes me is that about 50% of the time a head hunter calls, its Steve Oakley! And it isn’t just me that is getting calls from Steve Oakley, no, all my collegues and friends are getting calls from him as well!</p>

<p>So, are you in or out? Have you been called by Steve Oakley yet?</p>

<p><img src="/images/steve_oakley.PNG" alt="I went to work, and all I got was a call from Steve Oakley" /></p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/steve-oakley-the-head-hunter/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/testing-with-spring/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Testing with Spring" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-08T23:49:31+01:00" class="date">
            Dec 8, 2009 23:49:31
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/testing-with-spring/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/testing-with-spring/">Testing with Spring</a></h1>

        <span itemprop="articleBody">
          <p>To improve the quality of your code it is important to thoroughly test your code. Not only using unit tests but also using integration tests. I’ll describe these terms and show examples on how to create tests using JUnit and Spring’s Test library.</p>

<h1 id="unit-testing">Unit Testing</h1>

<p>A unit-test is an automated test that tests one single unit-of-work. So, what is this unit-of-work? Its the smallest piece of code that can be distinguished. If you are programming in Java the smallest unit you can test is a single method. So all unit-tests should only test this single unit, and no other dependencies.</p>

<p>Here is an example of a unit-test:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorTest</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">TOADD1</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">TOADD2</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">Integer</span> <span class="n">ANSWER</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
	
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAdd</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">Calculator</span> <span class="n">calculator</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Calculator</span><span class="o">();</span>
		
		<span class="n">Integer</span> <span class="n">returnedAnswer</span> <span class="o">=</span> <span class="n">calculator</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">TOADD1</span><span class="o">,</span> <span class="n">TOADD2</span><span class="o">);</span>
		
		<span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">&quot;The answer of &quot;</span> <span class="o">+</span> <span class="n">TOADD1</span> <span class="o">+</span> <span class="s">&quot;+&quot;</span> <span class="o">+</span> <span class="n">TOADD2</span> <span class="o">+</span>
			<span class="s">&quot; should be &quot;</span> <span class="o">+</span> <span class="n">ANSWER</span> <span class="o">+</span> <span class="s">&quot; but was &quot;</span> <span class="o">+</span> <span class="n">returnedAnswer</span><span class="o">,</span> 
			<span class="n">ANSWER</span><span class="o">,</span> <span class="n">returnedAnswer</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>By adding the @Test annotation JUnit will know this is a unit test. When running the code we verify that it correctly adds two values.</p>

<h1 id="test-driven-development">Test Driven Development</h1>

<p>Test Driven Development (TDD) is very important in modern software development. More and more people and businesses are using this technique to improve their code quality.</p>

<p>What TDD consists of, basically, is a very small development cycle for all your code. You just follow these steps:</p>

<ol>
  <li>Write a unit-test that verifies your usecase</li>
  <li>Implement the interfaces you created for step 1<br />
(can be done quick and dirty, just to get the logic correct)</li>
  <li>Run the tests and confirm your code is logically correct</li>
  <li>Refactor your code into maintainable, readable, reusable code</li>
  <li>Confirm the code still works as designed by running the test(s)</li>
</ol>

<p>Actually, I don’t write all my tests before the real code, but the process goes hand-in-hand. When writing code I always think about how I’m going to test it, and when the code is done, the test is too, combining step one and two. It speeds the process up a bit, and the code I end up with is almost the same because of the refactor-step.</p>

<h1 id="integration-testing">Integration testing</h1>

<p>With unit testing you can verify that the smallest units of work are correct. But this doesn’t give you any guarantees!</p>

<p>A famous example is NASA’s $125 million Mars Orbiter. It crashed when it was about to land on Mars. And why did it crash? Because one component calculated metric units and it feeded this information into another component that was using English units.</p>

<p>Very painfull for NASA, but a great example showing the importance of integration testing. Both NASA-components had been tested a lot, but apparently they neglected to test the components together.</p>

<h1 id="integration-testing-with-spring">Integration testing with Spring</h1>

<p>Most business software in Java uses Spring. This is a framework glueing all your components together and providing dependency injection. This makes it easy to test all the classes and methods, but it makes it a bit harder to test the integration and communication between classes because you depend on the framework for that.</p>

<p>Luckely Spring helps us with a their Spring Test library full of tools that help you creating integration tests.</p>

<p>One thing you need in all integration tests is Springs Context. With Spring Test it is possible to wire some beans and let Spring inject those beans in your unit test. The old(-ish) way to do this is extending <em>org.springframework.test.AbstractDependencyInjectionSpringContextTests</em> or <em>org.springframework.test.AbstractTransactionalSpringContextTests</em>.</p>

<p>If you want to use these classes you need two things:</p>

<ul>
  <li>Create a seperate Spring configuration with test-beans (or use your normal Spring config)</li>
  <li>Override <em>String[] getConfigLocations()</em>, provide it with the location of your Spring configuration.</li>
</ul>

<p>Now, for all the private fields you have in your testclass Spring will attempt to auto-wire beans on it.</p>

<p>A small example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PersonServiceTest</span> 
	<span class="kd">extends</span> <span class="n">AbstractDependencyInjectionSpringContextTests</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">PersonService</span> <span class="n">personService</span><span class="o">;</span>

	<span class="cm">/**</span>
<span class="cm">	 * Integration test for my calculator.</span>
<span class="cm">	 * It also calls the calculatorDao which is in the calculatorService.</span>
<span class="cm">	 */</span>
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAddPerson</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="n">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="o">...</span>
		
		<span class="n">personService</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
		
		<span class="c1">//Test if the person has been added.</span>
	<span class="o">}</span>
	
	<span class="cm">/**</span>
<span class="cm">	 * Provide the test with a configuration</span>
<span class="cm">	 */</span>
	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">getConfigLocations</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;my-test-applicationcontext.xml&quot;</span> <span class="o">};</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="testing-with-spring-25">Testing with Spring 2.5+</h1>

<p>With the introduction of Spring 2.5 they improved the above method. For more flexability and a bit more control over the objects they introduced the SpringJUnit4ClassRunner.</p>

<p>This is how you would use it:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.AbstractDependencyInjectionSpringContextTests</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.ContextConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span><span class="o">;</span>

<span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringJUnit4ClassRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">locations</span><span class="o">=</span> <span class="o">{</span> <span class="s">&quot;my-test-applicationcontext.xml&quot;</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PersonServiceTest</span> <span class="o">{</span>

	<span class="nd">@Autowired</span>
	<span class="kd">private</span> <span class="n">PersonService</span> <span class="n">personService</span><span class="o">;</span>

	<span class="cm">/**</span>
<span class="cm">	 * Integration test for my calculator.</span>
<span class="cm">	 * It also calls the calculatorDao which is in the calculatorService.</span>
<span class="cm">	 */</span>
	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAddPerson</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="n">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="o">...</span>
		
		<span class="n">personService</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
		
		<span class="c1">//Test if the person has been added.</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>It works the same way as before, but instead of having to override the <em>AbstractDependencyInjectionSpringContextTests</em> you now have a POJO. All the information about Spring and JUnit are placed in annotations on top of you class.</p>

<p>Hopefully I’ll find the time to write another post on mocking, including EasyMock and Mockito.</p>

        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/testing-with-spring/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/feed-your-curiosity/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Feed your curiosity" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-08T18:21:54+01:00" class="date">
            Dec 8, 2009 18:21:54
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/feed-your-curiosity/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/feed-your-curiosity/">Feed your curiosity</a></h1>

        <span itemprop="articleBody">
          <p><em><strong>Curiosity</strong> is an emotion related to natural inquisitive behaviour such as exploration, investigation, and learning, evident by observation in human and many animal species.</em></p>

<h1 id="source-wikipedia">Source: <a href="http://en.wikipedia.org/wiki/Curiosity">wikipedia</a></h1>

<p>To me, curiosity is one of the greatest things we as humans have. It feeds you with knowledge and sparks your fantasy, its an emotion that tickles your brain and forces you to explore.</p>

<p><img src="/images/curious_kitten.jpg" alt="Curiosity isn't limited to humans" /></p>

<p>In life its vital to search for new things, new limits, new experiences. Always keep asking questions, because with every answer you find, more questions will arise!</p>

<p>At first this sounds a bit depressing, more questions for every answer you get. This doesn’t sound satisfactory, but trust me, it is! Its not the answer that gives you satisfaction, its the new array of questions that give satisfaction! Because these questions feed our curiosity.</p>

<p>It also strikes me that children are very good in asking questions, and they come up with the most amazing questions! I really think this is a good skill, and its a shame we lose this when we get older. Why don’t adults ask these questions? Is it the fear of the “dumb-question”, does it make them look stupid?</p>

<p>Here are some examples of good curious questions:</p>

<ul>
  <li><strong>Q: How do blind people know when they’re done wiping toiletpaper?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>They can feel it from the drag, and then wipe two times extra (just to be sure)</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: If you smoke, and go into a coma. When you wake up, do you crave for a cigarette?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>It depends, after 8 days all the nicotine would be out of him/her bloodstream. So the physical chemical craving wouldn’t be there when they wake up. They’ll probably still have a habitual craving though.</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: Why don’t our eyelashes grow?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>All hair follicles have a certain cycle. The hair grows for a certain time, and then it just drops out. Eyelashes have a short cycle-rate.</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: Do fish drink?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>It actually depends: Saltwater fish drink, and filter the salt and minerals with their gills. Freshwater fish absorb water with their bodies.</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: How many neck-vertebrates does a giraffe have?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>The same amount as we have, seven. Even a mouse has seven vertebrates. All mammals have seven vertebrates except the manatee and three-toed sloth (They only have six)</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: Can Elephants jump?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>No, they can’t! They weigh too much. Also they get very uncomfortable if there is more then one feet of the ground at any time.</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: If you die from anti-freeze poisoning, would you be able to do cryopreservation?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>?</em></li>
</ul>

<p> </p>

<ul>
  <li><strong>Q: A Dutch question: Waarom moet je bevroren eten altijd “ontdooien”? Dooien is het tegenovergestelde van bevriezen! Dus moet je iets toch dooien in plaats van ontdooien?</strong></li>
</ul>

<p> </p>

<ul>
  <li>A: <em>?</em></li>
</ul>

<p>If you have curious/weird questions, or know answers to unanswered questions, please drop me a comment!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/feed-your-curiosity/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/atheist-look-on-christmas/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Atheist look on Christmas" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-07T20:10:59+01:00" class="date">
            Dec 7, 2009 20:10:59
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/atheist-look-on-christmas/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/atheist-look-on-christmas/">Atheist look on Christmas</a></h1>

        <span itemprop="articleBody">
          <p>Something other then the usual technical posts…<br />
As you might already know, I am an atheist. Yes, in my opinion there is no God, there never was and <em>(probably)</em> never will be.</p>

<h1 id="atheistic-christmas">Atheistic Christmas?</h1>

<p>Being an Atheist with Christian friends I get a lot of questions. Recently a friend of mine asked: <em>“Why do you celebrate Christmas when you are an Atheist?”</em>.</p>

<p>This question, to me, is quite simple. First of all, because it is a tradition. I think its a wonderful holiday. Ask around, what do people think about when you ask them about Christmas?</p>

<p>People think about:</p>

<ul>
  <li>Christmas trees</li>
  <li>Snow!</li>
  <li>Santa Claus</li>
  <li>Toys, candy and gifts</li>
  <li>Decorations, lights</li>
  <li>Christmas dinner with relatives</li>
  <li>The poor, and less fortunate</li>
  <li>Christmas songs</li>
  <li>The Grinch</li>
  <li>Mistletoe</li>
  <li>Christmas cards</li>
  <li>Charles Dickens, A Christmas Carol</li>
</ul>

<p>All of these things have no connection to the Christian Christmas, except the name “Christ-“.</p>

<h1 id="the-birth-of-jesus">The birth of Jesus</h1>

<p>The date on which we celebrate Christmas is sometimes said to be the birthdate of Christ. But in fact this isn’t true. The date has been borrowed from other holiday’s. Originally people celebrated the Roman <a href="http://en.wikipedia.org/wiki/Winter_solstice">winter solstice</a> on the 25th of December. It was probably just convenient to borrow this date.</p>

<p>So instead of saying I celebrate Christmas, I could just say I celebrate midwinter.</p>

<h1 id="santa-claus">Santa Claus</h1>

<p>Okay, how about Santa Claus, there is nothing more Christmas then Santa Claus. But again this figure has nothing to do with Christianity. The only thing God and Santa Claus have in common is the beard.</p>

<p>I’m from the Netherlands, and on the 5th of december the old Saint Nicolaas (or <a href="/images/sinterklaas.jpg">Sinterklaas</a>) visits our country. At night he visits all the houses and he brings gifts for all the kids! Does this sound familiar? It should be, he and Santa are the same guy..!</p>

<p><img src="/images/sinterklaas.jpg" alt="sinterklaas" /></p>

<p>When New York City was still called <a href="http://en.wikipedia.org/wiki/New_Amsterdam">New Amsterdam</a> the Dutch tradition took off in America. Slowly evolving (yes, holidays evolve too!) into the Santa Claus we all know today.</p>

<p>And being Dutch I have a huge advantage, we celebrate Sinterklaas AND Santa Claus, getting gifts and candy twice!</p>

<p>But again, a good reason to celebrate Christmas, it is based on a old Dutch tradition, and Santa Claus has nothing to do with Christianity.</p>

<h1 id="family-friends-and-relatives">Family, friends and relatives</h1>

<p>For me, the single most important reason I celebrate Christmas as an Atheist are my family, relatives and friends. Its the time of year, with its long dark days and cold nights, that is perfectly suited for spending time with friends and family.</p>

<p>Its also the perfect time of year to think about your own situation, about the people you know and love, about people who don’t have it as good as you have. Its the time of year of giving and sharing.</p>

<p>That is <strong>the</strong> most important reason to celebrate Christmas midwinter, winter solstice, late Sinterklaas.</p>

<p><img src="/images/GodExits.jpg" alt="god exits" /></p>

<h1 id="evolution">Evolution…</h1>

<p>Finally, I have to get something out of my system about evolution:</p>

<p>Please get over it, evolution exists, there is enough prove. Just because it is called a theory it doesn’t mean you can just throw it out of the Christmas decorated window. For example, did you know gravity is still a theory? It is, first it was known as <a href="http://en.wikipedia.org/wiki/Gravitation#Newton.27s_theory_of_gravitation">Newton’s Theory of Gravitation</a>, and after that a guy named Albert Einstein wrote a better version, the <a href="http://en.wikipedia.org/wiki/General_relativity">General Theory of Relativity</a>. It is accepted that gravity exists and nobody doubts that. Just like gravity, evolution is <a href="http://www.notjustatheory.com/">not just a theory</a>.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/atheist-look-on-christmas/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/vmware-on-your-phone/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="VMWare on your phone?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-07T11:47:56+01:00" class="date">
            Dec 7, 2009 11:47:56
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/vmware-on-your-phone/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/vmware-on-your-phone/">VMWare on your phone?</a></h1>

        <span itemprop="articleBody">
          <p>Recently VMWare, known from its computer virtualization software, has announced they are developing a dual-boot mobile version. This would allow you to run both Windows Mobile and Android on your phone.</p>

<p>But it isn’t going to be a dual-boot you know from your computer, they are planning on running the OS’es at the same time. This would allow you to switch between OS on-the-fly.</p>

<ul>
  <li>You want to use a Windows Mobile app? <em>*click*</em></li>
  <li>Oh, you want to use something on the Andriod platform? <em>*click*.</em></li>
</ul>

<p>I’m very curious how this will work out performance-wise, but the idea itself is great!</p>

<p>Via: <a href="http://www.computerworld.com.au/article/328811/vmware_developing_dual_os_smartphone_virtualisation">computerworld.com.au</a></p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/vmware-on-your-phone/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/eureqa/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Eureqa" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-04T21:14:48+01:00" class="date">
            Dec 4, 2009 21:14:48
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/eureqa/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/eureqa/">Eureqa</a></h1>

        <span itemprop="articleBody">
          <p>I’ve just stumbled across a new program: <a href="http://ccsl.mae.cornell.edu/eureqa">Eureqa</a></p>

<p>Its a program, developed by the Cornell Computational Synthesis Laboratory, that can detect equations in sets of data. Its primary goal is to identify the simplest mathematical formulas which could describe the underlying mechanisms that produced the data.</p>

<p>Its best described using their instructional video:</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/NhC1Qb-PQ5Q"></iframe>

<p>I’ve been playing around with it, for example trying to find a good prediction equation for the Son of Darts competition I blogged about earlier.</p>

<p>The algorithm(s) used in this program are based around “<a href="http://en.wikipedia.org/wiki/Symbolic_Regression">symbolic regression</a>”. It is a form of Genetic Programming (GA) where the computer processes a tree of possibilities recursively searching for the best suited building-blocks.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/eureqa/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2009/12/songsincode/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="#songsincode" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2009-12-04T19:09:29+01:00" class="date">
            Dec 4, 2009 19:09:29
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/songsincode/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2009/12/songsincode/">#songsincode</a></h1>

        <span itemprop="articleBody">
          <p><img src="/images/8.jpg" alt="songsincode" /></p>

<h1 id="what-is-songsincode-">What is #songsincode ?</h1>

<p>Last week I discovered a new hype on Twitter. The so-called “#songsincode”. It’s a huge hype under programmers and technical users. The best way to explain is probably by showing an example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span> <span class="n">door</span> <span class="o">==</span> <span class="n">red</span> <span class="o">)</span> <span class="o">{</span>
   <span class="n">door</span><span class="o">.</span><span class="na">paint</span><span class="o">(</span><span class="n">black</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>This obviously is Paint It Black by the Rolling Stones (if the door is red, paint it black)</p>

<h1 id="my-own-songsincode">My own #songsincode:</h1>

<p>Here is a collection of the #songsincode I created and tweeted:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span> <span class="n">silhouetto</span> <span class="o">==</span> <span class="n">man</span> <span class="o">&amp;&amp;</span> <span class="n">i</span><span class="o">.</span><span class="na">see</span><span class="o">(</span><span class="n">silhouetto</span><span class="o">))</span> <span class="o">{</span>
   <span class="n">scaramouche</span><span class="o">.</span><span class="na">doFandango</span><span class="o">();</span>
   <span class="k">if</span><span class="o">(</span><span class="n">thunderbolt</span> <span class="o">&amp;&amp;</span> <span class="n">lightning</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">me</span><span class="o">.</span><span class="na">frightened</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">ableToCheckout</span><span class="o">();</span>
<span class="o">}</span>
<span class="c1">//Unreachable code:</span>
<span class="n">leave</span><span class="o">();</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">switch</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span> <span class="o">{</span>
   <span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="n">feel</span><span class="o">.</span><span class="na">partner</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="k">break</span><span class="o">;</span>
   <span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="n">feel</span><span class="o">.</span><span class="na">onlyFriend</span> <span class="o">=</span> <span class="n">city</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">angel</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="n">mydaddy</span> <span class="o">:</span> <span class="n">oh</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">whack</span><span class="o">();</span>
<span class="o">}</span>
<span class="n">jar</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">whisky</span><span class="o">);</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">man</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">man</span><span class="o">.</span><span class="na">come</span><span class="o">(</span><span class="n">love</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
<span class="n">man</span><span class="o">.</span><span class="na">come</span><span class="o">();</span>
<span class="n">man</span><span class="o">.</span><span class="na">go</span><span class="o">();</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">life</span><span class="o">++;</span>
<span class="k">if</span><span class="o">(</span><span class="n">life</span> <span class="o">&gt;</span> <span class="n">you</span> <span class="o">&amp;&amp;</span> <span class="n">you</span> <span class="o">!=</span> <span class="n">me</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">me</span><span class="o">.</span><span class="na">goto</span><span class="o">(</span><span class="n">lengths</span><span class="o">);</span>
   <span class="n">distance</span><span class="o">(</span><span class="n">you</span><span class="o">.</span><span class="na">eyes</span><span class="o">);</span>
   <span class="k">if</span><span class="o">(</span><span class="n">me</span><span class="o">.</span><span class="na">saidTooMuch</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">me</span><span class="o">.</span><span class="na">setUp</span><span class="o">(</span><span class="n">it</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="n">Person</span> <span class="nl">p:</span><span class="n">people</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">p</span><span class="o">.</span><span class="na">imagine</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kt">boolean</span> <span class="nf">isLover</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
   <span class="k">if</span><span class="o">(</span><span class="s">&quot;Billy Jean&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">))</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="o">...</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">;</span> <span class="n">i</span><span class="o">++</span> <span class="o">)</span> <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;MMmmmMMmmm&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">&quot;test dummy&quot;</span><span class="o">);</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">bird</span><span class="o">;</span>
<span class="n">bird</span> <span class="o">=</span> <span class="s">&quot;word&quot;</span><span class="o">;</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span><span class="n">she</span> <span class="o">!=</span> <span class="n">lovely</span> <span class="o">&amp;&amp;</span> <span class="n">she</span> <span class="o">!=</span> <span class="n">wonderfull</span> <span class="o">&amp;&amp;</span> <span class="n">she</span> <span class="o">!=</span> <span class="n">precious</span> <span class="o">&amp;&amp;</span> <span class="n">she</span><span class="o">.</span><span class="na">age</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">...</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Submarine</span> <span class="n">submarine</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Submarine</span><span class="o">(</span><span class="k">new</span> <span class="nf">Color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span><span class="mi">255</span><span class="o">,</span><span class="mi">0</span><span class="o">));</span>
<span class="k">for</span><span class="o">(</span><span class="n">Person</span> <span class="nl">p:</span><span class="n">all</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">submarine</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">while</span><span class="o">(</span> <span class="o">!</span><span class="n">me</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="n">mondays</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
   <span class="n">tellWhy</span><span class="o">(</span><span class="n">me</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">while</span><span class="o">(</span><span class="n">young</span><span class="o">)</span> <span class="o">{}</span>
<span class="c1">//loops forever</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span><span class="n">time</span> <span class="o">==</span> <span class="n">hammer</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span> <span class="o">!</span><span class="n">women</span> <span class="o">)</span> <span class="o">{</span>
   <span class="n">cry</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">this</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">religion</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">while</span><span class="o">(!</span><span class="n">hasFound</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">lookFor</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span><span class="o">(</span><span class="n">grass</span><span class="o">==</span><span class="s">&quot;green&quot;</span> <span class="o">&amp;&amp;</span> <span class="n">girls</span> <span class="o">==</span> <span class="s">&quot;pretty&quot;</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">takeMe</span><span class="o">(</span><span class="n">paradiseCity</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="n">Leaf</span> <span class="nl">leaf:</span><span class="n">leafs</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">leaf</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="k">new</span> <span class="nf">Color</span><span class="o">(</span><span class="mi">139</span><span class="o">,</span><span class="mi">69</span><span class="o">,</span><span class="mi">19</span><span class="o">));</span>
<span class="o">}</span>
<span class="n">sky</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">GRAY</span><span class="o">);</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="n">Thing</span> <span class="nl">thing:</span><span class="n">stuff</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">aintGotNo</span><span class="o">(</span><span class="n">thing</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">complainAboutGod</span><span class="o">();</span>
<span class="k">for</span><span class="o">(</span><span class="n">Part</span> <span class="nl">part:</span><span class="n">bodyparts</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">gotMy</span><span class="o">(</span><span class="n">part</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">gotMy</span><span class="o">(</span><span class="n">life</span><span class="o">);</span>
<span class="n">gotMy</span><span class="o">(</span><span class="n">freedom</span><span class="o">);</span>
<span class="n">gotMy</span><span class="o">(</span><span class="n">life</span><span class="o">);</span></code></pre></figure>

<hr />

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">{</span>
     <span class="kd">final</span> <span class="n">countdown</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<h1 id="my-favourite">My favourite:</h1>

<p>And here is my all-time favourite (in CSS!!) created by <a href="http://twitter.com/Codepo8">@codepo8</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">.</span><span class="na">clowns</span><span class="o">{</span><span class="kt">float</span><span class="o">:</span><span class="n">left</span><span class="o">;}</span>
<span class="o">.</span><span class="na">jokers</span><span class="o">{</span><span class="kt">float</span><span class="o">:</span><span class="n">right</span><span class="o">};</span>
<span class="err">#</span><span class="n">me_you</span><span class="o">{</span><span class="nl">position:</span><span class="n">fixed</span><span class="o">;</span><span class="nl">margin:</span><span class="mi">0</span> <span class="n">auto</span><span class="o">;</span><span class="nl">width:</span><span class="mi">100</span><span class="o">%}</span></code></pre></figure>

<p>I hope you liked them!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2009/12/songsincode/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  

  <!-- Pagination -->
  
  <div class="pagination">
    <div class="pagination-center">
    
      <div class="pagination-item"><a href="/page/8">&laquo; Prev</a></div>
    

    
      
        <div class="pagination-item"><a href="/index.html">1</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/2">2</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/3">3</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/4">4</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/5">5</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/6">6</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/7">7</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/8">8</a></div>
      
    
      
        <div class="pagination-item"><strong>9</strong></div>
      
    
      
        <div class="pagination-item"><a href="/page/10">10</a></div>
      
    

    
      <div class="pagination-item"><a href="/page/10">Next &raquo;</a></div>
    
    </div>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <span class="svg-icon linkedin">Connect on LinkedIn</span>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <span class="svg-icon stackoverflow">Follow me on StackOverflow</span>
        </a>

        <a href="https://github.com/royvanrijn">
          <span class="svg-icon github">Follow me on GitHub</span>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <ispan class="svg-icon twitter">Follow me on Twitter</span>
        </a>
          
        <a href="/feed/index.xml">
          <span class="svg-icon rss">Check out the RSS feed</span>
        </a>
	  </div>
    
    </div>

  </div>

</footer>


  </body>

</html>
