<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://royvanrijn.com/page/6/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="http://royvanrijn.com/feed/" />
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" />
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <!-- This loops through the paginated posts -->
  
    <h1><a href="/blog/2012/06/rotoscoping-in-prince-of-persia/">Rotoscoping in Prince of Persia</a></h1>
    <p class="author">
      <span class="date">Jun 28, 2012 16:02:30</span>
    </p>
    <p>This afternoon I was reading about <a href="http://en.wikipedia.org/wiki/Rotoscoping">rotoscoping</a>. Rotoscoping is a technique where an artist takes a filmed movie and animates a drawn (cartoon) character frame by frame. The end result is highly realistic. The technique was first used in 1915's with an ink cartoon called <a href="http://en.wikipedia.org/wiki/Out_of_the_Inkwell">Out of the Inkwell</a> and has been used in many cartoons since.</p>
<p>But what about video games?</p>
<p>It turns out that Prince of Persia was the first computer game to use rotoscoping. That game brings back a lot of good memories to me, and probably everybody my age.</p>
<p>After a quick search I found this little gem of a video:<br />
<iframe width="420" height="315" src="http://www.youtube.com/embed/WAjRNU3DbSY" frameborder="0" allowfullscreen></iframe></p>
<p>The person in the video is David Mechner. He is the younger brother of Jordan Mechner, the creator of Prince of Persia.<br />
Jordan used the clips shown above to rotoscope the movements of the main character in the game.</p>
<p>I had never realised <em>why</em> I loved Prince of Persia so much in my youth. But now I think it is probably because of rotoscopy! The animations are so realistic and life like, it has brought a whole new level of realism into video games.</p>
<p>Here is another video of Jordan, showing even more rotoscoping in Prince of Persia:<br />
<iframe width="560" height="315" src="http://www.youtube.com/embed/gC3WEwSJoHs" frameborder="0" allowfullscreen></iframe></p>
<p>And the icing on the cake, a video about rotoscoping in Mortal Kombat 1:<br />
<iframe width="560" height="315" src="http://www.youtube.com/embed/CUBAKk64FS8" frameborder="0" allowfullscreen></iframe></p>



    
    <p>
    	<a href="/blog/2012/06/rotoscoping-in-prince-of-persia/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/06/getting-started-arduino-mega/">Getting started: Arduino Mega</a></h1>
    <p class="author">
      <span class="date">Jun 7, 2012 13:00:50</span>
    </p>
    <p>A couple of days ago I've received my Arduino Mega in the mail. Together with a breadboard, some plug-wires and Arduino-starters kit (with some resistors, capacitors, and a couple of sensors).</p>
<p><img src="/images/arduino_mega-300x225.jpg" alt="" title="arduino_mega" width="300" height="225" class="alignright size-medium wp-image-1192" /></p>
<h2>Arduino?</h2>
<p>The Arduino is a handy little board with micro controller. It allows you to connect your computer using USB to the micro controller and easily program and upload the program to the board. I'm a very experienced programmer with almost no experience in electronics.</p>
<p>I know what a resistor is and what it does, but I have no idea how/when to use which resistor. But I'd love to learn more, maybe even build some toy robots in the end. A final goal would be to have a working humanoid with 20+ servo's, but that goal might be a bit out of reach...</p>
<h2>The examples</h2>
<p>The first thing I've done after unboxing the Arduino was plugging it in my laptop and browsing to the <a href="http://www.arduino.cc">arduino.cc</a> website. There you can download the Arduino IDE.</p>
<p>In the 'Learning' section (<a href="http://arduino.cc/en/Tutorial/HomePage">http://arduino.cc/en/Tutorial/HomePage</a>) you'll find everything you need to get started. There are diagrams on how to wire everything into the breadboard, and there are also code examples.</p>
<p>Some stuff I made using the 'Learning' page:</p>
<ul>
<li>Blinking LED (the hardware Hello World, yay!)</li>
<li>Slowly fading blinking LED</li>
<li>Knight rider, KITT LED bar</li>
<li>Tiny keyboard with 5 buttons</li>
<li>Light reactive theremin</li>
</ul>
<p>And some projects that aren't on the example page, but could be made using the things I've learned:</p>
<ul>
<li>Extended keyboard with 5 buttons and LEDs!</li>
<li>Light reactive LED bar (showing the amount of light in LEDs)</li>
<li>Knock-sensor, LED shows when it 'feels/hears' a knock</li>
</ul>
<p>All the above was made in a single evening! And there is much much more that you could make with the Arduino. I haven't even started using servos and/or DC motors. The only problem left is lack of imagination!</p>
<p>For a programmer the code is very easy to understand, and the <a href="http://arduino.cc/en/Reference/HomePage">Arduino Programming Language</a> used is closely related to the C/Java family.</p>
<pre class="brush:java">
/*
  keyboard
 
 Plays a pitch that changes based on a changing analog input
 
 circuit:
 * 3 force-sensing resistors from +5V to analog in 0 through 5
 * 3 10K resistors from analog in 0 through 5 to ground
 * 8-ohm speaker on digital pin 8
 
 created 21 Jan 2010
 modified 9 Apr 2012
 by Tom Igoe 

This example code is in the public domain.
 
 http://arduino.cc/en/Tutorial/Tone3
 
 */

#include "pitches.h"

const int threshold = 10;    // minimum reading of the sensors that generates a note

// notes to play, corresponding to the 3 sensors:
int notes[] = {
  NOTE_A4, NOTE_B4,NOTE_C3 };

void setup() {

}

void loop() {
  for (int thisSensor = 0; thisSensor < 3; thisSensor++) {
    // get a sensor reading:
    int sensorReading = analogRead(thisSensor);

    // if the sensor is pressed hard enough:
    if (sensorReading > threshold) {
      // play the note corresponding to this sensor:
      tone(8, notes[thisSensor], 20);
    } 
  }
}
</pre>
<p>The language has borrowed a lot of syntax from C, but there are some tricky issues (in the eyes of a programmer). For example:</p>
<pre class="brush:java">
int sensorValue = analogRead(A0); 
String stringThree = "Sensor value: " + sensorValue;
Serial.println(stringThree);
</pre>
<p>This little piece of code above gives unpredictable results because 'stringThree' never got an initial value before you started concatenating different data types. Instead you'll have to do:</p>
<pre class="brush:java">
int sensorValue = analogRead(A0); 
String stringOne = "Sensor value: ";
String stringThree = stringOne + sensorValue;
Serial.println(stringThree);
</pre>
<p>Weird...! But I really suggest trying out the Arduino, give it a chance and you'll probably like it and learn a lot about electronics and microcontrollers.</p>



    
    <p>
    	<a href="/blog/2012/06/getting-started-arduino-mega/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/05/we-are-now-cached/">We are now cached</a></h1>
    <p class="author">
      <span class="date">May 9, 2012 16:16:22</span>
    </p>
    <p>Yesterday we (at <a href="http://www.jpoint.nl/" alt="JPoint, the company I work for.">JPoint</a>) invited <a href="http://www.innoq.com/blog/st/" alt="Stefan Tilkov's blog">Stefan Tilkov</a> over for a discussion about REST and RESTful services. He knows a lot about the subject and could educate us and help with any questions.</p>
<p>One of the things he mentioned was: If you don't use caching, you are an idiot.</p>
<h2>Where do websites cache?</h2>
<p>There are multiple tiers where caching of websites is done, and is useful.</p>
<h3>Browser cache</h3>
<p>The best cache you can have is the cache inside the browser. If a website knows it has the latest version, it can just read it from disk. There is absolutely no reason to go online.</p>
<h3>Proxy cache</h3>
<p>The second type of cache would be the proxy cache. As you would have guessed this is a proxy and it does caching. It sits between the user/browser and the internet gateway. This cache sees all the requests and stores pages that can be cached. If another user requests a webpage that hasn't changed it can provide the page instantly.</p>
<h3>Reversed proxy cache</h3>
<p>You could also have a cache between the internet and the content providing server. If the server processes the request it might need to access databases and maybe other slow resources to build up the webpage. The resulting page can than be cached on the providing side in a "reverse" proxy cache. All subsequent requests can just be provided from the cache, as long as the page is still fresh.</p>
<h2>Making pages cacheable</h2>
<p>If you maintain a website, or you create web applications, you should be aware of caching. After Stefan's rant, I'm completely convinced about that. If you don't do anything all the requests will always go into the server and over the internet. There are HTML ways to control caching (META-Tags etc) but this just doesn't work, and shouldn't be used (!). So what could we do?</p>
<h3>Expires header</h3>
<p>When sending a page back to the user you are able to set some HTTP headers. And "expires" is one of them.<br />
An example:</p>
<pre class="brush:plain">
Expires: Fri, 11 May 2012 18:19:42 GMT
</pre>
<p>This indicates that the current page is valid until the timestamp. Then it 'Expires'. Easy!</p>
<p>The only problem is generating the timestamp, it can be a bit tricky. Also you'll have to be sure you've set the time correct on your system. Also, the next time you update the page, you have to also update the timestamp!</p>
<h3>Cache-Control headers</h3>
<p>With HTTP 1.1 there is a new class of headers called "Cache-Control". These headers are more powerful than the Expires header.<br />
To enable caching using Cache Control headers you can set:</p>
<pre class="brush:plain">
Cache-Control: max-age=3600, must-revalidate
</pre>
<p>The "max-age" is time in ms that the current page is valid. And by adding "must-revalidate" we tell the cache it should obey our max-age. If you don't want an object to be cached you can use:</p>
<pre class="brush:plain">
Cache-Control: no-cache
</pre>
<h2>Refreshing cached data</h2>
<p>The two methods described above will tell the cache <b>if</b> the content is cacheable. But what happens when the max-age or Expires timestamp expires? There are smarter ways to update the cache instead of getting the latest content from the server.</p>
<h3>Last-Modified</h3>
<p>Websites should always set the response header called "Last-Modified". This is a timestamp of the moment a webpage last changed.</p>
<pre class="brush:plain">
Last-Modified: Fri, 11 May 2012 18:19:42 GMT
</pre>
<p>When a cache has expired (max-age or Expires) and has to get a new version from the server it can set the request header "If-Modified-Since" and include the timestamp.</p>
<pre class="brush:plain">
If-Modified-Since: Fri, 11 May 2012 18:19:42 GMT
</pre>
<p>If the content on the server hasn't been changed it'll reply "304 Not Modified". The cache can now keep the cached version.</p>
<h3>ETag</h3>
<p>With HTTP 1.1 there is also an improved method of doing the "Last-Modified". Instead of using a timestamp (which is error prone), they've introduced the "ETag". This is a tag that is completely customisable. Most of the time it will just be a hash of the content. The server sets the ETag as response header:</p>
<pre class="brush:plain">
ETag: "686897696a7c876b7e"
</pre>
<p>When a cache can no longer use the cached version (due to max-age or Expires) is will ask the server:</p>
<pre class="brush:plain">
If-None-Match: "686897696a7c876b7e"
</pre>
<p>The term "If-None-Match" isn't very clear, but is means "if-etag-changed-since" and works the same way as "If-Modified-Since". When the ETag is the same the server will reply "304 Not Modified", it won't send the content back.</p>
<p>When you are working on a web application you could just add an ETag which is the MD5 of the returning content. If the content is the same, you don't have to send the content over the line. The only drawback to this method is that you still need to generate the entire reply to calculate the MD5 hash to see if the content has changed...! But sometimes you'll know in advance if the content has been changed.</p>
<h2>Improving royvanrijn.com</h2>
<p>I'm using WordPress and I've found the excellent plugin "WP Total Cache".</p>
<p>It will involve a bit of tweaking, because only you can decide which stuff should be cached. But I think it worked out great, press F5 right now and you'll probably be reading this from the browser cache.</p>



    
    <p>
    	<a href="/blog/2012/05/we-are-now-cached/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/04/ludum-dare-23-itty-bitty-botty/">Ludum Dare #23: Itty-bitty botty</a></h1>
    <p class="author">
      <span class="date">Apr 22, 2012 17:17:22</span>
    </p>
    <p><img src="/images/bodyIdle1.png" alt="" title="bodyIdle1" width="80" height="100" class="alignleft size-full wp-image-1172" />The last two days I've been competing in a competition called Ludum Dare.</p>
<p>This is a short, 48 hour, contest. In this time you have to build an entire game based on a theme given at the start of the 48 hours. It is a good exercise is planning, scaling, hacking, imagining and just having fun! I really enjoyed it, and recommend you join LD24 four months from now.</p>
<h3>The concept:</h3>
<p>For this game I decided to stick with Java. To make it playable for as many people I decided to make an Applet. It can easily become a standalone app, or maybe an Android app...!<br />
I loved the old point-and-click games, from Dirty Larry to The Day of the Tentacle, from Monkey Island to Gobli(iiii)ns. So that was settled.</p>
<h3>The big pro:</h3>
<p>Not a lot of physics or game code.</p>
<h3>The big con:</h3>
<p>I'd have to brush off my paint skills because point-and-click adventures are filled with graphics and animation!<br />
One big factor in games is music, and for this contest I took some midi control code I made some years ago. This was turned into a procedurally generated music generator. Every time you play you'll hear something new.</p>
<h3>The result:</h3>
<p>With visitors coming to see our little baby girl on Sunday I decided to end early.</p>
<p>Screenshots:<br />
<img src="/images/screenshot1.png" alt="" title="screenshot1" width="1023" height="670" class="alignright size-full wp-image-1169" /><br />
<img src="/images/screenshot2.png" alt="" title="screenshot2" width="1025" height="669" class="alignright size-full wp-image-1170" /></p>
<p>Here is my result, have fun playing the game: <a href="http://www.royvanrijn.com/ld23/index.html">Itty-bitty botty</a>!</p>



    
    <p>
    	<a href="/blog/2012/04/ludum-dare-23-itty-bitty-botty/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/03/female-coders-lighten-up/">Female coders, lighten up</a></h1>
    <p class="author">
      <span class="date">Mar 22, 2012 15:51:53</span>
    </p>
    <p><img src="/images/female-sign.jpg" alt="" title="female-sign" width="305" height="229" class="alignright size-full wp-image-1138" /></p>
<h4>The Real Katie</h4>
<p>Today I stumbled upon the following blogpost:<br />
<a href="http://therealkatie.net/blog/2012/mar/21/lighten-up/">The Real Katie - Lighten Up</a></p>
<p>Katie talks about the sexist jokes and remarks she regularly gets in the IT/programming world, and she is sick and tired of hearing "Come on, lighten up".</p>
<p>The post is moving and shows how easy it is to offend people, not by a single remark, but by hundreds of similar remarks heard before.</p>
<h4>Not an IT problem</h4>
<p>There is one point I don't agree with though. I don't think it is fair to call this an IT/programmers problem. </p>
<p>Let me explain:</p>
<p>Obviously there are a lot of jerks, assholes and plain rude people around. Most of them are men, some are women. They pick on easy targets, the minorities. Sometimes the minority is a heavy male co-worker, sometimes it is the rare female programmer.</p>
<p>I fully agree, we should call the bullies out more. We all should do something about this problem. Her blogpost has re-opened my eyes again to that problem. But this isn't a IT problem... it is a minority and rude people problem, a global social problem. It happens in <u>all</u> professions. Katie is just unlucky to be the minority in the field of work she loves.</p>
<h4>More women in the IT</h4>
<p>Also, I do agree that we could use more women in the IT world. At a young age we should teach boys and girls that there is no such thing as boy-jobs and girl-jobs, and both should learn the joy of programming! If we do that the problem of women being a minority in the IT world will disappear.</p>
<p><b>BUT</b> that won't solve the global social problem of assholes picking on minorities.<br />
That is something we are <u>all</u> responsible for.</p>
<p>There will always be minorities and there will always be rude people (male or female). This is something we can't change. You <b>can</b> however call them out and disapprove the behavior.</p>



    
    <p>
    	<a href="/blog/2012/03/female-coders-lighten-up/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/03/arthur-fry-day-or-fryday/">Arthur Fry Day (or: Fryday)</a></h1>
    <p class="author">
      <span class="date">Mar 13, 2012 10:03:16</span>
    </p>
    <h2>Scrumboard</h2>
<div class="alignright size-medium">
<a href="http://www.royvanrijn.com/arthur-fry-day/"><img src="/images/arthurfry_photo.jpg" alt="" title="Inventor of the Post-It note, and part time hero." width="150" height="208" /></a><br />
<small>Source: wikipedia.org</small>
</div>
<p>
Our project is doing <a href="http://en.wikipedia.org/wiki/Scrum_(development)">Scrum</a>, and one of the main aspects of Scrum is having everything clearly visible. A great example is the scrumboard, a huge whiteboard filled with Post-It notes.</p>
<p>
Post-It notes are perfect for this; small enough to be easy to handle; sticky enough so you can post them almost everywhere. I truly believe that without the Post-It note, Scrum wouldn't be possible and probably wouldn't even exist!</p>
<h2>The hero</h2>
<p>
This all makes the real hero of the Agile movement: <a href="http://www.royvanrijn.com/arthur-fry-day/">Arthur Fry</a>. After somebody at 3M messed up a batch of glue, Arthur decided to add that glue to a piece of paper, creating the first Post-It notes.</p>
<h2>Join us</h2>
<p>
This invention is much more important than the toilet, or wheel, or penicillin...! Celebrate and make the world aware of this unlikely hero, join us and celebrate <a href="http://www.royvanrijn.com/arthur-fry-day/">Arthur Fry Day</a>, this March 16th!</p>
<p><img src="/images/preparations.png" alt="" title="We've already started our preparations, #arthurfryday" width="538" height="558" class="alignnone size-full wp-image-1125" /><br />
<a href="http://www.royvanrijn.com/arthur-fry-day/"><img src="/images/arthurfryday-300x119.png" alt="" title="#arthurfryday" width="300" height="119" class="alignnone size-full" /></a></p>



    
    <p>
    	<a href="/blog/2012/03/arthur-fry-day-or-fryday/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/03/devoxx-2011-talk-freely-available/">Devoxx 2011: Talk freely available</a></h1>
    <p class="author">
      <span class="date">Mar 8, 2012 14:36:23</span>
    </p>
    <p>Moments ago this tweet caught my eye:<br />
<code><br />
<strong><br />
<a href="https://twitter.com/#!/devoxx/status/177745047092080640">Devoxx 2011</a>: "What Shazam doesn't want you to know!" by <a href="http://twitter.com/royvanrijn">@royvanrijn</a> is now freely available @ <a href="http://parleys.com/d/2869">http://parleys.com/d/2869</a><br />
</strong><br />
</code></p>
<p>That means everybody can now watch my talk without any subscription! If you want to learn how algorithms like Shazam work, be sure to watch this talk. It might be easier to understand than my blog post a year ago.</p>
<p>Without further ado:<br />
<object width="850" height="400"><param name="movie" value="http://www.parleys.com/dist/share/parleysshare.swf" /><param name="allowFullScreen" value="true" /><param name="wmode" value="direct" /><param name="bgcolor" value="#222222" /><param name="flashVars" value="sv=true&amp;pageId=2869" /><embed src="http://www.parleys.com/dist/share/parleysshare.swf" type="application/x-shockwave-flash" flashvars="sv=true&amp;pageId=2869" allowfullscreen="true" bgcolor="#222222" width="850" height="400" /><br />
</object></p>



    
    <p>
    	<a href="/blog/2012/03/devoxx-2011-talk-freely-available/">More...</a>
    </p>
  
    <h1><a href="/blog/2012/02/levenshtein-distance-challenge-causes/">Levenshtein Distance Challenge: Causes</a></h1>
    <p class="author">
      <span class="date">Feb 7, 2012 23:54:54</span>
    </p>
    <p>Today I've been playing around with the <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a>. The Levenshtein distance is a number which measures the 'distance' between two strings. For example, the distance between "test" and "rest" is one.</p>
<h2>The challenge</h2>
<p>A Levenshtein distance of one is the key element in a challenge I've been reading about. I first encountered it on <a href="http://williamedwardscoder.tumblr.com/post/16756548314/causes-levenshtein-distance-challenge">williamedwardscoder</a>'s blog. </p>
<p>The problem description:<br />
<em><br />
Two words are friends if they have a <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a> of 1. That is, you can add, remove, or substitute exactly one letter in word X to create word Y. A word’s social network consists of all of its friends, plus all of their friends, and all of their friends’ friends, and so on. Write a program to tell us how big the social network for the word “causes” is, using this <a href="https://raw.github.com/causes/puzzles/master/word_friends/word.list">word list</a>. Have fun!<br />
</em></p>
<h2>Java solution (8.1 sec)</h2>
<p>After some Googling and tweaking I decided to make an implementation based on the <a href="http://en.wikipedia.org/wiki/Trie">Trie</a> structure. How this helps is excellently described by <a href="http://stevehanov.ca/blog/index.php?id=114">Steve Hanov</a>. I've also had a peek in another Java based Trie implementation by <a href="https://github.com/ximus/Causes-Challenge">Ximus</a>.</p>
<p>I've been able to get the code below run in 8.1 seconds, which is pretty good. But I've read that there are Java implementations running in just 4 seconds...!? Maybe based on  Levenshtein Automata?</p>
<pre class="brush:java">
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.LinkedList;
import java.util.List;

public class FriendlyCauses {

	public static void main(String[] args) throws Exception {
		FriendlyCauses s = new FriendlyCauses();
		s.find();
	}

	TrieNode[] root = new TrieNode[26];

	public void find() throws Exception {
		long timeBefore = System.currentTimeMillis();
		File wordList = new File("word.list");
		BufferedReader reader = new BufferedReader(new FileReader(wordList));

		int wordsAdded = buildTrie(reader);
		System.out.println("Done building the Trie; " + wordsAdded + " words added.");
		findFriends("causes");
		System.out.println("Amount of friends found: " + countWords(root));
		System.out.println("Total time: " + (System.currentTimeMillis() - timeBefore) + "ms");
	}

	/**
	 * This method builds the complete trie with all the words.
	 */
	public int buildTrie(BufferedReader reader) throws IOException {
		int wordsAdded = 0;
		while (reader.ready()) {
			String next = reader.readLine();
			int start = next.charAt(0) - 97;
			TrieNode current = root[start];
			if (current == null) {
				root[start] = current = new TrieNode();
			}
			for (int i = 1; i &lt; next.length(); i++) {
				int nextIndex = next.charAt(i) - 97;
				if (current.children == null) {
					current.children = new TrieNode[26];
				}
				if (current.children[nextIndex] == null) {
					TrieNode deeper = new TrieNode();
					current.children[nextIndex] = deeper;
				}
				current = current.children[nextIndex];
			}
			current.word = next;
			wordsAdded++;
		}
		return wordsAdded;
	}

	private class TrieNode {
		// The children:
		TrieNode[] children;
		// If this node is the end of a word, store the word here:
		String word;
		// This boolean indicates that the current node is a friend.
		boolean isFriend;
	}

	// Temporary buffer of friends to investigate further:
	public List&lt;String&gt; friendsToFind = new LinkedList&lt;String&gt;();

	public void findFriends(String word) {
		friendsToFind.add(word);

		while (friendsToFind.size() &gt; 0) {
			String friend = friendsToFind.remove(0);

			int size = friend.length();

			byte[] currentRow = new byte[size + 1];
			for (int i = 0; i &lt;= size; i++) {
				currentRow[i] = (byte) i;
			}

			// Search the Trie for the given friend:
			for (int i = 0; i &lt; 26; i++) {
				if (root[i] != null) {
					searchTrieForWord(root[i], i + 97, friend, currentRow);
				}
			}
		}
	}

	/**
	 * Walk the complete Trie again finding all the friends
	 */
	private int countWords(TrieNode[] ts) {
		int amount = 0;
		for (int i = 0; i &lt; 26; i++) {
			TrieNode t = ts[i];
			if (t != null) {
				if (t.isFriend) {
					amount++;
					// Print/add t.word
				}
				if (t.children != null) {
					amount += countWords(t.children);
				}
			}
		}
		return amount;
	}

	/**
	 * Recursively walk the Trie calculating the Levenshtein distance to the
	 * given word. When a friend is found, mark it and add it to a list. The new
	 * friend needs to be processed further on.
	 */
	private void searchTrieForWord(TrieNode node, int letter, String word, byte[] previousRow) {

		int size = previousRow.length;
		byte[] currentRow = new byte[size];
		currentRow[0] = (byte) (previousRow[0] + 1);

		int minElement = currentRow[0];

		for (int i = 0; i &lt; size - 1; i++) {
			int newCurrentRowValue = currentRow[i] + 1;
			newCurrentRowValue = Math.min(newCurrentRowValue,
					previousRow[i + 1] + 1);

			if (word.charAt(i) == letter) {
				newCurrentRowValue = Math.min(newCurrentRowValue,
						previousRow[i]);
			} else {
				newCurrentRowValue = Math.min(newCurrentRowValue,
						previousRow[i] + 1);
			}
			if (newCurrentRowValue &lt; minElement) {
				minElement = newCurrentRowValue;
			}
			currentRow[i + 1] = (byte) newCurrentRowValue;
		}

		// If the Levenshtein distance is 1 and the node at current depth is a
		// word (and not yet friend):
		if (currentRow[size - 1] == 1 && node.word != null && !node.isFriend) {
			node.isFriend = true;
			friendsToFind.add(node.word);
		}

		if (minElement &lt;= 1 && node.children != null) {
			for (int i = 0; i &lt; node.children.length; i++) {
				TrieNode child = node.children[i];
				if (child != null) {
					searchTrieForWord(child, i + 97, word, currentRow);
				}
			}
		}
	}
}

</pre>



    
    <p>
    	<a href="/blog/2012/02/levenshtein-distance-challenge-causes/">More...</a>
    </p>
  
    <h1><a href="/blog/2011/12/orchard-planting-greatest-common-divisor/">Orchard Planting: Greatest Common Divisor</a></h1>
    <p class="author">
      <span class="date">Dec 30, 2011 13:21:59</span>
    </p>
    <p>The <a href="http://infinitesearchspace.dyndns.org/orchardplanting">Orchard Planting</a> contest from infinite search space is over. So it is time for a quick write-up.</p>
<p>The rules are simple, on a grid of integers, place N points on the grid to get as much 4 points on a line and never more then 4 points on a line.</p>
<p>My big break-through was when I figured out a way to improve the calculation speed of a solution, and make it possible to extend existing solutions (going back and forwards). To do this I used a unique vector (greatest common divisor vector) which is the same for all point on the same line:</p>
<pre class="brush:java">
//Calculate unique vector(hash):
doubleIntVector(int x1, int y1, int x2, int y2) {
    int stepx = x2-x1;
    int stepy = y2-y1;
    int gcd = gcd(abs(x2-x1), abs(y2-y1));
    if(gcd &gt; 0) {
        stepx /= gcd;
        stepy /= gcd;
    }

    if(stepx &lt; 0) {
        return (10000 * -stepx) + -stepy;
    } else if(stepx == 0 && stepy &lt; 0){
        return -stepy; //this looks curious... but fixed a bug
    } else {
        return (10000 * stepx) + stepy;
    }
}
</pre>
<p>Now we can evaluate the points:</p>
<pre class="brush:java">
for point A in points 0....N {
    create list vectorsA 
    for point B in points A+1....N {
         vectorA.add( doubleIntVector(A.x, A.y, B.x, B.y) )
    }
    sort(vectorsA)
    //if vectorsA has three similair vectors you have 4 points on a line! 
    //(3> = invalid and 2 = candidate for extending!)
}

</pre>
<p>If a point has three vectors that are the same, we have a line with four points! This can be checked easily if you sort the vectors and go through them once.</p>
<p>Also adding and removing points becomes very easy. A lot of the GCD calculations can be cached. To remove a point, just remove the vectors it made. And to add a point, calculate all the new vectors. So in the end it basically all boils down to a lot of GCD calculations and sorting.</p>
<p>Was this the fastest way to calculate solutions in this contest? I don't know, but I was really pleased when I figured it out. With a better algorithm for picking possible numbers (instead of hill-climbing) and some more processor power I bet I could have ended a bit higher up the hill.</p>
<p>Also: Keep an eye out for the next contest, it is going to be an interesting one! January the 13th.</p>



    
    <p>
    	<a href="/blog/2011/12/orchard-planting-greatest-common-divisor/">More...</a>
    </p>
  
    <h1><a href="/blog/2011/12/parleys-devoxx-talk-published/">Parleys: Devoxx talk published</a></h1>
    <p class="author">
      <span class="date">Dec 20, 2011 20:50:50</span>
    </p>
    <p>The guys at Devoxx/Parleys have already processed all the talks and post-processed them. So my talk it now available at Parleys.com.<br />
There is one drawback though, the talk is currently for subscribers only. If you don't have one you can only watch the first two (very nervous) minutes.</p>
<p>If you've attended Devoxx you will get a free subscription in the email.</p>
<p>(p.s. The intro movie for all the Devoxx '11 talks is made by me as well!)</p>
<p><object width="850" height="400"><param name="movie" value="http://www.parleys.com/dist/share/parleysshare.swf" /><param name="allowFullScreen" value="true" /><param name="wmode" value="direct" /><param name="bgcolor" value="#222222" /><param name="flashVars" value="sv=true&amp;pageId=2869" /><embed src="http://www.parleys.com/dist/share/parleysshare.swf" type="application/x-shockwave-flash" flashvars="sv=true&amp;pageId=2869" allowfullscreen="true" bgcolor="#222222" width="850" height="400" /><br />
</object></p>



    
    <p>
    	<a href="/blog/2011/12/parleys-devoxx-talk-published/">More...</a>
    </p>
  

  <!-- Pagination links -->
  <div class="pagination">
    
      <a href="/page/5" class="previous">Previous</a>
    
    <span class="page_number ">Page: 6 of 13</span>
    
      <a href="/page/7" class="next">Next</a>
    
  </div>
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <i class="svg-icon linkedin"></i>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <i class="svg-icon stackoverflow"></i>
        </a>

        <a href="https://github.com/royvanrijn">
          <i class="svg-icon github"></i>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <i class="svg-icon twitter"></i>
        </a>
          
        <a href="/feed/index.xml">
          <i class="svg-icon rss"></i>
        </a>
    
    </div>

  </div>
  
  <script> <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-2', 'auto');
  ga('send', 'pageview');

  </script>

</footer>


  </body>

</html>
