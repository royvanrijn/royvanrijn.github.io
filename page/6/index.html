<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  
  <meta name="keywords" content="royvanrijn,programming,java,blog,devoxx,conference,speaker,technology,science,math,azspcs,tips,tricks" />
  
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://royvanrijn.com/page/6/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="https://royvanrijn.com/feed/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@royvanrijn" />
  <meta name="twitter:title" content="royvanrijn" />
  <meta name="twitter:description" content="Java, algorithms, math, science and more!" />
  
  <meta name="twitter:image" content="http://www.royvanrijn.com/thumbnails/default.jpg"/>
  

<script>
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-1', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" width="990" height="307"/>
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <hr/>
  <!-- This loops through the paginated posts -->
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/09/episode-1/" title="Episode #1">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Episode #1" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-09-01T17:30:35+02:00" class="date" />
          <span itemprop="datePublished" content="2013-09-01T17:30:35+02:00" class="date">
            Sep 1, 2013 17:30:35
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/09/episode-1/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/09/episode-1/">Episode #1</a></h1>

        <span itemprop="articleBody">
          <p>Lately I’ve been having a lot of blog ideas, but I never take the time to write it all down in a blogpost.<br />
That’s why I’m now going to try to combine thing I love:</p>

<ul>
  <li>Programming</li>
  <li>Technology</li>
  <li>Filming/video editing</li>
</ul>

<p>Here is the first episode of Roy on programming:</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="https://www.youtube.com/embed/C6wU-3BPK_4"></iframe>

<p>Item 1: Oculus Rift<br />
- <a href="http://www.oculusvr.com/">http://www.oculusvr.com/</a><br />
- <a href="http://www.reddit.com/r/oculus/">http://www.reddit.com/r/oculus/</a></p>

<p>Item 2: Rich Hickey<br />
- <a href="http://www.infoq.com/presentations/Simple-Made-Easy">http://www.infoq.com/presentations/Simple-Made-Easy</a><br />
- <a href="http://www.infoq.com/presentations/Design-Composition-Performance">http://www.infoq.com/presentations/Design-Composition-Performance</a></p>

<p>Item 3: Separation of Concerns<br />
- <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">http://en.wikipedia.org/wiki/Separation_of_concerns</a></p>

<p>Music by:<br />
- Nasty Goreng: <a href="https://soundcloud.com/nastygoreng">https://soundcloud.com/nastygoreng</a></p>

<p>Please let me know what you think about it.</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/09/episode-1/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/" title="No more DSL for acceptance/integration testing">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="No more DSL for acceptance/integration testing" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-07-25T22:33:38+02:00" class="date" />
          <span itemprop="datePublished" content="2013-07-25T22:33:38+02:00" class="date">
            Jul 25, 2013 22:33:38
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/">No more DSL for acceptance/integration testing</a></h1>

        <span itemprop="articleBody">
          <p>Everybody seems to be using <a href="http://fitnesse.org/">Fitnesse</a> or <a href="http://cukes.info/">Cucumber</a> for integration testing these days. The main idea is that users (testers/business analists and programmers) can write what your program should do in plain text. The programmer then creates a small layer of code which gets interpreted and executes your actual program to see if the specified requirements are met.</p>

<h1 id="fitnesse-example">Fitnesse example</h1>

<p>For example a (hypothetical) piece of code in Fitnesse as it could have been used in the Port of Rotterdam:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">!3 Anchorage tests

!|given a ship                                |
|Id  |Name       |Category|CallSign|Shipnumber|
|1001|Maersk Bali|TANKER  |D6DZ8   |7420211   |

|script                                                              |
|When a ship called|MAERSK BALI|reaches the port                     |
|And it reports anchor down                                          |
|ensure            |the ship is shown in the list of anchored vessels|
|check             |the list of anchored vessels now has size|1      |</code></pre></figure>

<p>This is something the testers and product owners can read and understand. Behind this layer of text Fitnesse will try to execute pieces of code. This is left as an exercise for the programmers to complete. They’ll need to write something like:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nl">GivenAShip:</span>
<span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setCategory</span><span class="o">(</span><span class="n">String</span> <span class="n">category</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setCallSign</span><span class="o">(</span><span class="n">String</span> <span class="n">callSign</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">setShipnumber</span><span class="o">(</span><span class="n">String</span> <span class="n">shipnumber</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">execute</span><span class="o">();</span> <span class="c1">//Stores the ship in the database
</span>

<span class="nl">AnchorageScenarios:</span>
<span class="kt">void</span> <span class="nf">whenAShipCalledReachedThePort</span><span class="o">(</span><span class="n">String</span> <span class="n">shipName</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">andItReportsAnchorDown</span><span class="o">();</span>
<span class="kt">boolean</span> <span class="nf">theShipIsShownInTheListOfAnchoredVessels</span><span class="o">();</span>
<span class="kt">int</span> <span class="nf">theListOfAnchoredVesselsNowHasSize</span><span class="o">();</span></code></pre></figure>

<p>This is where the problems start, there is a lot of room for typos. Which will send you all over the codebase constantly translating Fitnesse text like “<em>and it reports anchor down</em>” to “<em>andItReportsAnchorDown</em>” during your searches.</p>

<p>Also people always say, because it is ‘plain text’ the testers, analists and product owners can instantly start writing tests. But this just isn’t true… It <strong>isn’t</strong> just writing down tests/requirements, it is programming with a DSL. Normal human text isn’t good enough, it still needs some DSL structure. They’ll have to learn to <strong>program</strong> in the Fitnesse DSL language. In almost all project I’ve worked on, it is the programmers writing and maintaining tests, people from the business stay far away from Fitnesse.</p>

<p>If you want to refactor the scenarios/fixtures in Fitnesse you’re in for a treat. Everything is bound by name only, and renaming code for example won’t rename the DSL! Using Fitnesse ‘sounds’ very agile, but it doesn’t really make the code agile at all. Most test code I’ve worked on is <strong>fragile</strong>, very <strong>ridged</strong> and <strong>not easy to refactor</strong>. Why not take advantage of that IDE and statically typed language if the programmers are writing and maintaining the tests?</p>

<h1 id="using-code-instead">Using code instead</h1>

<p>Today we had a “ShipIt”-day (nautical-pun intended) at work, where we’re free to work on any project for 24 hours straight and we present our findings afterwards. This boosts the creative ideas and in the long run efficiency and innovation.</p>

<p>After using Fitnesse now for three years we’ve become used to it, and don’t ever <strong>question its usage</strong>. Although we feel the <strong>pain</strong> of the rigid/fragile test code on a daily basis. I decided to start rethinking the way we do acceptance tests.</p>

<p>My goals was to make our tests:</p>

<ul>
  <li>Simpler to write</li>
  <li>Easier to refactor</li>
  <li>Maintain the readability</li>
  <li>Easier to reuse</li>
  <li>Faster! (no DSL parsing)</li>
</ul>

<p>This is what the initial design now looks like. The example used above would become the following:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Jitness</span>        <span class="c1">// Annotation that indicates this is a test class
</span>
<span class="nd">@SuiteSetUp</span><span class="o">({</span>   <span class="c1">// This is called once for all the methods in the class below
</span>
	<span class="nd">@Execute</span><span class="o">(</span>
			<span class="n">type</span> <span class="o">=</span> <span class="n">ShipExecutor</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
			<span class="n">data</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"1001"</span><span class="o">,</span> <span class="s">"Maersk Bali"</span><span class="o">,</span> <span class="s">"TANKER"</span><span class="o">,</span> <span class="s">"D6DZ8"</span><span class="o">,</span> <span class="s">"7420211"</span> <span class="o">})</span>
	<span class="o">})</span>
<span class="o">})</span>
<span class="nd">@SetUp</span><span class="o">({</span>
	       <span class="c1">// @Execute annotations here will be called before each of the methods below
</span>
	       <span class="c1">// The @SetUp annotation can also be placed on a single method in the test class
</span>
<span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnchorageTests</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givingCommandAnchorDownCausesShipToAppearInList</span><span class="o">()</span> <span class="o">{</span>

		<span class="kd">final</span> <span class="n">AnchorageScenarios</span> <span class="n">scenarios</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnchorageScenarios</span><span class="o">();</span>

		<span class="n">scenarios</span><span class="o">.</span><span class="na">whenAShipReachedThePortCalled</span><span class="o">(</span><span class="s">"Maersk Bali"</span><span class="o">);</span>
		<span class="n">scenarios</span><span class="o">.</span><span class="na">andItReportsAnchorDown</span><span class="o">();</span>
		<span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">scenarios</span><span class="o">.</span><span class="na">theShipIsShownInTheListOfAnchoredVessels</span><span class="o">());</span>
		<span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">scenarios</span><span class="o">.</span><span class="na">theListOfAnchoredVesselsNowHasSize</span><span class="o">());</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">anotherTestHere</span><span class="o">()</span> <span class="o">{</span>
		<span class="o">...</span> <span class="n">etc</span> <span class="o">...</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Using Jitness (<em>working title</em>) the scenarios will be implemented in exactly the same way we’ve already been doing. This makes it easier to transition from Fitnesse to this code.<br />
The only bit of ‘magic’ is the execute annotation. You can write executors like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShipExecutor</span> <span class="kd">implements</span> <span class="n">Executor</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="n">ShipRepository</span> <span class="n">repository</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ShipRepository</span><span class="o">();</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="n">repository</span><span class="o">.</span><span class="na">store</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">after</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="n">repository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
	<span class="o">}</span>

        <span class="kd">private</span> <span class="n">Ship</span> <span class="nf">parse</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">ShipBuilder</span><span class="o">()</span>
                         <span class="o">.</span><span class="na">id</span><span class="o">(</span><span class="n">Long</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">name</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">category</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">2</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">callSign</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">3</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">shipNumber</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">4</span><span class="o">])</span>
                         <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>A (more elaborate) sample of the output it generates, with failure:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Results: 
OK	BunkeringTests.SuiteSetUp
OK	BunkeringTests.addTypeOfFuelToBunker
OK	BunkeringTests.changeTypeOfFuelToBunker
OK	BunkeringTests.removeTypeOfFuelToBunker
OK	BunkeringTests.bunkeringOnIncomingMovement
OK	BunkeringTests.bunkeringOnOutgoingMovement
OK	BunkeringTests.loadBunkeringForOpenVesselVisit
NOK	BunkeringTests.retrieveListOfBunkerBarges
expected:&lt;1&gt; but was:&lt;2&gt;
OK	BunkeringTests.SuiteTearDown
Took: 128 ms</code></pre></figure>

<p>The main advantages of using this are obviously leveraging the full potential of your IDE, including renaming/refactoring. Changing methods and classes in your production code will automatically show up as changes in Jitness. And everything is easy to refactor because it is just code! This will eventually lead to much more <strong>agile code</strong>, <strong>simpler</strong> and <strong>easier to refactor</strong>. Obviously there is one main drawback, it is harder for testers to read and write. But if they pair up with a programmer this should be no problem I think. I’d rather have the testers learn a bit of coding than the programmers learn a text DSL which leads to fragile tests.</p>

<p>Another big advantage is execution time, using compiled code is always faster than parsing plain text or HTML at runtime. Also this code is compiled during the build, so there is no need for additional classpath (Maven) plugins. I’m really fond of the idea to use code to describe the tests, and I’m very curious how my colleagues are going to rate this tomorrow when we demo the “ShipIt” ideas. With a couple of more days work this can be fully tested and made robust enough to start using it and maybe even open source it.</p>

<p>What are your thoughts? Any ideas about improving the API? Should we just keep using Fitnesse/Cucumber or any other alternative DSL instead?</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/07/no-more-dsl-for-acceptanceintegration-testing/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/06/ethics-for-programmers/" title="Ethics for programmers">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Ethics for programmers" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-06-21T16:39:54+02:00" class="date" />
          <span itemprop="datePublished" content="2013-06-21T16:39:54+02:00" class="date">
            Jun 21, 2013 16:39:54
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/06/ethics-for-programmers/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/06/ethics-for-programmers/">Ethics for programmers</a></h1>

        <span itemprop="articleBody">
          <p>Programmers need more ethics.<br />
And I’m not talking about ‘craftsmanship’ ethics such as <em>“always make clean code”</em>, <em>“be agile”</em> or <em>“coffee should be consumed pure and black”</em>.</p>

<p>No, I’m talking about real ethics:</p>

<blockquote>
  <p><strong>Ethics</strong>, also known as <strong>moral philosophy</strong>, is a branch of philosophy that involves systematizing, defending and recommending concepts of <strong>right</strong> and <strong>wrong</strong> conduct.</p>

  <p>Source: <a href="http://en.wikipedia.org/wiki/Ethics">http://en.wikipedia.org/wiki/Ethics</a></p>
</blockquote>

<h1 id="prism">PRISM</h1>

<p>Almost all the programmers I know are very active online, and all of them are condemning the US government project called <a href="http://en.wikipedia.org/wiki/PRISM_%28surveillance_program%29">PRISM</a>. It is a huge electronic surveillance program, recently revealed by <a href="http://en.wikipedia.org/wiki/Edward_Snowden">Edward Snowden</a>. This program collects (all) data from a huge list of international websites such as Google, Facebook, AOL, Apple, Yahoo, Microsoft, and more.</p>

<p>One can only imagine the magnitude of this project, it handles a humongous amount of data and it would have to filter and match the data. It will have a lot of (secret) API’s and other methods of collecting the data. And this is all created by…. <strong>us programmers</strong>!</p>

<h1 id="just-say-no">Just say no…</h1>

<p>Why would somebody help the government in making these applications? I <em>ethically</em> wouldn’t think about programming this. And I’m serious about it, I’ve already turned down two projects in my young career because of an ethical standpoint:</p>

<ol>
  <li>Helping to tweak an algorithm for the Dutch government for missile guidance (it would have been a cool project!)</li>
  <li>A project for a telecom company doing deep packet inspection, enabling them to ask subscription costs for (free) mobile apps<br />
(such as WhatsApp)</li>
</ol>

<p>Both these projects might influence my own, or other people’s life in a negative way, and I refuse to help people do that. It’s like being an arms dealer or gun manufacturer condemning the use of weapons. It would feel like selling a crowbar to a thief, making a bit of money, while actually enabling them to break in.</p>

<h1 id="ethics">Ethics!</h1>

<p>Maybe programmers should have an oath, something like the <a href="http://en.wikipedia.org/wiki/Hippocratic_Oath">Hippocratic Oath</a> or the <a href="http://en.wikipedia.org/wiki/Physician%27s_Oath">Physician’s Oath</a>. Here are some of the rules I follow:</p>

<ul>
  <li>I won’t write code which helps/enables people to harm others</li>
  <li>I won’t write code which will limit other people’s freedom</li>
  <li>I won’t work for companies using software patents to bully/attack other people and companies</li>
  <li>…</li>
</ul>

<p>If you have any good additions to the list, please drop a comment!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/06/ethics-for-programmers/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/06/devoxx4kids-in-the-netherlands/" title="Why are you not organizing a Devoxx4Kids?">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Why are you not organizing a Devoxx4Kids?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-06-10T15:39:51+02:00" class="date" />
          <span itemprop="datePublished" content="2013-06-10T15:39:51+02:00" class="date">
            Jun 10, 2013 15:39:51
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/06/devoxx4kids-in-the-netherlands/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/06/devoxx4kids-in-the-netherlands/">Why are you not organizing a Devoxx4Kids?</a></h1>

        <span itemprop="articleBody">
          <p>Last year I attended the first Devoxx4Kids in Gent (Belgium). It is a day where programmers introduce children aged 10 to 14 to programming. That day we used Scratch (a fun online programming framework), Lego Mindstorms and a Mars rover (with emulation). And it was a blast!</p>

<p>Once I returned and edited <a href="https://vimeo.com/51393678">this</a> video and showed it to my colleagues we quickly came to the conclusion: We need to organize a Dutch version!</p>

<h1 id="organizing">Organizing</h1>

<p>Edwin (a <a href="http://www.jpoint.nl">JPoint</a> colleague) and I tried a couple of contacts and found a willing foe in the form of the <a href="http://www.uva.nl/en/home">University of Amsterdam</a>. They saw the potential and were kind enough to offer us rooms, laptops, Lego Mindstorms and a completely organized lunch! We in turn hired two students to assist with the sessions and took care of subscription, marketing and the technical know-how. It doesn’t take a lot of organizational skills to organize a Devoxx4Kids session.</p>

<h1 id="devoxx4kids-nl">Devoxx4Kids NL</h1>

<p>Last saturday was the moment of truth, in the morning kids and parents started to arrive at the university. We did a quick introduction, flew around with (off the shelf) quadcopter to start off with the wow-factor and then we went into the sessions. In Belgium all the parents left the kids, but this time most parents accompanied the children into the session rooms. In retrospect this wasn’t very good and next time we should banish parents from the sessions. The sessions we organized:</p>

<ul>
  <li><a href="http://scratch.mit.edu/about/">Scratch</a></li>
  <li><a href="http://mindstorms.lego.com/">Lego Mindstorms</a></li>
  <li><a href="http://www.arduino.cc//">Arduino</a> (my own session)</li>
</ul>

<p>The kids were split up into three groups and rotated over all the sessions. Every session was 90 minutes, in retrospect this is a bit long. Most kids got tired and a bit bored after about 45 to 60 minutes. The last track of the day the kids were a lot more distracted. For future Devoxx4Kids events I’d rather do short fun 45 minute sessions instead of complete in depth 90 minute sessions.</p>

<p>Kids learn quickly… even faster than adults! I tried my Arduino session on a couple of adults and they took about 75 minutes to complete all the tasks. The kids did it in record time, we had to improvise and set them a new challenge on the fly. They first made a blinking LED, then hooked up a piezo buzzer to play some music, then they created a ‘musical instrument’ with a photoresistor and the piezo buzzer. Finally (improvised on-the-fly) we made them create a traffic light with three colored LEDs! The quick learning was also noticed in the other sessions.</p>

<p>Our Devoxx4Kids was completely sold out in just 2 hours, so there is a lot of demand for events involving kids and programming. We are going to brainstorm this Wednesday on how we can do more on this front. Keep organizing Devoxx4Kids for 40 kids at the time? Or are there other options? How can we make it pay for itself instead of being fully voluntary…? All ideas are welcome, leave a comment/tweet/email!</p>

<h1 id="video-impression">Video impression</h1>

<p>Are you not yet convinced you should organize a Devoxx4Kids in your neighbourhood/country? Just watch the video I made during our event:</p>
<iframe type="text/html" src="https://player.vimeo.com/video/67959779" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>p.s. Having pictures and video help to tell the story. <a href="https://vimeo.com/51393678">This</a> video from Devoxx4Kids 2012 in Belgium helped us to get the University of Amsterdam involved!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/06/devoxx4kids-in-the-netherlands/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/05/teaching-programming-apprentices/" title="Teaching; Programming apprentices">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Teaching; Programming apprentices" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-05-21T14:13:45+02:00" class="date" />
          <span itemprop="datePublished" content="2013-05-21T14:13:45+02:00" class="date">
            May 21, 2013 14:13:45
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/teaching-programming-apprentices/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/teaching-programming-apprentices/">Teaching; Programming apprentices</a></h1>

        <span itemprop="articleBody">
          <p>We have a huge problem.</p>

<h1 id="the-knowledge-gap">The knowledge gap</h1>

<p>I’ve been a professional programmer now for over a decade, and during this time I’ve met a LOT of excellent programmers. Most of them are partially autodidactic and learned the business side of programming in school. But non of these guru’s/experts use their skills to teach the next generations. Sure, they attend programming conferences, give talks, join user groups etc. But all the other attendees are already good programmers! Companies usually send their brightest programmers to these conferences, not the beginning employees. This means there is already a gap in knowledge and it is increasing. The smart are getting smarter, and nobody is really helping the beginners…</p>

<p><img src="/images/teacher-300x300.jpg" alt="Teacher cleaning chalkboard with duster" class="alignright" /></p>

<h1 id="teachers-salary">Teachers salary</h1>

<p>During my time in college I wasn’t very happy with the programming teachers. They had some experience with the business side, they teached us about UML, gantt charts, and (then still hot) waterfall project planning. When it came to real programming, problem solving, algorithms, best practices… they didn’t really teach us much.<br />
Most of the time we had more programming experience and skill than the teachers.</p>

<p>Although I haven’t been in college for a couple of years, except two guest appearances at the University of Amsterdam, I don’t think much has changed. The whole problem is the status and rewards of being a teacher. The average salary of a college teacher (here in the Netherlands) is about half, maybe two thirds of the average professional programmers salary. No wonder why most average or better programmers don’t become teachers! Only the programmers with least experience and skill, or teachers which later on learned programming end up becoming programming teachers.</p>

<h1 id="mentoringapprenticeship">Mentoring/apprenticeship</h1>

<p>In the ancient Greece and Roman times teachers were important professions. Especially the most experienced craftsmen, they did not only master their craft, but earned most money by passing their skills as master/mentor to their protégés. This doesn’t happen anymore, the big names in programming now don’t have apprentices to pass on their knowledge. In the best case they write books, which will take years before the school teachers have read them and adopt the ideas.</p>

<h1 id="devoxx4kids">Devoxx4Kids?</h1>

<p>I’ve already mentioned <a href="http://www.devoxx.com/display/4KIDS/Home">Devoxx4Kids</a> in <a href="/blog/2012/11/devoxx4kids/">previous</a> blogposts. Although this is a great initiative (which I fully support, we’re holding our own version in the Netherlands!). It helps getting kids excited in IT/programming, but it won’t help getting the level of education to a higher level.</p>

<h1 id="highest-status">Highest status</h1>

<p>Being a teacher/mentor should have the highest social status in our modern world, it should be the highest paid profession and all the guru’s/experts should want to become teachers. But it isn’t. It is poorly paid and absolutely not the sought after job. How can we change this?</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/teaching-programming-apprentices/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/05/agile-epic-manifesto/" title="Agile: Epic Manifesto">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Agile: Epic Manifesto" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-05-06T21:13:23+02:00" class="date" />
          <span itemprop="datePublished" content="2013-05-06T21:13:23+02:00" class="date">
            May 6, 2013 21:13:23
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/agile-epic-manifesto/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/agile-epic-manifesto/">Agile: Epic Manifesto</a></h1>

        <span itemprop="articleBody">
          <p> </p>

<p>At work we’ve had a lot of discussion about epics lately. We seem to have forgotten what they are and how we learned to deal with epics. It became a ‘theme’ or just a big pile of stories which sounded like they belong together. But epics are much much more.</p>

<p>An epic is a goal, and just one goal only. All the stories in the epic should contribute to that epic! Also the epics goal should be a business goal, never a technical goal. The epic should describe a <a href="http://en.wikipedia.org/wiki/SMART_criteria">SMART</a> described measurable goal without hinting towards a (technical) solution.</p>

<p> </p>

<h1 id="epic-manifesto">Epic manifesto</h1>

<p> </p>

<p>In our project we tend to forget what epics are for and <strong>why</strong> they are so important after some time.<br />
To remind everybody we decided to write down a manifesto for the epic:</p>

<ol>
  <li>An epic has just <em>one</em> goal, not more and not less.</li>
  <li>An epic is always measurable, thou should always ask “why” until the business value is clear.</li>
  <li>An epic has a fixed goal, new insights will lead to new epics.</li>
  <li>An epic should have a solution conceived with and verified by the stakeholders, users, product owner and the team.</li>
  <li>An epic contains only stories that help to achieve the goal.</li>
  <li>An epic is ‘done’ when the goal is achieved.</li>
  <li>An epic is only estimated in relative complexity, never in units of time.</li>
  <li>An epic is always in the correct order on the backlog (by the product owner).</li>
  <li>An epic is realized by the team with the minimal viable solution.</li>
  <li>Does your epic break one of the rules above? It is an epic failure!</li>
</ol>

<p>This is going on several walls in our building just to remind us how important correct epics are. If the initial goal is wrong, all the stories are wrong as well. The epic is the base of all the solutions you’ll be creating and must be founded properly.</p>

<p>Any thoughts on this subject, don’t hesitate to reply. Agile projects get better by sharing best practices and trying to improve!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/agile-epic-manifesto/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/05/conference-videographer/" title="Conference videographer">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Conference videographer" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-05-06T20:45:35+02:00" class="date" />
          <span itemprop="datePublished" content="2013-05-06T20:45:35+02:00" class="date">
            May 6, 2013 20:45:35
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/conference-videographer/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/05/conference-videographer/">Conference videographer</a></h1>

        <span itemprop="articleBody">
          <p>A couple of years ago, when our family was planning a trip to South Africa, I bought a nice DSLR. We had friends with excellent cameras, huge lenses and wild life photography experience. So instead of trying to compete with them I decided to buy a camera suited for filming. It was the rise of filming-DSLRs, and even television shows were adapting DSLRs for filming. I settled on a Canon 550D also known as Rebel T2i.</p>

<p>Just before I left for South Africa I decided to take the camera to the <a href="http://www.devoxx.com/">Devoxx</a> 2011 conference. I didn’t even have a tripod at that time! After shooting some quick footage I decided to edit everything to make a nice movie and share it with the organiser. He liked it so much he placed it on the main website for a while. This is what I made:</p>

<iframe type="text/html" src="https://player.vimeo.com/video/32170355" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx-2012">Devoxx 2012</h1>

<p>The following year Stephan asked me to be the official videographer for Devoxx 2012! So I went back and made another video, it seems like I’m turning from regular visitor/developer to videographer. I took some more time to analyse the conference to include the main sponsors, show every aspect of the conference and to get across the Devoxx atmosphere (including the James Bond theme, we all watched SkyFall during the conference!):</p>

<iframe type="text/html" src="https://player.vimeo.com/video/53695846" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx4kids-2012">Devoxx4Kids 2012</h1>

<p>The best time I had as videographer was during Devoxx4Kids. It is a separate event first hosted in 2012. The kids were having a great time and that is clearly visible in the video. Kids aren’t shy at all and much easier to approach then adults. That is why I did some quick interviews and I love the result, I might do that in the future for other conferences as well:</p>

<iframe type="text/html" src="https://player.vimeo.com/video/51393678" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="devoxx-uk-2013">Devoxx UK 2013</h1>

<p>The latest conference I filmed was Devoxx UK. For the first time the Devoxx conference has crossed the big blue sea to go to the United Kingdom. I’ve tried to make the resulting video look a bit more professional although I’m still just a Java developer with a hobby:</p>

<iframe type="text/html" src="https://player.vimeo.com/video/62905094" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h1 id="the-future">The future…</h1>

<p>The last three years I’ve filmed at three weddings, four conferences and edited together our vacations to South Africa, Norway and some trips into the Alps (wintersport). As an amateur videographer (with a growing list of references) there still is a lot to learn, but I’m really enjoying the process! Any tips/hints/tricks are absolutely welcome, and I’m open for invitations!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/05/conference-videographer/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/" title="Test Swing applications in Fitnesse (Nonkey)">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Test Swing applications in Fitnesse (Nonkey)" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2013-02-08T11:35:28+01:00" class="date" />
          <span itemprop="datePublished" content="2013-02-08T11:35:28+01:00" class="date">
            Feb 8, 2013 11:35:28
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/">Test Swing applications in Fitnesse (Nonkey)</a></h1>

        <span itemprop="articleBody">
          <h1 id="fitnesse">Fitnesse</h1>

<p><a href="http://fitnesse.org/">Fitnesse</a> is a very popular test framework, used in a lot of projects. Using a wiki you describe the tests as plain text, which get translated into ‘fixtures’, code that is called that, in turn, can call your application. An example of a fixture we use:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">|when the user logs in with username|roy               |and password   |test123   |
|and asks for the account details                                                 |
|ensure                             |displayed fullname|Roy van Rijn              |
|ensure                             |websites contains |http://www.royvanrijn.com/|
|ensure                             |websites contains |http://www.redcode.nl/    |</code></pre></figure>

<p>The corresponding Java code could be something like:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">Credentials</span> <span class="n">credentials</span><span class="o">;</span>
<span class="kd">private</span> <span class="n">AccountDetails</span> <span class="n">accountDetails</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">whenTheUserLogsInWithUsernameAndPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Credentials</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">andAsksFotTheAccountDetails</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">accountDetails</span> <span class="o">=</span> <span class="n">mySystem</span><span class="o">.</span><span class="na">getAccountDetails</span><span class="o">(</span><span class="n">credentials</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">displayedFullname</span><span class="o">(</span><span class="n">String</span> <span class="n">fullname</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">fullname</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">accountDetails</span><span class="o">.</span><span class="na">getFullename</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">websitesContains</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="nl">website:</span><span class="n">accountDetails</span><span class="o">.</span><span class="na">getWebsites</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">website</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p>This is a very simplified example on how you could use Fitnesse to test your application. But the idea is very powerful, there are implementations for Java (initially) and now .NET, Groovy etc. Also, most of the time the system you’re testing doesn’t have a Java API but instead you’d like to test the user interface. With most Java applications being web applications there are numerous plugins to connect Fitnesse with for example Selenium to ease web application testing. The fixtures fill webpages and analyze the resulting HTML response.</p>

<p>At my current client (Port of Rotterdam) we’re building a very rich, partially offline, Swing application. This application has a backend and numerous clients running the Swing application. We’ve used Fitnesse to test the backend code from the start, and the last year we’ve put in some effort to also use Fitnesse for the Swing application. We’ve called this “Nonkey”, being an automated version of our Monkey integration testing we’d been doing up to that moment.</p>

<h1 id="uispec4j">UISpec4J</h1>

<p>The first ingredient we need to test Swing GUI’s in Fitnesse is UISpec4J. This is an excellent Swing test framework that allows you to manipulate GUI elements from code. The framework is made with unit-tests in mind, but can also be used in integration testing. In our SetUp page in Fitnesse we call the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="n">Window</span> <span class="n">mainWindow</span><span class="o">;</span>
<span class="kd">private</span> <span class="n">JFrame</span> <span class="n">mainFrame</span><span class="o">;</span>
    
<span class="c1">//Called from the Suite Set Up page:
</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">launchNonkey</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">mainWindow</span> <span class="o">=</span> <span class="n">WindowInterceptor</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="k">new</span> <span class="n">Trigger</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">OurApplication</span><span class="o">().</span><span class="na">launch</span><span class="o">();</span>
            <span class="c1">// Get the main JFrame from Spring, used directly in some cases instead of UISpec4J
</span>
            <span class="n">mainFrame</span> <span class="o">=</span> <span class="n">BeanFactory</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"mainFrame"</span><span class="o">,</span> <span class="n">MainFrame</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span></code></pre></figure>

<p>The WindowInterceptor captures the Swing application and allows for manipulation in a later stage. For example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//In some fixture:
</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">loginWithUsernameAndPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//UISpec4J uses JComponent.setName() for lookup:
</span>
    <span class="n">Panel</span> <span class="n">loginPanel</span> <span class="o">=</span> <span class="n">nonKey</span><span class="o">.</span><span class="na">mainWindow</span><span class="o">.</span><span class="na">getPanel</span><span class="o">(</span><span class="s">"loginPanel"</span><span class="o">);</span> 
    <span class="kd">final</span> <span class="n">TextBox</span> <span class="n">usernameTextbox</span> <span class="o">=</span> <span class="n">loginPanel</span><span class="o">.</span><span class="na">getTextBox</span><span class="o">(</span><span class="s">"usernameTextbox"</span><span class="o">);</span>
    <span class="n">usernameTextbox</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">TextBox</span> <span class="n">passwordTextbox</span> <span class="o">=</span> <span class="n">loginPanel</span><span class="o">.</span><span class="na">getTextBox</span><span class="o">(</span><span class="s">"passwordTextbox"</span><span class="o">);</span>
    <span class="n">passwordTextbox</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">password</span><span class="o">);</span>
    
    <span class="n">loginPanel</span><span class="o">.</span><span class="na">getButton</span><span class="o">(</span><span class="s">"loginButton"</span><span class="o">).</span><span class="na">click</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>This fixture causes the Swing application to fill in the username, password and press the login button. It is easy to read and can be launched from Fitnesse with a single line:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">|login with username|roy   |and password   |test123   |</code></pre></figure>

<p>Nice! We are done, we can test Swing GUI’s in Fitnesse now! Well no… not really, unfortunately there are a couple more problem we ran into, regaring the Event Dispatch Thread (EDT).</p>

<h1 id="event-dispatch-thread-edt">Event Dispatch Thread (EDT)</h1>

<p>The EDT, sometimes called Swing Thread, is a special thread. Everything you do in Swing should always happen on this thread. Setting components to visible, pressing buttons etc, all need to be done in the EDT. If you don’t do this correctly the application gets into a lot of race conditions and it can even cause the application to hang.</p>

<p>When we combined Fitnesse with UISpec4J and started making a lot of tests we noticed that sometimes mysteriously a test would fail without changes. It turned out to be a problem with the EDT. UISpec4J doesn’t worry too much about the EDT, and when we click a button or setText (like the examples above) it does this in the current thread. In Fitnesse this thread is the thread that called the fixture, obviously not the EDT.</p>

<p>We brainstormed a lot about how we could fix this, maybe change UISpec4Js code? This turned out to be a hellish task. How about setting SwingUtilities.invokeAndWait() in every fixture? That could work but is also a massive undertaking. We decided to take a look at how Fitnesse calls the fixtures. This is always done from a ‘StatementExecutor’. So we decided to build a custom StatementExecutor which causes the fixtures to all run in the EDT.</p>

<p>To do this we need a custom SlimService. First I tried to extend the normal SlimService, but this wouldn’t work for some odd reason (still unexplained, should try this again). We decided to copy the SlimService code and make our own:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingSlimService</span> <span class="kd">extends</span> <span class="n">SocketService</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">SwingSlimService</span> <span class="n">instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="n">verbose</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">parseCommandLine</span><span class="o">(</span><span class="n">args</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">startWithFactory</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="k">new</span> <span class="n">SwingJavaSlimFactory</span><span class="o">());</span> <span class="c1">//&lt;-- custom SwingJavaSlimFactory!
</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">parseCommandLineFailed</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">parseCommandLineFailed</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Invalid command line arguments:"</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">args</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">startWithFactory</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> 
            <span class="kd">final</span> <span class="n">SlimFactory</span> <span class="n">slimFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SwingSlimService</span><span class="o">(</span><span class="n">port</span><span class="o">,</span> <span class="n">slimFactory</span><span class="o">.</span><span class="na">getSlimServer</span><span class="o">(</span><span class="n">verbose</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">parseCommandLine</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">CommandLine</span> <span class="n">commandLine</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CommandLine</span><span class="o">(</span><span class="s">"[-v] port"</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">commandLine</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">args</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">verbose</span> <span class="o">=</span> <span class="n">commandLine</span><span class="o">.</span><span class="na">hasOption</span><span class="o">(</span><span class="s">"v"</span><span class="o">);</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">portString</span> <span class="o">=</span> <span class="n">commandLine</span><span class="o">.</span><span class="na">getArgument</span><span class="o">(</span><span class="s">"port"</span><span class="o">);</span>
            <span class="n">port</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">portString</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">SwingSlimService</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">,</span> <span class="kd">final</span> <span class="n">SlimServer</span> <span class="n">slimServer</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">port</span><span class="o">,</span> <span class="n">slimServer</span><span class="o">);</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Next we needed a custom JavaSlimFactory:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingJavaSlimFactory</span> <span class="kd">extends</span> <span class="n">JavaSlimFactory</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">StatementExecutorInterface</span> <span class="nf">getStatementExecutor</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">SwingStatementExecutor</span><span class="o">();</span> <span class="c1">//&lt;-- custom SwingStatementExecutor!
</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>And last but not least our custom StatementExecutor which forces all calls into the EDT thread:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">portofrotterdam</span><span class="o">.</span><span class="na">hamis</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">fitnesse.slim.StatementExecutor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">fitnesse.slim.StatementExecutorInterface</span><span class="o">;</span>

<span class="cm">/**
 * HaMIS custom StatementExecutor, to call and create in the EDT thread
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingStatementExecutor</span> <span class="kd">implements</span> <span class="n">StatementExecutorInterface</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">StatementExecutor</span> <span class="n">wrapped</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StatementExecutor</span><span class="o">();</span>

    <span class="kd">private</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">EDTRunnable</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">Object</span> <span class="n">returnValue</span><span class="o">;</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">();</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setReturnValue</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">returnValue</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">returnValue</span> <span class="o">=</span> <span class="n">returnValue</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getReturnValue</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">returnValue</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">call</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">methodName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">caller</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">instanceName</span><span class="o">,</span> <span class="n">methodName</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">caller</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">caller</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callAndAssign</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">variable</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">String</span> <span class="n">methodName</span><span class="o">,</span>
            <span class="kd">final</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">callAndAssigner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">callAndAssign</span><span class="o">(</span><span class="n">variable</span><span class="o">,</span> <span class="n">instanceName</span><span class="o">,</span> <span class="n">methodName</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">callAndAssigner</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">callAndAssigner</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">create</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">className</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="kd">final</span> <span class="n">EDTRunnable</span> <span class="n">creater</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EDTRunnable</span><span class="o">()</span> <span class="o">{</span>

            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setReturnValue</span><span class="o">(</span><span class="n">wrapped</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">instanceName</span><span class="o">,</span> <span class="n">className</span><span class="o">,</span> <span class="n">args</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">};</span>
        <span class="n">EDTRunner</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">creater</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">creater</span><span class="o">.</span><span class="na">getReturnValue</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">addPath</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">addPath</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">instanceName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">instanceName</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">reset</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">wrapped</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setVariable</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">wrapped</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">stopHasBeenRequested</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">wrapped</span><span class="o">.</span><span class="na">stopHasBeenRequested</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This uses a small static class we’ve used in our code before to safely run a Runnable on the EDT and invokeAndWait (without waiting IN the EDT):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EDTRunner</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="kd">final</span> <span class="n">Runnable</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">SwingUtilities</span><span class="o">.</span><span class="na">isEventDispatchThread</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">r</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">EventQueue</span><span class="o">.</span><span class="na">invokeAndWait</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">InterruptedException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e1</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="kd">final</span> <span class="n">InvocationTargetException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e1</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>The only thing left to do is to instruct Fitnesse to use our SlimService instead of the default implementation. This is done using the following parameter in our main page:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">!</span><span class="n">define</span> <span class="n">TEST_SYSTEM</span> <span class="o">{</span><span class="n">slim</span><span class="o">}</span>
<span class="o">!</span><span class="n">define</span> <span class="n">TEST_RUNNER</span> <span class="o">{</span><span class="n">com</span><span class="o">.</span><span class="na">portofrotterdam</span><span class="o">.</span><span class="na">hamis</span><span class="o">.</span><span class="na">SwingSlimService</span><span class="o">}</span></code></pre></figure>

<p>Make sure that the class can be found (for example, package it in a JAR and place it on Fitnesses classpath). And you’re done! Using a <a href="http://www.jidesoft.com/javadoc/com/jidesoft/utils/ThreadCheckingRepaintManager.html">ThreadCheckingRepaintManager</a> (workings described <a href="http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html">here</a>) we checked to see if the tests are now repainting/manipulating Swing from the correct thread, and it works like a charm.</p>

<p>Good luck testing with Fitnesse in the near future, if you have any problems/improvements/ideas please let me know (in the comments below).</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2013/02/test-swing-applications-in-fitnesse-nonkey/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/12/facebook-status-deceased/" title="Facebook status: Deceased">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Facebook status: Deceased" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-12-18T20:21:51+01:00" class="date" />
          <span itemprop="datePublished" content="2012-12-18T20:21:51+01:00" class="date">
            Dec 18, 2012 20:21:51
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/12/facebook-status-deceased/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/12/facebook-status-deceased/">Facebook status: Deceased</a></h1>

        <span itemprop="articleBody">
          <p>In the next couple of years dead will become an important aspect of the social networks. A time will come that most profiles on Facebook will belong to people who’ll never be able to post another update. Currently due to inactivity most dead profiles will be deleted or become inactive, but I think dead will take a much more important role on the internet.</p>

<p>My parents and even grandparents have a Facebook account now, but in twenty or thirty years, some people I’m connected to won’t be alive anymore. It would be great to be able to browse the lives of people who are no longer around us. I’d love to read about my deceased grandmother for example, just to see how she lived her life. So instead of deleting inactive accounts, death should become more accepted and a part of our social web as well.</p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/12/facebook-status-deceased/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/11/devoxx-2012-the-video/" title="Devoxx 2012, the video">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Devoxx 2012, the video" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-11-17T11:51:20+01:00" class="date" />
          <span itemprop="datePublished" content="2012-11-17T11:51:20+01:00" class="date">
            Nov 17, 2012 11:51:20
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/11/devoxx-2012-the-video/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/11/devoxx-2012-the-video/">Devoxx 2012, the video</a></h1>

        <span itemprop="articleBody">
          <p>Yesterday when I returned home from another amazing Devoxx conference I quickly created another impression video:</p>

<iframe type="text/html" src="https://player.vimeo.com/video/53695846?badge=0" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/11/devoxx-2012-the-video/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/11/devoxx4kids/" title="Devoxx4Kids">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Devoxx4Kids" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-11-16T18:48:38+01:00" class="date" />
          <span itemprop="datePublished" content="2012-11-16T18:48:38+01:00" class="date">
            Nov 16, 2012 18:48:38
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/11/devoxx4kids/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/11/devoxx4kids/">Devoxx4Kids</a></h1>

        <span itemprop="articleBody">
          <p>A couple of weeks ago I went to Devoxx4Kids. Devoxx is a very well known Java conference (the best in the world actually!). This time they organized an event especially for kids ranging from 10 to 14 years old. The goal is twofold, the main goal is to just give them a good time, the second goal is to introduce them to programming and technology in a fun way.</p>

<p>To show the world this is a great idea, Stephan invited me to film the event and capture the happy faces of the kids enjoying themselfs. And now after Devoxx 2012, I’m allowed to show it to everybody:</p>
<iframe type="text/html" src="https://player.vimeo.com/video/51393678?badge=0" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>(more information in Dutch and French: <a href="http://www.devoxx.com/display/4KIDS/Home">http://www.devoxx.com/display/4KIDS/Home</a>)</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/11/devoxx4kids/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/09/stacktraces-should-be-inverted/" title="Stacktraces should be inverted">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Stacktraces should be inverted" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-09-26T10:28:52+02:00" class="date" />
          <span itemprop="datePublished" content="2012-09-26T10:28:52+02:00" class="date">
            Sep 26, 2012 10:28:52
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/09/stacktraces-should-be-inverted/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/09/stacktraces-should-be-inverted/">Stacktraces should be inverted</a></h1>

        <span itemprop="articleBody">
          <p>Stacktraces in Java are wrong. This is a conclusion that I’ve drawn after years of working with novice programmers.</p>

<p>What is the first thing novice programmers do when they encounter a stacktrace? They start reading it, and this is wrong! The first thing you <em>should</em> do is scroll down. That is because the most important piece of the stacktrace is most likely at the bottom.</p>

<h1 id="caused-by">Caused by…</h1>

<p>Stacktraces in Java are usually wrapped numerous times, because all the frameworks and the application server wants to add their own little bit of information around the original exception. The problem is that Java uses the “Caused by” way of printing the stacktrace. With the “Caused by” you’ll get a lot of information about what happened (<em>afterwards</em>) first, until you get to the actual reason.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">com.portofrotterdam.hamis.service.offline.WebServiceException: Error during webservice call.
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:111)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)
Caused by: com.portofrotterdam.hamis.service.offline.WebServiceException: Problem while getting data from webservice and translation:
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:60)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:42)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:26)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:8)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:107)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
	at com.sun.deploy.security.CPCallbackHandler.isAuthenticated(Unknown Source)
	at com.sun.deploy.security.CPCallbackHandler.access$1300(Unknown Source)
	at com.sun.deploy.security.CPCallbackHandler$ChildElement.checkResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath$JarLoader.checkResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:351)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:345)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:337)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:48)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:42)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:26)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:8)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:107)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)</code></pre></figure>

<p>The first two traces aren’t at all important, it tells us something went wrong with a webservice call. But the bottom trace gives us the real reason, a NullPointerException!</p>

<h1 id="caused">Caused!</h1>

<p>I’d rather see stacktraces being inverted, so instead of saying:</p>

<table>
  <tbody>
    <tr>
      <td>**Webservice failed</td>
      <td>which is caused by -&gt; Webservice failed during translation</td>
      <td>which is caused by -&gt; A NullPointerException!**</td>
    </tr>
  </tbody>
</table>

<p>It should say:</p>

<table>
  <tbody>
    <tr>
      <td>**A NullPointerException</td>
      <td>which caused -&gt; Webservice failed during translation</td>
      <td>which caused -&gt; Webservice failed…**</td>
    </tr>
  </tbody>
</table>

<p>So using the example above it would become:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">java.lang.NullPointerException
	at com.sun.deploy.security.CPCallbackHandler.isAuthenticated(Unknown Source)
	at com.sun.deploy.security.CPCallbackHandler.access$1300(Unknown Source)
	at com.sun.deploy.security.CPCallbackHandler$ChildElement.checkResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath$JarLoader.checkResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
	at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:351)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:345)
	at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:337)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:48)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:42)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:26)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:8)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:107)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)
Caused: com.portofrotterdam.hamis.service.offline.WebServiceException: Problem while getting data from webservice and translation:
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:60)
	at com.portofrotterdam.hamis.service.webservice.WebServiceProxy.callWebService(WebServiceProxy.java:42)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:26)
	at com.portofrotterdam.hamis.service.webservice.GetAllTemplateInspectionCheckListsSynchronizingWebservice.callWebservice(GetAllTemplateInspectionCheckListsSynchronizingWebservice.java:8)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:107)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)
Caused: com.portofrotterdam.hamis.service.offline.WebServiceException: Error during webservice call.
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doWebserviceCall(BaseSynchronizingWebservice.java:111)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doCallWithCallback(BaseSynchronizingWebservice.java:97)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.doActualCall(BaseSynchronizingWebservice.java:77)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice.access$000(BaseSynchronizingWebservice.java:44)
	at com.portofrotterdam.hamis.service.webservice.BaseSynchronizingWebservice$1.run(BaseSynchronizingWebservice.java:63)
	at java.lang.Thread.run(Unknown Source)</code></pre></figure>

<p>This is much easier to understand (IMHO). The first exception you see is now also the first thing that happened. Much clearer for the novice programmer.</p>

<p>Some more tips when you encounter a stacktrace:</p>

<ul>
  <li>Look for the first line that starts with YOUR package, this is where your control over the code starts, where you might be able to fix it</li>
  <li>If there are a lot of other packages mentioned before YOUR package, Google it! You are probably not alone</li>
</ul>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/09/stacktraces-should-be-inverted/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/09/hacking-with-the-mara-naboisho-lion-project/" title="Hacking with the Mara-Naboisho Lion Project">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Hacking with the Mara-Naboisho Lion Project" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-09-11T20:05:40+02:00" class="date" />
          <span itemprop="datePublished" content="2012-09-11T20:05:40+02:00" class="date">
            Sep 11, 2012 20:05:40
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/09/hacking-with-the-mara-naboisho-lion-project/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/09/hacking-with-the-mara-naboisho-lion-project/">Hacking with the Mara-Naboisho Lion Project</a></h1>

        <span itemprop="articleBody">
          <p>Yesterday a friend of mine pointed me to the following thread:<br />
<a href="https://github.com/giving/giving.github.com/issues/11">https://github.com/giving/giving.github.com/issues/11</a></p>

<p><img src="/images/lion-with-collar.jpg" alt="lion-with-collar" class="alignright" /></p>

<h1 id="givinggithubcom">giving.github.com</h1>

<p>Giving.github is a project that tries to bring people together. There are a lot of programmers looking for fun projects in the world, and so are scientists/charities and other people with problems!</p>

<p>Be sure to check it out, maybe you can help somebody as well.</p>

<h1 id="mara-naboisho-lion-project">Mara-Naboisho Lion Project</h1>

<p>One of the problems posted to giving.github has something to do with Lion collars. The Mara-Naboisho Lion Project has a couple of collars and some files, but no idea what the data inside the files mean. Their initial description was:</p>

<p>The Mara-Naboisho Lion Project has asked for our help decoding and plotting the positions of lions fitted with GPS collars.</p>

<p>They receive SMSes from the collars:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">File: Collar07854_100806210058.SMS

074952494449554d0000000000000000000000000000000000000000
000000040f3330303033343031323239373839300000000000000000
0000000000000000f10a0806100028008c13ef348a0039d0fe000de8
71004cc92b5ca92d6213ef26640039d108000de86b004cc92d5ca92d
5d13ef18620039d101000de865004cc92c5ca92d5813ef0a930039d0
fc000de864004cc9311c682d5413eefc170039d045000de7d4004cc9
5b7c692c5013eeee280039d0ff000de85f004cc92a7c692d6fffffff
ffffffffffffffffffffffffffffffffffff
    
File: Collar07854_100807060011.SMS

074952494449554d0000000000000000000000000000000000000000
000000040f3330303033343031323239373839300000000000000000
0000000000000000f10a0807020038008c13efb2eb0039d0ed000de8
53004cc92e3cea2d8813efa5060039d0fb000de860004cc9291c6a2d
8413ef96fd0039d0fc000de85e004cc92d5c6a2d7f13ef88e00039d0
f6000de85a004cc92b5c6a2d7b13ef7ad80039d0fa000de85a004cc9
327c6a2d77ffffffffffffffffffffffffffffffffffffffffffffff
ffffffffffffffffffffffffffffffffffff</code></pre></figure>

<p>These are presumably SMS PDUs, although simple online decoders don’t seem to make much sense of them. There’s the ASCII text “IRIDIUM” in them, presumably being the SMSC or sender or something string, as IRIDIUM is a satellite telephone system and presumably the bearer when the collars send up their positions.</p>

<p>What format is it, and how do we decode it?</p>

<h1 id="not-sms-pdu">Not SMS PDU</h1>

<p>This is where I started analyzing, and I quickly ruled out that the hex-code is pure PDU (which can easily be translated). It seems to be some dialect/own protocol.</p>

<p>The first major breakthrough was realizing that there is one big header that both files have in common, and the real message starts with <strong>0A</strong>. And the two messages after that have a repeating pattern:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Common header?

074952494449554d000000000000000
0000000000000000000000000000000
040f333030303334303132323937383
9300000000000000000000000000000
0000f10a

Sub header?
SMS 1: 0806100028008c13
SMS 2: 0807020038008c13


Message #1:
ef348a0039d0fe000de871004cc92b5ca92d6213
ef26640039d108000de86b004cc92d5ca92d5d13
ef18620039d101000de865004cc92c5ca92d5813
ef0a930039d0fc000de864004cc9311c682d5413
eefc170039d045000de7d4004cc95b7c692c5013
eeee280039d0ff000de85f004cc92a7c692d6fff
ffffffffffffffffffffffffffffffffffffffff

Message #2:
efb2eb0039d0ed000de853004cc92e3cea2d8813
efa5060039d0fb000de860004cc9291c6a2d8413
ef96fd0039d0fc000de85e004cc92d5c6a2d7f13
ef88e00039d0f6000de85a004cc92b5c6a2d7b13
ef7ad80039d0fa000de85a004cc9327c6a2d77ff
ffffffffffffffffffffffffffffffffffffffff
ffffffffffffffffffffffffffffffffffffffff</code></pre></figure>

<p>This sure adds some structure to the files. I also guessed the first file has actually 6 entries and the second file has only 5 entries.</p>

<h1 id="first-field-deciphered">First field deciphered</h1>

<p>The second breakthrough came through Twitter. I posted this problem in a tweet and after a couple of hours I got a reply that there was progress on the <a href="http://stackoverflow.com/questions/12347625/decode-sms-reporting-gps-positions-of-lions-in-kenya">stackoverflow</a> question.</p>

<p>This was DStibbe’s reply:</p>

<p>-——————————————————————————–<br />
Perhaps the ‘13’ is not part of the headers but the message instead?<br />
The messages would then be:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Message #1
13ef 348a 0039 d0fe 000d e871 004c c92b 5ca9 2d62
13ef 2664 0039 d108 000d e86b 004c c92d 5ca9 2d5d
13ef 1862 0039 d101 000d e865 004c c92c 5ca9 2d58
13ef 0a93 0039 d0fc 000d e864 004c c931 1c68 2d54
13ee fc17 0039 d045 000d e7d4 004c c95b 7c69 2c50
13ee ee28 0039 d0ff 000d e85f 004c c92a 7c69 2d6f
ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
ff

Message #2
13ef b2eb 0039 d0ed 000d e853 004c c92e 3cea 2d88
13ef a506 0039 d0fb 000d e860 004c c929 1c6a 2d84
13ef 96fd 0039 d0fc 000d e85e 004c c92d 5c6a 2d7f
13ef 88e0 0039 d0f6 000d e85a 004c c92b 5c6a 2d7b
13ef 7ad8 0039 d0fa 000d e85a 004c c932 7c6a 2d77
ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
ffff ffff ffff ffff ffff ffff ffff ffff ffff ffff
ff</code></pre></figure>

<p>It does seem like a log , with the message for Aug 06 (guessing) has 6 entries and the second from Aug 07 having 7.<br />
What would a collar record? I’m guessing longitude,latitude and timestamp?</p>

<p>Chances are high that the first eight digits represent the timestamp. They are incremental from bottom to top.</p>

<p>Eg. 13ef348a = 334443658.<br />
334443658 seconds = 10 years, 8 months, 6 days, 23:00:58</p>

<p>This matches the date in the title of the first sms: Collar07854_<strong>100806 210058</strong>.SMS<br />
It even matches the timestamp minus 2 hrs in the title!<br />
-——————————————————————————–</p>

<h1 id="more-information">More information</h1>

<p>At this point the progress stopped a bit, we couldn’t get the other bytes translated. There seemed to be certain integer values: 0039 d0ed for example. This probably isn’t floating point (which we thought it would be, latitude/longitude/altitude) because floating point numbers have the exponent in the first 11 bits. When a number starts with 00’s it doesn’t have the exponent part filled.</p>

<p>So we asked the project for some more information, for example about the recorded data (where/when) and the manufacturer of the collars.<br />
They gave us <a href="https://gist.github.com/3698320">this KML file</a>, and this company name: Vectronic-Aerospace.</p>

<h1 id="latlon-ive-got-you">Lat/lon, I’ve got you!</h1>

<p>The biggest part we wanted to decipher was the lan/lon location (that is what the researchers want to have). I came to this breakthrough after reading a <a href="http://www.vectronic-aerospace.com/files/Flyer-GPS_Plus-Data_Manager.pdf">PDF</a> file from Vectronic-Aerospace’s website. It has some screenshots from their original software (why aren’t they using that free software?!). In these screenshots I noticed integer coordinates very close to the integers I’ve managed to get from the hex-data! It was called ECEF data, this is X,Y,<strong>Z</strong> data! Until now my guess was that the SMS files had lat/lon coded in binary, but it has XYZ information.</p>

<p>After a quick google I managed to find some code to translate from ECEF coordinates to lat/lon and it gave me the following location:<br />
Lat: 52.43067054630929<br />
Lon: 13.525755535406619<br />
Height: 88.99500464554876</p>

<p>When plotted in Google Maps it gave me a location in Germany, at first I thought it was another dead end, but then I looked <a href="http://www.vectronic-aerospace.com/index.php?p=contact">here</a>. It turns out it was the EXACT location of Vectronic Aerospace, the creators of the collar! Problem solved.</p>

<h1 id="whats-next">What’s next?</h1>

<p>There are still some mysteries, for example… what are the last bytes? Looking at the screenshots in the PDF I suspect it would be main battery voltage, backup voltage and temperature. The project also probably wants to integrate the collar files with the website. And there are of course a lot more <a href="http://giving.github.com/">giving.github.com</a> problems to solve!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/09/hacking-with-the-mara-naboisho-lion-project/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/07/visitors-you-make-me-proud/" title="Visitors, you make me proud">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Visitors, you make me proud" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-07-16T10:34:24+02:00" class="date" />
          <span itemprop="datePublished" content="2012-07-16T10:34:24+02:00" class="date">
            Jul 16, 2012 10:34:24
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/07/visitors-you-make-me-proud/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/07/visitors-you-make-me-proud/">Visitors, you make me proud</a></h1>

        <span itemprop="articleBody">
          <p><img src="/images/ripIE.png" alt="ripIE" class="alignright" /><br />
With the sudden surge of visitors from Reddit (Hello!) I decided to take look at Google Analytics. And two things caught my eye:</p>

<p>First of all, Google Analytics ‘Realtime’ is awesome, you can see minute by minute how many people are on your website and what they are looking at, where they come from (internetwise and geographically).</p>

<p>Second, my website gets the right type of visitors, I’m so proud at you guys and girls…</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">1.	Chrome			53.83%
2.	Firefox			20.70%
3.	Safari			8.83%
4.	Mozilla			7.48%
5.	Android	Browser		4.85%
6.	Internet Explorer	1.98%
...</code></pre></figure>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/07/visitors-you-make-me-proud/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2012/07/java-speed-of-math/" title="Java vs Javascript: Speed of Math">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Java vs Javascript: Speed of Math" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2012-07-15T11:17:02+02:00" class="date" />
          <span itemprop="datePublished" content="2012-07-15T11:17:02+02:00" class="date">
            Jul 15, 2012 11:17:02
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2012/07/java-speed-of-math/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2012/07/java-speed-of-math/">Java vs Javascript: Speed of Math</a></h1>

        <span itemprop="articleBody">
          <p>Last week I’ve created a <a href="/blog/2012/07/mandelbulb-rendering/">ray marcher</a> 3d engine which renders the <a href="http://en.wikipedia.org/wiki/Mandelbulb">Mandelbulb</a>. And I’ve <a href="/blog/2012/07/introducing-mandelbulb-js/">translated</a> it into pure Javascript a couple of days later. After the translation I decided I should optimize the code a little for speed, so I made some speed improvements in the Javascript code. The main optimization was using an array for the vector3d instead of a class/function.</p>

<p>Rendering the Mandelbulb on a 400x400 canvas now took just 1850ms in Javascript (Chrome, V8). Which is very fast! Even faster than my Java implementation (running on Java 1.6.0.33 -server, which was faster than Java 7). But the Java code didn’t have some of the speed optimizations. So I re-translated the Javascript code back to Java. It produced the following numbers (lower is better performance):</p>

<p><a href="/images/compare1.png"><img src="/images/compare1.png" alt="Comparing Javascript and Java" /></a></p>

<p>What has happened here? The output is the same, why is Java so much slower than Javascript? I would have suspected the opposite…</p>

<p>I fired up the profiler to see what was causing the Java code to be so slow, and it turned out the method it spend most time in was Math.pow(). Other slow methods were Math.acos(), cos(), sin() etc. It turns out that the Math library isn’t very fast, but there is an alternative, <a href="http://commons.apache.org/math/apidocs/org/apache/commons/math/util/FastMath.html">FastMath</a>. Apache Commons has implemented a faster Math library for commons-math. Lets see what changing Math.* to FastMath.* does to the performance:</p>

<p><a href="/images/compare2.png"><img src="/images/compare2.png" alt="compare2" /></a></p>

<p>This is already much better. But still the method causing most delay is FastMath.pow(). Why is Javascript so much faster? The method is made so you can calculate the power of two doubles, not only integer values. But I’m only doing Integer powers (7 and 8 to be precise). So I decided to implement my own method:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">double</span> <span class="nf">fasterPow</span><span class="o">(</span><span class="kt">double</span> <span class="n">d</span><span class="o">,</span> <span class="kt">int</span> <span class="n">exp</span><span class="o">)</span> <span class="o">{</span>
	<span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="n">d</span><span class="o">;</span>
	<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">exp</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
		<span class="n">r</span> <span class="o">*=</span> <span class="n">d</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="n">r</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p><strong>Warning: This isn’t the same as Math.pow/FastMath.pow!</strong></p>

<p><a href="/images/compare3.png"><img src="/images/compare3.png" alt="compare3" /></a></p>

<p>The speed with this new method is much better and seems comparable with Javascript. Maybe this is an optimization the V8 engine does by default? Who knows.</p>

<p>The slowest method in the program now is FastMath.acos. From highschool I know that acos(x) can also be calculated as atan(sqrt(1-x*x)/x). So I created a own version of acos. When benchmarked, the different methods: Math.acos(), FastMath.acos() and FastMath.atan(FastMath.sqrt(1-x*x)/x), the result is again surprising:</p>

<p><a href="/images/compare4.png"><img src="/images/compare4.png" alt="compare4" /></a></p>

<p>The custom acos() function is a bit faster than FastMath.acos() and a lot faster than Math.acos(). Using this function in the Mandelbulb renderer gives us the following metric:</p>

<p><a href="/images/compare5.png"><img src="/images/compare5.png" alt="compare5" /></a></p>

<p>So it turns out that with a bit of tweaking we can get the Java version faster than Javascript, but I would have never imagined Java would be slower in the first place. The Chrome V8 guys really did an amazing job improving the speed of their Javascript VM. Mozilla isn’t far behind, they are getting +/- 2200 ms in the benchmark. Which is also faster than Java.Math and FastMath! It seems that V8’s math implementation has some optimizations that Java could really use. The tricks used above don’t make any difference with the Javascript version.</p>

<p><strong>Edit 1:</strong> Is Javascript faster than Java?</p>

<p>Well surprisingly in this case it is. With the code a 100% the same, using arrays as vector and Math.* the code actually runs faster in my browser!</p>

<p><strong>Edit 2:</strong> People have been asking me: What could have been done to make it faster in Java? And, why is it slow?</p>

<p>Well the answer is twofold:</p>

<p>1) The Math libraries are made for ‘double’ in Java. Having a power() method work with doubles is much harder than working with just integer numbers. The only way to optimize this would be to overload the methods with int-variants. This would allow much greater speeds and optimizations. I think Java should add Math.pow(float, int), Math.pow(int, int) etc.</p>

<p>2) All the Math libraries have to work in <em>all</em> situations, with negative numbers, small numbers, large numbers, zero, null etc. They tend to have a lot of checks to cope with all those scenario’s. But most of the time you’ll know more about the numbers you put in… For example, my fastPower method will only work with positive integers larger than zero. Maybe you know that the power will always have even numbers…? This all means that the implementation can be improved. The problem is, this <em>can’t</em> be easily achieved in a generic (math) library.</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2012/07/java-speed-of-math/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  

  <!-- Pagination -->
  
  <div class="pagination">
    <div class="pagination-center">
    
      <div class="pagination-item"><a href="/page/5">&laquo; Prev</a></div>
    

    
      
        <div class="pagination-item"><a href="/index.html">1</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/2">2</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/3">3</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/4">4</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/5">5</a></div>
      
    
      
        <div class="pagination-item"><strong>6</strong></div>
      
    
      
        <div class="pagination-item"><a href="/page/7">7</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/8">8</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/9">9</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/10">10</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/11">11</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/12">12</a></div>
      
    

    
      <div class="pagination-item"><a href="/page/7">Next &raquo;</a></div>
    
    </div>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <span class="svg-icon linkedin">Connect on LinkedIn</span>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <span class="svg-icon stackoverflow">Follow me on StackOverflow</span>
        </a>

        <a href="https://github.com/royvanrijn">
          <span class="svg-icon github">Follow me on GitHub</span>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <ispan class="svg-icon twitter">Follow me on Twitter</span>
        </a>
          
        <a href="/feed/index.xml">
          <span class="svg-icon rss">Check out the RSS feed</span>
        </a>
	  </div>
    
    </div>

  </div>

</footer>


  </body>

</html>
