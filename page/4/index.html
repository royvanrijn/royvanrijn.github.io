<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  
  <meta name="keywords" content="royvanrijn,programming,java,blog,devoxx,conference,speaker,technology,science,math,azspcs,tips,tricks" />
  
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://royvanrijn.com/page/4/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="https://royvanrijn.com/feed/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@royvanrijn" />
  <meta name="twitter:title" content="royvanrijn" />
  <meta name="twitter:description" content="Java, algorithms, math, science and more!" />
  
  <meta name="twitter:image" content="http://www.royvanrijn.com/thumbnails/default.jpg"/>
  

<script>
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-1', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" width="990" height="307"/>
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <hr/>
  <!-- This loops through the paginated posts -->
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/12/stop-the-rot-the-rules-of-refactoring/" title="Stop the Rot, the Rules of Refactoring">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Stop the Rot, the Rules of Refactoring" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-12-09T13:31:22+01:00" class="date" />
          <span itemprop="datePublished" content="2014-12-09T13:31:22+01:00" class="date">
            Dec 9, 2014 13:31:22
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/stop-the-rot-the-rules-of-refactoring/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/12/stop-the-rot-the-rules-of-refactoring/">Stop the Rot, the Rules of Refactoring</a></h1>

        <span itemprop="articleBody">
          <p>A lot of times you hear experienced programmers talking about ‘smelly’ code. These ‘code smells’ are things that just look or feel wrong. Often programmers don’t immediately have a clear idea on how to fix it, but it ‘smells’! These smells often happen when the code ‘rots’.</p>

<p>Let’s do a quick check:</p>

<ul>
  <li>Are there pieces of code you’d rather not change?</li>
  <li>Are (parts of) the application sometimes scrapped and rebuild from scratch (over and over)?</li>
  <li>Do pieces of code exist that turned out much more complex than you had initially imagined?</li>
  <li>Do you have pieces of code that feel out of place?</li>
  <li>Is it hard to break up some large classes and/or methods?</li>
  <li>Do you have a hard time coming up with names for certain classes?</li>
</ul>

<p>If you’ve answered yes to one or more questions, you are probably suffering from code smells and maybe even advanced code rot.</p>

<h1 id="what-is-a-code-smell">What is a code smell?</h1>

<p>Most of the time a piece of code has a smell when the design underneath is wrong. Often this is not visible at first, but slowly appears when the component gets larger. Classes get too large, methods are hard to break up, some classes or methods feel out of place. Even simple things as struggling with naming a new class is a sign there is something wrong. All of this are code smells and experienced programmers have developed a nose for this. Most of the time this is a sign there is a larger problem. It isn’t something a bit of code can fix, there is probably something wrong in the design. Is this component doing the right thing? Does it have the right responsibilities? Take a step back and look at the complete picture. What problem are these classes/methods trying to solve?</p>

<h1 id="what-is-code-rot">What is code rot?</h1>

<p>When code smells, more often than not, people will continue working on it, adding functionality. Maybe they don’t notice the smell or they don’t take the much needed step back to investigate the problem. This leads to faster code rot. So what exactly is code rot you might ask? Every piece of code starts to ‘rot’ the moment it is written. Eventually the code needs to be replaced and becomes too difficult to maintain. Hopefully this happens in the far future, 20-30 years from now. Unfortunately this is often not the case, there are parts being rebuild and scrapped while the application is being developed.</p>

<p>Each time new code is written, added or changed, the new code starts out as rotten as the code that it depends on. This can cause, with a tiny bit of rotten/smelly code, for an entire application to be trashed! It is highly infectious.</p>

<h1 id="and-the-answer-is-refactoring">And the answer is… refactoring!</h1>

<p>Refactoring is the magic word here, but… it sounds easier than it actually is. At first people will deny there is a problem, sometimes they don’t see it, they don’t share your disgust. Eventually it’ll continue to rot and more people will notice the smell. And once this smell has become unbearable drastic measures seem to be needed. This brings us to rule #1 about code smell:</p>

<p><strong>1. Refactor early, refactor often.</strong></p>

<p>The sooner you refactor and remove some rotten code, the less likely it is to spread and the easier it is to remove. Don’t seek for approval, do something about it. But remember, take a step back first. Sometimes you are rewriting a piece of code, and the result is just as bad as before. The reason is that a design flaw is lurking in the shadows. If the responsibilities between two components is wrong you can scrap a piece of code and rebuild it, but the same problems will keep surfacing. So lets make this rule #2:</p>

<p><strong>2. Before refactoring, take a step back, eliminate possible design flaws.</strong></p>

<p>You’ve taken a step back, looked at the complete picture, fixed the responsibilities, time to do the refactoring! No!! There is a third *very* important rule. Refactoring means changing a piece of code without changing its behavior. How do we do this? We write tests! Only if you have proper testing in place you can start thinking about refactoring. How else will you be certain that a piece of code still has the same behavior as before?</p>

<p><strong>3. Only refactor when you have proper tests.</strong></p>

<p>If you follow these three simple rules, nothing can go wrong. You’re detecting and fixing code smells early and often, you’ll stop the rot as soon as possible to make sure it doesn’t spread, keeping the application healthy. There isn’t a possible design flaw hiding in the shadows, we’ve taken a step back and eliminated that. And finally: We have tests in place that ensure we don’t change any behavior that was painstakingly added to the rotting code.</p>

<p>If you follow these rules you’ll end up with code that is readable, easier to maintain, easy to change (agile code!).</p>

<p>In short: <strong>Healthy code!</strong></p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/stop-the-rot-the-rules-of-refactoring/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/12/programming-testing-documentation/" title="Programming, testing, documentation">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Programming, testing, documentation" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-12-02T16:10:04+01:00" class="date" />
          <span itemprop="datePublished" content="2014-12-02T16:10:04+01:00" class="date">
            Dec 2, 2014 16:10:04
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/programming-testing-documentation/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/12/programming-testing-documentation/">Programming, testing, documentation</a></h1>

        <span itemprop="articleBody">
          <p>This week I’ve started work on a new project. This project has strict rules regarding documentation and testing. First of all, everything needs to be modelled in EA (Enterprise Architect), from use cases to the REST API fields. Next we need to perform the actual programming, and the testers write down their tests.</p>

<h1 id="realization">Realization</h1>

<p>What is in the <strong>documentation</strong>?<br />
- A description of who inputs what and what the results should be</p>

<p>What is in the <strong>code</strong>?<br />
- A description of who inputs what and what the results should be</p>

<p>What is in the <strong>test</strong>?<br />
- A description of who inputs what and what the results should be</p>

<p>Come to think of it… <strong>programming IS testing IS documenting</strong>, we are all doing exactly the same thing! This sounds a bit wasteful doesn’t it?</p>

<h1 id="duplication">Duplication</h1>

<p>Is this (triple) duplication a bad thing? Well, not exactly, it is a good thing the tests and the code are written twice, this greatly reduces the amount of bugs and errors that always happen when writing something. Thinking and writing those things twice is actually a good thing!<br />
<strong>BUT</strong>…</p>

<h1 id="divergence">Divergence</h1>

<p>There is a major problem with having duplication: divergence.</p>

<p>What happens when a programmer decides to change the fields in the REST API? The moment he does that the documentation isn’t correct. In the best case all three, documentation, tests and code, get (<em>manually</em>) updated. But this just <strong>never</strong> happens in real life… Tests start lacking behind, documentation ends up being wrong, code ends up doing things we don’t expect. Mostly because we are human and don’t like doing things manually, we are focused on one thing, the code, or the test, or EA.</p>

<p>Another problem is that all three documents are ‘alive’. During design sessions people will change the documentation in EA, but this isn’t yet implemented in the code. Also the test isn’t yet updated. So at every possible moment in time <em>none</em> of the documents hold the entire truth. If you read the documentation you can never rely that the code is actually implemented.</p>

<h1 id="verify-and-automate">Verify and automate!</h1>

<p>If all three things (documentation, tests, code) do the same thing (namely ‘describing how the program should behave’) why don’t we automatically verify this?</p>

<p>If you have a REST API description with all fields and types in Enterprise Architect, why not verify this with the actual code?<br />
A use case describes all possible paths and the expected outcomes, this is 100% the same as your (automated) tests should be!</p>

<p>We could <em>(and should!)</em> automate and verify this.</p>

<p>This morning the architect showed us three random examples from pieces of documentation in EA (to teach us how to work with the tool). But <em>NONE</em> of the three examples were complete and/or correct. Not a single example was the same in the documentation as implemented in the code. If this is the case, why even bother writing the documentation? It will keep diverging and become more and more useless.</p>

<h1 id="tooling">Tooling</h1>

<p>In a previous project I did, we didn’t have any real documentation. We ‘only’ had Fitnesse tests! But those tests were just as readable as documentation.<br />
The big advantage was that we had a complete set of tests that:</p>

<ul>
  <li>are readable as documentation (like use cases)</li>
  <li>are executable and verify our code does what we expect (and visa versa)</li>
  <li>ensure the documentation, tests and code are <strong>the same</strong></li>
</ul>

<p>This fixes all the problems regarding divergence and testing. When we wrote down the specification we instantly have our use cases. How do we know the code isn’t ready yet? When this documentation is executed, it fails! Writing this initial test text should be done together with programmers, testers and the product owner.</p>

<p>So is Fitnesse the best tool for the job? Probably not, it isn’t as elaborate as Enterprise Architect (thankfully?) but maybe it could use some more structure. The big advantage of EA is the re-use of (partial) use cases when we create a new part of the application, you just drag and link parts together. In my experience people don’t treat Fitnesse with the proper respect (it is ‘just’ test code). For some reason Fitnesse code always ends up as spaghetti code, isn’t reusable and becomes a mess, while it should be considered the entire complete and only truth!</p>

<p>Most tools seem to be very developer focussed, Fitnesse and Cucumber. What other tools can help us accomplish this goal of automating and verifying this trinity? Are there better alternatives?</p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/programming-testing-documentation/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/12/devoxx-be-2014-aftermovie/" title="Devoxx BE 2014: Aftermovie">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Devoxx BE 2014: Aftermovie" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-12-01T12:09:18+01:00" class="date" />
          <span itemprop="datePublished" content="2014-12-01T12:09:18+01:00" class="date">
            Dec 1, 2014 12:09:18
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/devoxx-be-2014-aftermovie/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/12/devoxx-be-2014-aftermovie/">Devoxx BE 2014: Aftermovie</a></h1>

        <span itemprop="articleBody">
          <p>A couple of weeks ago was Devoxx in Antwerp again, the largest annual European Java conference. As always I was there, with my camera, to capture the amazing atmosphere:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/113170080" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>We (me and my colleagues) had a great time, and learned some new things. But most of all, we met great people and received a lot of inspiration. This year I´ve done a short 5 minute Ignite talk on Mutation testing. This was my first ´Ignite´ session and it is hard! The format of an Ignite session is, 20 slides, 5 minutes, auto forward each 20 seconds. This means timing is everything. A 50 minute talk is much easier, you decide when you´ve told enough and press next.</p>

<p>Also, my J-Fall presentation on mutation testing is now available online (50 minutes, in Dutch).</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/aLAcvMI2VBI"></iframe>

<p>⋆Brag⋆ It was voted as best session of the conference with 61 people! Also of all the visitors it was voted second ´most populair´, surpassed by one vote, but the other session had more people in the room!</p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/12/devoxx-be-2014-aftermovie/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/11/the-java-9-kulla-repl/" title="The Java 9 'Kulla' REPL">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="The Java 9 'Kulla' REPL" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-11-27T12:09:20+01:00" class="date" />
          <span itemprop="datePublished" content="2014-11-27T12:09:20+01:00" class="date">
            Nov 27, 2014 12:09:20
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/11/the-java-9-kulla-repl/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/11/the-java-9-kulla-repl/">The Java 9 'Kulla' REPL</a></h1>

        <span itemprop="articleBody">
          <p>Maybe it’ll be part of JDK 9, maybe it won’t… but people are working hard on creating a REPL tool/environment for the Java Development Kit (JDK). More information on the code and the project is available as part of OpenJDK: <a href="http://openjdk.java.net/projects/kulla/">project Kulla</a>.</p>

<p>Some of you might not be familiar with the terminology ‘REPL’, it is short for Read Evaluate Print Loop. It is hard to explain exactly what it does, but very easy to demonstrate:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">|</span>  <span class="n">Welcome</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">REPL</span> <span class="n">mock</span><span class="o">-</span><span class="n">up</span> <span class="o">--</span> <span class="n">Version</span> <span class="mf">0.23</span>
<span class="o">|</span>  <span class="n">Type</span> <span class="o">/</span><span class="n">help</span> <span class="k">for</span> <span class="n">help</span>

<span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello World!"</span><span class="o">);</span>
<span class="n">Hello</span> <span class="n">World</span><span class="o">!</span>

<span class="o">-&gt;</span></code></pre></figure>

<p>The idea is that you have a place you can enter Java and run it, without main method, class structure. You can build instances, and alter them while you type. For example you’ll able to do Swing development while you type:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">-&gt; import javax.swing.*;
-&gt; JFrame frame = new JFrame();
-&gt; frame.setVisible(true);</code></pre></figure>

<p>Now we have a visible frame, you can drag it around, resize it etc.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">-&gt; JPanel panel = new JPanel();
-&gt; frame.add(panel);
-&gt; JButton button = new JButton();
-&gt; panel.add(button);</code></pre></figure>

<p>Suddenly our frame has a panel, and the panel has an empty button! You can prototype, do live coding and you have instant feedback.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">-&gt; button.setText("Push me!");</code></pre></figure>

<p>Now the button has text, but pressing it still does nothing…</p>

<p><a href="/images/Screen-Shot-2014-11-27-at-11.55.08.png"><img src="/images/Screen-Shot-2014-11-27-at-11.55.08-300x159.png" alt="Push me!" class="aligncenter" /></a></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">-&gt; button.addActionListener(e -&gt; System.out.println("Hello World!"));
-&gt; 
Hello World!
Hello World!
Hello World!</code></pre></figure>

<p>And there we go, a final simple lambda creates a working “Hello World!”-button.</p>

<p>It is also possible to load a repl script from file, allowing you to share, store and run scripts. This is done using the ‘/load’ and ‘/save’ commands. You can even ‘/dump’ all the created classes in a directory.</p>

<p>I’m very curious how people will be using the REPL in the future, some use cases:</p>

<ul>
  <li>(GUI) Prototyping</li>
  <li>Live music (like <a href="http://overtone.github.io/">overtone</a>)</li>
  <li>Coding at conferences</li>
  <li>Scripting</li>
  <li><a href="http://codegolf.stackexchange.com/">Code golf!</a></li>
</ul>

<p>If you want to try out Kulla, it took me literally 20 minutes to get up and running on my MacBook. Just follow the instructions on <a href="https://java.net/projects/adoptopenjdk/pages/AdoptOpenJDKBuildInstructions">AdoptOpenJDK</a>, but instead use <a href="http://hg.openjdk.java.net/kulla/dev/">http://hg.openjdk.java.net/kulla/dev/</a> as codebase. After building the JDK, go to ./langtools/repl and look at the README.</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/11/the-java-9-kulla-repl/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/11/kill-all-mutants/" title="Kill all mutants">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Kill all mutants" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-11-18T11:52:35+01:00" class="date" />
          <span itemprop="datePublished" content="2014-11-18T11:52:35+01:00" class="date">
            Nov 18, 2014 11:52:35
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/11/kill-all-mutants/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/11/kill-all-mutants/">Kill all mutants</a></h1>

        <span itemprop="articleBody">
          <p>The post below is the content from my 2014 <a href="http://www.nljug.org/jfall/schedule/2014/">J-Fall</a> and <a href="http://www.devoxx.be/ignite-2014/">Devoxx Ignite</a> presentations. You can check you the slides here:<br />
<a href="http://www.slideshare.net/royvanrijn/kill-the-mutants-a-better-way-to-test-your-tests">http://www.slideshare.net/royvanrijn/kill-the-mutants-a-better-way-to-test-your-tests</a></p>

<h1 id="we-all-do-testing">We all do testing</h1>

<p>In this day and age you aren’t considered a real Java developer if you are not writing proper unit tests.<br />
We all know why this is important:</p>

<ul>
  <li>Instant verification our code works.</li>
  <li>Automatic future regressions tests.</li>
</ul>

<p>But how do we know we are writing proper tests? Well most people use code coverage to measure this. If the percentage of coverage is high enough you are doing a good job.</p>

<h1 id="what-is-a-test">What is a test?</h1>

<p>First let’s look at what a test actually is:</p>

<ol>
  <li>Instantiate classes, setup mocks.</li>
  <li>Invoke something.</li>
  <li>Assert and verify the outcome.</li>
</ol>

<p>Which steps are measured with code coverage? Only steps 1 and 2. And what is the most important thing for a test? It is the third and final step, the assertion, the place where you actually check if the code is working. This is completely ignored by code coverage!</p>

<p>I’ve seen companies where management looks at code coverage reports, they demand the programmers to write 80+ or 90+% coverage because this proves the quality is good enough. What else is a common thing in these organisations? Tests without any real assertion. Tests written purely to boost coverage and please management.</p>

<p>So code coverage says absolutely nothing about the quality of our tests? Well, it does tell you one thing. If you have 0% coverage, you have no tests at all, if you have 100% coverage you might have some very bad tests.</p>

<h1 id="mutation-testing">Mutation testing</h1>

<p>Luckily there is help around the corner, in the form of mutation testing. In mutation testing you create thousands of ‘mutants’ of your codebase. So what is this mutant you might ask? A mutation is a tiny singular change in your codebase.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Before:
</span>
<span class="k">if</span><span class="o">(</span><span class="n">amount</span> <span class="o">&gt;</span> <span class="n">THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// .. do something ..
</span>
<span class="o">}</span>

<span class="c1">// After:
</span>
<span class="k">if</span><span class="o">(</span><span class="n">amount</span> <span class="o">&gt;=</span> <span class="n">THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// .. do something ..
</span>
<span class="o">}</span></code></pre></figure>

<p>For each mutant the unit tests are run and there are a couple of possible outcomes:<img src="/images/mutant_killed-300x225.png" alt="mutant_killed" class="alignright" /></p>

<h1 id="killed">Killed</h1>

<p> </p>

<p>If you are lucky a test will fail. This means we have ‘killed’ our mutant. This is a positive thing, we’ve actually checked that the mutated line of code is correctly asserted by a test. Now we immediately see the advantage of using mutation testing, we actually verify the assertions in our tests.</p>

<h1 id="survived">Survived<img src="/images/mutant_lived-225x300.png" alt="mutant_lived" class="alignright" /></h1>

<p>Another possible outcome is that our mutant has survived, meaning no test fails. This is scary, it means the logic we’ve changed isn’t verified by a test. If someone would (accidentally) make this change in your codebase, the automatic build won’t break.</p>

<p> </p>

<h1 id="tooling">Tooling</h1>

<p>In Java (and other languages as well) there are frameworks for doing mutation testing. One of the most complete and modern frameworks for doing mutation testing in Java is called <a href="http://pitest.org/">PIT</a>. The generation of mutants and the process running the tests is fully automated and easy to use, just as easy as code coverage. There are Maven, Ant, Gradle, Sonarqube, Eclipse and IntelliJ plugins available!</p>

<h1 id="what-about-performance">What about performance?</h1>

<p>Using mutation testing isn’t a silver bullet and it doesn’t come without any drawbacks. The major disadvantage is performance. This is the reason it never took off in the 1980s. At that time it would take an entire evening to run all your unit tests, so people could only dream of creating thousands of mutants and running the tests again. Luckily CPU’s have become a <em>lot</em> faster, and PIT has other tricks to speed up the process.</p>

<p>One thing PIT does is that it uses code coverage! Not as a measurement of the quality of your tests but as a tool. Before creating the mutants PIT calculates the code coverage of all unit tests. Now when PIT creates a mutant of a particular line of code it looks at the tests covering that line. If a line is only covered by three unit tests, it only runs those three tests. This greatly decreases the amount of tests needed to run for each mutation.</p>

<p>There are other tricks as well, for example PIT can track the changes in your codebase. It doesn’t need to create mutants if the code isn’t edited.</p>

<h1 id="summary">Summary</h1>

<p>Code coverage is a horrible way of measuring the quality of your tests. It only says something about the invocations but nothing about the actual assertions. Mutation testing is much better, it gives an accurate report on the quality and you can’t ‘game’ the statistics. The only way to fake mutation coverage is to write real tests with good assertions.</p>

<p>Check it out now: <a href="http://pitest.org/">http://pitest.org</a></p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/11/kill-all-mutants/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/09/building-commander-keen-on-osx/" title="Building Commander Keen on OS/X">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Building Commander Keen on OS/X" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-09-17T16:12:14+02:00" class="date" />
          <span itemprop="datePublished" content="2014-09-17T16:12:14+02:00" class="date">
            Sep 17, 2014 16:12:14
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/09/building-commander-keen-on-osx/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/09/building-commander-keen-on-osx/">Building Commander Keen on OS/X</a></h1>

        <span itemprop="articleBody">
          <p>Below is a build-log on how to build <a href="https://github.com/keendreams/keen">Commander Keen: Keen Dreams</a> (which was recently released on Github) on OS/X using DOSBox and a shareware version found online.</p>

<p>Step 1:</p>

<p>Download and install DOSBox</p>

<p>Step 2:</p>

<p>Download: <a href="http://monkey-hole.co.uk/esa/dos/">Borland C++ 3.0</a><br />
Download: <a href="https://github.com/keendreams/keen">Commander Keen - Keen Dreams</a> source code<br />
Download: <a href="http://www.phatcode.net/downloads.php?id=280">tasm5.zip</a></p>

<p>Step 3:</p>

<p>Create a new folder, this will be your DOSBox mount-point.</p>

<p>Step 4:</p>

<p>Install TASM:<br />
Copy all the contents of the directories DISK1/DISK2/DISK3 from tasm5.zip to \TEMP</p>

<p>Step 5:</p>

<p>Install Borland C++ 3:<br />
Copy all the contents to \BORLANDC.</p>

<p>Step 6:</p>

<p>Copy all the source files from Commander Keen to \KEEN.</p>

<p>Step 7:</p>

<p>Fire up DOSBox, mount the mount folder to C.<br />
Put the following paths to PATH:<br />
SET PATH=C:\BORLANDC\BIN;C:\TASM\BIN;C:\;Z:\</p>

<p>Go into C:\TEMP and run the installer to install TASM.</p>

<p>Go into directory C:\KEEN\STATIC and run ‘make.bat’<br />
In the directory C:\KEEN and run ‘BC’ to start Borland C++.</p>

<p>To change the Borland directories to the correct path go to: Options &gt; Directories and change the paths to C:\BORLANDC\*.</p>

<p>Step 8:</p>

<p>Compile and run! It creates the binary for me KDREAMS.EXE.</p>

<p>But sadly, when I run the executable it says “Can’t open KDREAMS.MAP!” :-(<br />
It turns out you’ll need to own the game’s actual content before you can run this source code.<br />
Thankfully a shareware version can be downloaded here: <a href="ftp://ftp.3drealms.com/share/keendm.zip">keendm.zip</a>. This corresponds with the 1.01S version of the released source code, which is also released <a href="https://github.com/keendreams/keen/tree/44773ae2502192ca553ab6518b644ee75e42dd8b">here</a>.</p>

<p>Copy the missing files (SHL, MAP, AUD, etc) from the shareware version and play your own compiled Commander Keen!</p>

<p>Screenshot:</p>

<p><a href="/images/Screen-Shot-2014-09-18-at-20.32.40.png"><img src="/images/Screen-Shot-2014-09-18-at-20.32.40-300x198.png" alt="Screen Shot 2014-09-18 at 20.32.40" class="aligncenter" /></a></p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/09/building-commander-keen-on-osx/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/08/finding-an-image-in-a-mosaic/" title="Finding an image in a mosaic">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Finding an image in a mosaic" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-08-27T15:33:42+02:00" class="date" />
          <span itemprop="datePublished" content="2014-08-27T15:33:42+02:00" class="date">
            Aug 27, 2014 15:33:42
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/08/finding-an-image-in-a-mosaic/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/08/finding-an-image-in-a-mosaic/">Finding an image in a mosaic</a></h1>

        <span itemprop="articleBody">
          <p>Browsing the Ludum Dare (see <a href="/blog/2014/08/ludum-dare-30-a-dis-connected-world/">previous post</a>) website I found <a href="http://www.ludumdare.com/compo/2014/08/27/all-ld30-games-in-this-mosaic/">this</a> post from a friend Will. He made the following mosaic:</p>

<p><a href="/images/mosaic.jpg"><img src="/images/mosaic.jpg" alt="mosaic" class="aligncenter" /></a></p>

<p>Pretty interesting to see, I’ve already worked with him on improving the algorithm to generate these mosaics <a href="/blog/2014/04/mosaic-algorithm/">in the past</a>. But next he set me a challenge: <em>Find your own game thumbnail, it is in there somewhere!</em></p>

<p>This is the screenshot of my game, used as thumbnail:</p>

<p><a href="/images/target.png"><img src="/images/target-300x187.png" alt="target" class="aligncenter" /></a></p>

<p>So I went though the thumbnails, one time.. and a second time… then I decided to solve it like a real programmer:</p>

<p><img src="/images/mosaic.gif" alt="mosaic" class="aligncenter" /></p>

<p> </p>

<p>How does it work? Well it is pretty simple:</p>

<ol>
  <li>Input #1: mosaic.jpg</li>
  <li>Input #2: Amount of thumbnails width and height</li>
  <li>Input #3: screenshot.png</li>
  <li>The program resizes my game screenshot to the thumbnail size.</li>
  <li>Next it loops over all sub-images of the mosaic.</li>
  <li>For every sub-thumbnail: Calculate the error  (+=<em>Math.abs(mosaicPixelValue - screenshotPixelValue)</em> for each color, for each pixel)</li>
  <li>Store the location of the thumbnail with the smallest error!</li>
</ol>

<p><strong>That is it</strong>, solved it in 10 minutes of coding!<br />
(and another 10 minutes to make the visual conformation and make the animated gif).</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/08/finding-an-image-in-a-mosaic/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/08/ludum-dare-30-a-dis-connected-world/" title="Ludum Dare #30: A (dis-)connected world...">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Ludum Dare #30: A (dis-)connected world..." width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-08-27T15:21:55+02:00" class="date" />
          <span itemprop="datePublished" content="2014-08-27T15:21:55+02:00" class="date">
            Aug 27, 2014 15:21:55
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/08/ludum-dare-30-a-dis-connected-world/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/08/ludum-dare-30-a-dis-connected-world/">Ludum Dare #30: A (dis-)connected world...</a></h1>

        <span itemprop="articleBody">
          <p>Last weekend the 30th Ludum Dare competition took place. For those us you unknown with Ludum Dare, this is a very short international game programming contest. You are allowed to use any tool or language but there are strict rules:</p>

<ol>
  <li>The theme is revealed at the start (and the game must match this theme).</li>
  <li>You get 48 hours, nothing more or less.</li>
  <li>Every image, sprite, song and/or sound effect in the game should be made within these 48 hour.</li>
  <li>The result is open source (but you pick the license).</li>
  <li>You work alone.</li>
</ol>

<p>(There is also a ‘Jam’ version where you can work in teams, can do closed source, can use images/sounds and you have 72 hours)</p>

<p><a href="http://royvanrijn.github.io/"><img src="/images/splash_screen-300x225.png" alt="A (dis)connected world..." class="alignright" /></a></p>

<h1 id="connected-worlds">Connected Worlds</h1>

<p>The theme this year was ‘Connected Worlds’. This is a pretty broad term, so I started to think. How about a world where the main character is on one planet, and his love is on another planet. The planets are tantalisingly close (nearly touching) but out of reach. Our hero has to build a rocket to reach his love.</p>

<h1 id="game-style">Game style</h1>

<p>Last Ludum Dare (LD) I’ve worked on my Javascript skills and produced a little framework. This allows me to easily implement an old-school ‘point and click’-type adventure game. The resulting game should look and feel like the old Monkey Island, Day of the Tentacle games.</p>

<h1 id="drawing-drawing-drawing">Drawing drawing drawing…</h1>

<p>The decision to make a point-n-click game has a huge impact on how I get to spend my time during the contest. This type of game needs a lot of images, sprites and of course fun puzzles. In the end I think I’ve been busy drawing 90% of the time (on paper and in GIMP) and maybe 10% actual programming. After 48 hours my hands were cramped up from all the drawing instead of typing heh (I need a digital draw-tablet).</p>

<h1 id="the-result">The result</h1>

<p>First off, I’ve learned a lot about game design and Javascript programming, also I’ve learned how to draw and edit images much faster. At the start the process from getting an image from paper to coloured digital sprite took a long time, at the end of the contest it was all automatic.</p>

<p>Anyway, I’m pretty pleased with the result, please play it <a href="http://royvanrijn.github.io/">here</a>.<br />
Also, voting is still open, if you have a Ludum Dare account (or sign up) you can cast a vote <a href="http://www.ludumdare.com/compo/ludum-dare-30/?action=preview&amp;uid=12129">here</a>.</p>

<p> </p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/08/ludum-dare-30-a-dis-connected-world/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/07/i-wont-enter-a-teleportation-device-ever/" title="I won't enter a teleportation device, ever.">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="I won't enter a teleportation device, ever." width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-07-16T15:59:04+02:00" class="date" />
          <span itemprop="datePublished" content="2014-07-16T15:59:04+02:00" class="date">
            Jul 16, 2014 15:59:04
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/07/i-wont-enter-a-teleportation-device-ever/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/07/i-wont-enter-a-teleportation-device-ever/">I won't enter a teleportation device, ever.</a></h1>

        <span itemprop="articleBody">
          <p>In the future somebody will inevitably invent a teleport, no doubt about that.</p>

<p>But how will it work?</p>

<h1 id="digital-teleportation">Digital teleportation</h1>

<p>The most likely way to teleport would be to digitalise yourself. Some yet undiscovered very high resolution MRI/CT scanner will scan every atom in your body and send this over to the receiver. This atom printer will build up your entire body again.</p>

<p>However, during a work lunch discussion, I came up with some scary fundamental problems with teleportation.</p>

<h1 id="transactions">Transactions<img src="/images/Teleporter-170x300.png" alt="Teleporter" class="alignleft" /></h1>

<p>What would happen if, during transmission, we get a failure? We don’t want to end up with a failed teleport… which would mean the person getting teleported is dead.</p>

<p>That is why we need to have some kind of two-phase commit. First we digitalise the person, we send this over the line, build the person up on the other side. Once this process has been completed, we ‘delete’ the original copy. Because we don’t want to end up with thousands of clones.</p>

<h1 id="wait-what-delete">Wait… what? Delete?</h1>

<p>What would it feel like stepping into the teleporter? First a copy of you is made, this copy eventually walks out of the receiving end. But what happens to <em>you</em>? You’ll step into a machine, which makes a copy, and disposes <em>you</em>! You’ll be exterminated, killed, pushing up the daisies, your metabolic processes will be history, kicking the bucket, you’ll be an ex-parrot.</p>

<h1 id="you">You…</h1>

<p>Lets not dwell too long on the loss of the old you. Of course YOU are also the one walking out of the teleporter, where nothing has happened but a successful teleport.</p>

<p>But is that really… you?<br />
What defines you?<br />
Are you just a selection of atoms clumped together?</p>

<p>If we make an exact copy, is that still you?</p>

<p>Did you know that (according to some <a href="http://content.time.com/time/magazine/article/0,9171,936455,00.html">research</a>) every year almost 98% of the atoms currently in your body will be replaced? That would mean that a year from now, you will just be 2%… you!</p>

<p><strong>Conclusion</strong>: I hope they won’t invent a teleporter while I’m alive.</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/07/i-wont-enter-a-teleportation-device-ever/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/06/devoxx4kids-uk-2014-the-video/" title="Devoxx4Kids UK 2014: the video">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Devoxx4Kids UK 2014: the video" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-06-22T15:03:44+02:00" class="date" />
          <span itemprop="datePublished" content="2014-06-22T15:03:44+02:00" class="date">
            Jun 22, 2014 15:03:44
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx4kids-uk-2014-the-video/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/06/devoxx4kids-uk-2014-the-video/">Devoxx4Kids UK 2014: the video</a></h1>

        <span itemprop="articleBody">
          <p>The other thing I did while I was in London was volunteer and film at the first UK-based Devoxx4Kids.</p>

<p>Here is my video that sums it all up:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/98852396" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>It was awesome being there, watching the kids play and learn at the same time. The volunteers were absolutely amazing (a lot of them!) and the atmosphere was very relaxed.</p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx4kids-uk-2014-the-video/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/06/devoxx-uk-2014-the-video/" title="Devoxx UK 2014: the video">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Devoxx UK 2014: the video" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-06-18T10:13:30+02:00" class="date" />
          <span itemprop="datePublished" content="2014-06-18T10:13:30+02:00" class="date">
            Jun 18, 2014 10:13:30
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx-uk-2014-the-video/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/06/devoxx-uk-2014-the-video/">Devoxx UK 2014: the video</a></h1>

        <span itemprop="articleBody">
          <p>I’ve been filming again at Devoxx UK, here is the final cut:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/98478630" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>Brings back so many great memories.</p>

<p><em>Including the night in the pub when ‘we’ won against Spain, 5-1</em></p>

        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx-uk-2014-the-video/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/06/devoxx-uk-2014/" title="Review: Devoxx UK 2014">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxx.png" alt="Review: Devoxx UK 2014" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-06-15T00:22:32+02:00" class="date" />
          <span itemprop="datePublished" content="2014-06-15T00:22:32+02:00" class="date">
            Jun 15, 2014 00:22:32
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx-uk-2014/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/06/devoxx-uk-2014/">Review: Devoxx UK 2014</a></h1>

        <span itemprop="articleBody">
          <p>A year ago Devoxx crossed an ocean for the first time. After all the events in Belgium (Antwerp) and France (Paris) a new satellite event was launched in the UK (London). And here I am again, in a London hotel room, after two days of Devoxx UK.</p>

<h1 id="day-1-getting-started">Day 1: Getting started</h1>

<p>With a silly one hour jetlag (which shouldn’t be a thing, but is…) I was awake and at the venue very early. Slowly but surely people started flooding in on the exhibition floor. It quickly became clear there were more visitors than last year. On the exhibition floor a lot of smaller local startups were present. But surprisingly I haven’t had any sales pitch at all, this is something other conferences can learn from. Only genuinely interesting people talking about content.</p>

<p>There was also a corner where Devoxx UK had invited cool upcoming hardware like the <a href="http://nfcring.com/">NFC ring</a> and <a href="http://www.bitcraze.se/">Crazyflie</a> tiny quadcopter. These projects quickly generated a crowd of people shouting: <em>“Shut up and take my money!”</em> The problem was, they didn’t have anything for sale… just an “you can order online”. This is a bit of a shame, I’m pretty sure they are now missing at least a dozen of impulse purchases. They should do something about this next year.</p>

<h1 id="day-1-the-keynote">Day 1: The keynote</h1>

<p>The awesome thing about Devoxx is… the lack of sponsored talks and keynotes. At least, that is how it seems to be. I really haven’t seen any session that even had a hint of sponsor.</p>

<p>This year the keynote speaker was Dan North and he talked about some of his personal experiences. He talked about moments where colleagues did or said things that really affected him and his career. Things you say and do at work might have a lot more influence than you can imagine. The best part of his story (in my opinion) was how a colleague tricked him into pair programming. If you keep asking “hey buddy, can you help me with this?” eventually your ‘buddy’ is just sitting next to you all the time.</p>

<p>During the keynote two amazing artists from <a href="http://smartupvisuals.com/">Smartup Visuals</a> created a drawing of Dan, later they hand customised conference t-shirts for the visitors.</p>

<h1 id="day-1-the-sessions">Day 1: The sessions</h1>

<p>As ‘Devoxx videographer’ I can’t always just pick a session and settle down. Most of the time I walk around and only settle down where there is a good opportunity. The first session I attended was by Venkat Subramaniam who talked about the new Lambda expressions in Java. He is a great clear speaker, to the point.</p>

<p>After filming some more I settled in room 2 with Dick Wall for the second session. His talk is named: “What have the monads ever done for us?”… and as you can guess it is about lambdas as well. His talk was a bit more theoretical, naming all the different theoretical objects and patterns (like monoids, monads and functors). Good talk, great speaker, best lambda related talk I’ve seen yet.</p>

<p>The third sessions I had the chance to see was by James McGivern. He’s a programmer with a math background and he has very similar interests as I do. His talk was about ECC (Elliptic curve cryptography) versus RSA, explaining how these security algorithms and the math involved work. I absolutely loved his talk, everything was explained so clearly it reminded me of <a href="https://www.youtube.com/user/numberphile">Numberphile</a> and <a href="https://www.youtube.com/user/Computerphile">Computerphile</a> (two related YouTube channels I adore).</p>

<p>Instead of following more tracks I got distracted filming the Crazyflie quadcopter and shooting them from the sky using an automatic NERF gun which can only be fired wearing the NFC ring. I also had a nice discussion about the future of affordable hardware and 3d printing with Dick Wall. The thing we did that evening was to attend the IBM Sensor hacking challenge.</p>

<p>In this hands on session we had to form teams of 4-6 people, each team got an Arduino and a set of 30+ sensors which can be attached. The challenge was to build the coolest piece of hardware with this. There was only one rule though: We had to use WebSphere to communicate with the Arduino. This made absolutely no sense at all to me… we ended up having to write JSP pages that send signals to the Arduino to read/write from the sensors. Even worse was the deploy cycle (should not be needed, but was): stop websphere, kill hanging processes, reboot Eclipse (!), start websphere again, deploy new pages.</p>

<p>The winning team was the Crazyflie crew. They took their quadcopter, fired up the Arduino IDE (boo!) and made the firmware in the Arduino language. In the end they could fly the quadcopter with a joystick attached to the Arduino. Clearly this wasn’t according to the only rule we had, but it was just too cool and had to win.</p>

<h1 id="day-2-sessions">Day 2: Sessions</h1>

<p>The second day of Devoxx UK started with a session by two fellow Dutchies, Regina and Linda. They talked about a pattern they found to change things in projects. They all did this in a “Punch and Judy show”-style, which didn’t quite work in my opinion, it was very rusty and read out. Although the underlying message itself is simple and sound, they started calling everything a pattern. It is a good thing to organise brown bag lunch sessions, sure, but please don’t call this a “brown bag pattern”.</p>

<p>The second session of the day was “Is Your Code Parallel-Ready?” by Maurice Naftalin. His session was also about the new lambdas in Java 8. It had a nice buildup and sketched a good problem, the only thing missing was the code of the solution. The solution was described/hinted but I’d love to have seen the actual code there for clarity. The speed of this session was very slow and I didn’t learn anything new, which is a bit of a waste of time.</p>

<p>Next I went to a panel of: Martijn Verburg, Ben Snipe, Stephen Colebourne &amp; Ted Neward. They talked about the patent wars going on now between Google and Oracle. The final conclusion by Stephen was probably the best: Oracle and Google are dumb, dumber and dumbest; neither can stop now and they’ll likely settle.</p>

<p>The title “Modern Web Architecture, 2014 Edition”, by Ted Neward, is a bit misleading. Because 80% of the talk is a big history lesson of the origin of ‘the web’. The final 20% was more about common sense. Don’t get vendor locked in, think about creating a platform with multiple possible entry points, not just a website. Not really what I expected to hear, interesting nonetheless.</p>

<p>The final session was by Arun Gupta and Antonio Goncalves, they quickly went through 50 new features in Java EE 7. For some reason I’m not fond of the way Java EE is going. All the logic is being put in annotations. I predict a new term ‘annotation hell’ which is going to replace the ‘xml hell’ we had a couple of years ago. I’ve been <a href="http://java.dzone.com/articles/reviewing-early-draft-servlet-">warning</a> about this since 2008, and it is getting worse and worse.</p>

<h1 id="final-keynote">Final keynote</h1>

<p>In the final keynote Martijn Verburg summarized the things he learned this Devoxx UK, some of the trends he noticed. There were a lot of lambda talks, maybe a bit too much. A couple of years ago there would have been a lot of alternative language talks (JRuby/Groovy/Scala/etc) but there weren’t a lot of those talks anymore.</p>

<p>Then Dick Wall hit the stage, and actually continued from what we’d been talking about on the first day: cheaper electronics. The Arduino is cool and kind of cheap, so is the Raspberry Pi… but for a real Internet of Things we need devices much smaller and much cheaper. It doesn’t have to do graphics for example! It can probably be a fraction of the cost. Oh and did you know Dick Wall’s dog has a <a href="http://www.fitbit.com/">Fitbit</a>? (true story).</p>

<p>Finally Arun Gupta and Audrey Neveu talked about Devoxx4Kids, which is still gaining a lot of popularity all over the world. But we can always use more volunteers and new events!</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/devoxx-uk-2014/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/06/raspberry-pi-emulation-on-os-x/" title="Raspberry Pi emulation on OS X">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Raspberry Pi emulation on OS X" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-06-04T13:44:42+02:00" class="date" />
          <span itemprop="datePublished" content="2014-06-04T13:44:42+02:00" class="date">
            Jun 4, 2014 13:44:42
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/raspberry-pi-emulation-on-os-x/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/06/raspberry-pi-emulation-on-os-x/">Raspberry Pi emulation on OS X</a></h1>

        <span itemprop="articleBody">
          <h1 id="disclaimerspoiler">Disclaimer/spoiler:</h1>

<p>Building for a Raspberry Pi in an emulator is just as slow as on the actual Pi. There is a slightly faster method involving <a href="http://sentryytech.blogspot.nl/2013/02/faster-compiling-on-emulated-raspberry.html">chroot</a>. But if you really want speed you’ll have to set up a <a href="http://www.openframeworks.cc/setup/raspberrypi/Raspberry-Pi-Cross-compiling-guide.html">cross compiler environment</a> or try <a href="http://www.jaredwolff.com/blog/cross-compiling-on-mac-osx-for-raspberry-pi/">this other cross compiler setup</a>.</p>

<p>Also: Links in the article below seem to be broken and it might not work anymore.</p>

<h1 id="original-outdated-article">Original (outdated) article:</h1>

<p>Today a colleague and I wanted to install <a href="http://gnuradio.org/redmine/projects/gnuradio/wiki/InstallingGR">gnuradio</a> on a Raspberry Pi. This can than be combined with the amazing RTL-SDR dongle. This dongle this is a DVB-T USB stick, but can be turned into full software defined radio.</p>

<p>More information on that can be found here: <a href="http://www.rtl-sdr.com/about-rtl-sdr/">http://www.rtl-sdr.com/about-rtl-sdr/</a>.</p>

<h2 id="compiling-gnuradio">Compiling gnuradio</h2>

<p>When trying to compile gnuradio on the RPi (Raspberry Pi) we followed <a href="http://k1gto.blogspot.nl/2012/09/compiling-gnuradio-on-raspberry-pi-raspi.html">this</a> description. But we quickly ran into a problem, compiling would take 20+ hours!</p>

<p>After running ‘make’ and grabbing a cup of coffee we set ourself a new goal, is it possible to emulate the RPi on our fast Macbook instead?</p>

<h2 id="qemu">qemu</h2>

<p>After following a couple of guides that didn’t work we finally managed to get Qemu up and running, this is what we did:</p>

<ul>
  <li>Install and upgrade Xcode to 4.3 or above</li>
  <li>Install the latest version of <a href="http://mxcl.github.com/homebrew/">Homebrew</a></li>
</ul>

<p>Now we need to modify the Homebrew formula (which downloads and install qemu) to the correct version:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ vi /usr/local/Library/Formula/qemu.rb</code></pre></figure>

<p>I’m using the osx$ prefix for commands that are executed on your OS X machine, pi$ for commands on the virtual Raspberry Pi.</p>

<p>Use the following file to get the working version 1.7.1 (other versions had SCSI problems): <strong>qemu.rb</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">require 'formula'

class Qemu &lt; Formula
  homepage 'http://www.qemu.org/'
  url 'http://wiki.qemu.org/download/qemu-1.7.1.tar.bz2'

  depends_on 'jpeg'
  depends_on 'gnutls'
  depends_on 'glib'

  fails_with :clang do
    build 318
  end

  def install
    system "./configure", "--prefix=#{prefix}",
                          "--cc=#{ENV.cc}",
                          "--host-cc=#{ENV.cc}",
                          "--enable-cocoa",
                          "--disable-bsd-user",
                          "--disable-guest-agent"
    system "make install"
  end
end</code></pre></figure>

<p>After setting qemu.rb to the correct version you can install qemu:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ brew install qemu --env=std --cc=gcc-4.2</code></pre></figure>

<p>Now check if qemu is installed correctly:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ qemu-system-arm -version
QEMU emulator version 1.7.1, Copyright (c) 2003-2008 Fabrice Bellard</code></pre></figure>

<p>Now we need to download two thing:</p>

<ol>
  <li>Linux kernel</li>
  <li>Raspbian image</li>
</ol>

<p>To download the linux kernel:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ curl http://xecdesign.com/downloads/linux-qemu/kernel-qemu &gt; kernel-qemu</code></pre></figure>

<p>Now we’ve downloaded the latest version of the <a href="http://www.raspberrypi.org/downloads/">raspbian image</a>.<br />
In our case: 2014-01-07-wheezy-raspbian.img</p>

<h3 id="first-boot">First boot</h3>

<p>Now it is time to start the image in the emulator:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ qemu-system-arm -cpu arm1176 -m 256 -M versatilepb -no-reboot -serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw init=/bin/bash" -kernel kernel-qemu -hda 2014-01-07-wheezy-raspbian.img</code></pre></figure>

<p>This first boot is a bit special because we only initialize /bin/bash. This is because we need to make two changes to the system:</p>

<p>We need to add a comment to this file:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">pi$ vi /etc/ld.so.preload</code></pre></figure>

<p>Comment this line by placing a # in front of the line:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#/usr/lib/arm-linux-gnueabihf/libcofi_rpi.so</code></pre></figure>

<p>Now create the following file:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">pi$ vi /etc/udev/rules.d/90-qemu.rules</code></pre></figure>

<p>And put in the following content: <strong>90-qemu.rules</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">KERNEL=="sda", SYMLINK+="mmcblk0"
KERNEL=="sda?", SYMLINK+="mmcblk0p%n"
KERNEL=="sda2", SYMLINK+="root"</code></pre></figure>

<p>Now we can stop the emulator and make one final change, the image file is a bit small and we need to increase the size before we continue:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ qemu-img resize 2014-01-07-wheezy-raspbian.img +8G</code></pre></figure>

<p>From now on we can do a normal boot (save this command) by removing the “init=/bin/bash” part:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">osx$ qemu-system-arm -cpu arm1176 -m 256 -M versatilepb -no-reboot -serial stdio -append "root=/dev/sda2 panic=1 rootfstype=ext4 rw" -kernel kernel-qemu -hda 2014-01-07-wheezy-raspbian.img</code></pre></figure>

<p>The last thing we need to do to get our virtual Raspberry Pi up and running is:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">pi$ sudo ln -snf mmcblk0p2 /dev/root
pi$ sudo raspi-config</code></pre></figure>

<p>In this menu, you can “Expand filesystem” to make use of the increased image size (need to reboot afterwards).</p>

<p>Now you are ready to explore the raspberry pi without actually needing one.</p>

<h2 id="broken-sources">(Broken) sources:</h2>
<p><a href="https://github.com/psema4/pine/wiki/Installing-QEMU-on-OS-X">https://github.com/psema4/pine/wiki/Installing-QEMU-on-OS-X</a><br />
<a href="http://xecdesign.com/qemu-emulating-raspberry-pi-the-easy-way/">http://xecdesign.com/qemu-emulating-raspberry-pi-the-easy-way/</a></p>

<p>Some problems we’ve encountered:</p>

<ul>
  <li>qemu raspberry pi boot getting stuck in ‘scsi’ loop (fixed by using version 1.7.1)</li>
  <li>Disk size problems, resize didn’t work, expand filesystem didn’t work (fixed expanding and using ln -snf)</li>
</ul>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/06/raspberry-pi-emulation-on-os-x/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/05/alternative-for-constructors/" title="Alternative for Constructors">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Alternative for Constructors" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-05-12T20:49:14+02:00" class="date" />
          <span itemprop="datePublished" content="2014-05-12T20:49:14+02:00" class="date">
            May 12, 2014 20:49:14
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/05/alternative-for-constructors/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/05/alternative-for-constructors/">Alternative for Constructors</a></h1>

        <span itemprop="articleBody">
          <p>If you want to create an object in Java there is only one way: use <strong>a constructor</strong>.</p>

<h1 id="constructors">Constructors</h1>

<p><a href="http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29">Constructors</a> in Java are different from all other methods. They don’t have a return type and can’t be invoked, only using the <em>new</em> keyword. Other tasks performed by constructors are:</p>

<ol>
  <li>Initialisation of class variables</li>
  <li>Call the default contructor of the superclass if no constructor is present</li>
  <li>Initialisation of instance variables</li>
  <li>Execution of constructor body</li>
</ol>

<p>Here is a common example of a constructor in Java:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

	<span class="c1">//Two mandatory immutable fields</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">firstname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">;</span>
	
	<span class="c1">//Constructor to set the final fields:</span>
	<span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">firstname</span><span class="o">,</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">firstname</span> <span class="o">=</span> <span class="n">firstname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">lastname</span> <span class="o">=</span> <span class="n">lastname</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="o">...</span></code></pre></figure>

<p>If you want to create an <strong>immutable</strong> object in Java you need to have a constructor to initialise the final fields. Lets look at another example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"Roy"</span><span class="o">,</span> <span class="s">"van Rijn"</span><span class="o">,</span> <span class="mi">1983</span><span class="o">,</span> <span class="mi">200</span><span class="o">,</span> <span class="mf">95.0</span><span class="o">,</span> <span class="mf">12.5</span><span class="o">);</span></code></pre></figure>

<p>Immediately a problem becomes clear… if you read the code you have absolutely no idea what all the arguments mean. What is 200? What is 95.0? We have to look at the API or open the code of Person to see what arguments we can supply or have been supplied. Thankfully there is a design pattern that solves this problem, the Builder pattern.</p>

<h1 id="builder-pattern">Builder pattern</h1>

<p>The <a href="http://en.wikipedia.org/wiki/Builder_pattern">builder pattern</a> is an ‘object creation software design pattern’. It can be used to create a immutable objects in a fluent, readable way.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Person</span> <span class="n">me</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span>
		<span class="o">.</span><span class="na">PersonBuilder</span><span class="o">(</span><span class="s">"Roy"</span><span class="o">,</span> <span class="s">"van Rijn"</span><span class="o">)</span>
		<span class="o">.</span><span class="na">birthYear</span><span class="o">(</span><span class="mi">1983</span><span class="o">)</span>
		<span class="o">.</span><span class="na">length</span><span class="o">(</span><span class="mi">200</span><span class="o">)</span>
		<span class="o">.</span><span class="na">weight</span><span class="o">(</span><span class="mf">95.0</span><span class="o">)</span> <span class="c1">// This is what all these numbers mean!</span>
		<span class="o">.</span><span class="na">shoeSize</span><span class="o">(</span><span class="mf">12.5</span><span class="o">)</span>
		<span class="o">.</span><span class="na">build</span><span class="o">();</span></code></pre></figure>

<p>Reading this code is much clearer, we don’t have to guess what the arguments mean, it is crystal clear. So we’ve got a good solution, right? Well, not really, I’ve got a big problem with the Builder pattern. For a simple immutable object as the Person above with just six fields we need the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

	<span class="c1">// The immutable fields</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">firstname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">birthYear</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">length</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">weight</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">shoeSize</span><span class="o">;</span>
	
	<span class="c1">// The private hidden constructor with all fields:</span>
	<span class="kd">private</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">firstname</span><span class="o">,</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="kt">int</span> <span class="n">birthYear</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">,</span> <span class="kt">double</span> <span class="n">weight</span><span class="o">,</span> <span class="kt">double</span> <span class="n">shoeSize</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">firstname</span> <span class="o">=</span> <span class="n">firstname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">lastname</span> <span class="o">=</span> <span class="n">lastname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthYear</span> <span class="o">=</span> <span class="n">birthYear</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">length</span> <span class="o">=</span> <span class="n">length</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">weight</span> <span class="o">=</span> <span class="n">weight</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">shoeSize</span> <span class="o">=</span> <span class="n">shoeSize</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="c1">// A second Builder class with all the fields listed again:</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">PersonBuilder</span> <span class="o">{</span>
		
		<span class="kd">private</span> <span class="n">String</span> <span class="n">firstname</span><span class="o">;</span>
		<span class="kd">private</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kt">int</span> <span class="n">birthYear</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kt">int</span> <span class="n">length</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kt">double</span> <span class="n">weight</span><span class="o">;</span>
		<span class="kd">private</span> <span class="kt">double</span> <span class="n">shoeSize</span><span class="o">;</span>
		
		<span class="kd">public</span> <span class="nf">PersonBuilder</span><span class="o">(</span><span class="n">String</span> <span class="n">firstname</span><span class="o">,</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">firstname</span> <span class="o">=</span> <span class="n">firstname</span><span class="o">;</span>
			<span class="k">this</span><span class="o">.</span><span class="na">lastname</span> <span class="o">=</span> <span class="n">lastname</span><span class="o">;</span>
		<span class="o">}</span>
		
		<span class="c1">// All 'setters' with a fluent interface:</span>
		<span class="kd">public</span> <span class="n">PersonBuilder</span> <span class="nf">birthYear</span><span class="o">(</span><span class="kt">int</span> <span class="n">birthYear</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">birthYear</span> <span class="o">=</span> <span class="n">birthYear</span><span class="o">;</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kd">public</span> <span class="n">PersonBuilder</span> <span class="nf">length</span><span class="o">(</span><span class="kt">int</span> <span class="n">length</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">length</span> <span class="o">=</span> <span class="n">length</span><span class="o">;</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kd">public</span> <span class="n">PersonBuilder</span> <span class="nf">weight</span><span class="o">(</span><span class="kt">double</span> <span class="n">d</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">weight</span> <span class="o">=</span> <span class="n">d</span><span class="o">;</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="kd">public</span> <span class="n">PersonBuilder</span> <span class="nf">shoeSize</span><span class="o">(</span><span class="kt">double</span> <span class="n">shoeSize</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">shoeSize</span> <span class="o">=</span> <span class="n">shoeSize</span><span class="o">;</span>
			<span class="k">return</span> <span class="k">this</span><span class="o">;</span>
		<span class="o">}</span>
	
		<span class="c1">// Finally a build method that calls the hidden constructor:</span>
		<span class="kd">public</span> <span class="n">Person</span> <span class="nf">build</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">return</span> <span class="k">new</span> <span class="nf">Person</span><span class="o">(</span><span class="n">firstname</span><span class="o">,</span> <span class="n">lastname</span><span class="o">,</span> <span class="n">birthYear</span><span class="o">,</span> <span class="n">length</span><span class="o">,</span> <span class="n">weight</span><span class="o">,</span> <span class="n">shoeSize</span><span class="o">);</span>
		<span class="o">}</span>
		
	<span class="o">}</span></code></pre></figure>

<p>Woah… that is a stupendous amount of code just for a better readable immutable way of object construction. I don’t have a good solution for this problem, the Java language doesn’t have a good way to construct objects (especially immutable objects) in a readable manner. Constructors end up having a lot of confusing nameless arguments; or you’ll have to write a huge Builder class with a nice fluent interface.</p>

<p>The Java language is constantly evolving and there are now <a href="http://cr.openjdk.java.net/~jrose/values/values-0.html">proposals</a> to add ‘value types’ in Java. Reading through the proposal it seems the only way to construct the value type will be using the constructor, but I’m afraid this will quickly become a burden again. I’d love to have a better way to construct objects and (in the future) values, although I have no idea what it should look like. I’d love to have a fluent way of object creation without having to code a big Builder class, preferably in the language itself.</p>

<p>Would it be possible to change to language in a backwards compatible way to allow this?</p>

<p>One possibility would be to ‘steal’ from other languages, for example <a href="http://en.wikipedia.org/wiki/Moose_perl">Moose Perl</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">firstname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">birthYear</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">length</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">double</span> <span class="n">weight</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kt">double</span> <span class="n">shoeSize</span><span class="o">;</span>
	
        <span class="c1">// Full constructor</span>
	<span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">firstname</span><span class="o">,</span> <span class="n">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="kt">int</span> <span class="n">birthYear</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">,</span> <span class="kt">double</span> <span class="n">weight</span><span class="o">,</span> <span class="kt">double</span> <span class="n">shoeSize</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">firstname</span> <span class="o">=</span> <span class="n">firstname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">lastname</span> <span class="o">=</span> <span class="n">lastname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">birthYear</span> <span class="o">=</span> <span class="n">birthYear</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">length</span> <span class="o">=</span> <span class="n">length</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">weight</span> <span class="o">=</span> <span class="n">weight</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">shoeSize</span> <span class="o">=</span> <span class="n">shoeSize</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">...</span>
<span class="c1">// Made up syntax, similar to Moose, providing syntactic sugar.</span>
<span class="c1">// Leaves the other fields null, compile error if final fields aren't set.</span>
<span class="n">Person</span> <span class="n">me</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="n">firstname</span> <span class="o">=&gt;</span> <span class="s">"Roy"</span><span class="o">,</span> <span class="n">lastname</span> <span class="o">=&gt;</span> <span class="s">"van Rijn"</span><span class="o">,</span> <span class="n">birthYear</span> <span class="o">=&gt;</span> <span class="mi">1983</span><span class="o">);</span></code></pre></figure>

<p>This has the readability advantage and has the flexibility of the Builder pattern (not needing dozens of overloaded constructors).</p>

<p>Would something like this be a good addition to the Java language?</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/05/alternative-for-constructors/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a itemprop="mainEntityOfPage" href="/blog/2014/05/solving-a-18-year-old-core-war-mystery/" title="Solving a 18-year-old Core War mystery">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Solving a 18-year-old Core War mystery" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="dateModified" content="2014-05-03T22:57:56+02:00" class="date" />
          <span itemprop="datePublished" content="2014-05-03T22:57:56+02:00" class="date">
            May 3, 2014 22:57:56
          </span>
          : <a class="post-comments" href="https://royvanrijn.com/blog/2014/05/solving-a-18-year-old-core-war-mystery/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2014/05/solving-a-18-year-old-core-war-mystery/">Solving a 18-year-old Core War mystery</a></h1>

        <span itemprop="articleBody">
          <p>As some readers might know, I sometimes play a programming game called <a href="/blog/2009/12/corewars-an-introduction-to-hostile-programming/">Core War</a>. This afternoon I was browsing through some old ‘Core Warrior’ newsletters which John Metcalf has collected <a href="http://corewar.co.uk/cw/">here</a>. When reading an article about an old successful warrior called ‘Thermite II’ I came across this tiny unsolved mystery:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">-- Bug?

John K.W. mailed me with a tiny, suicidal warrior which managed to beat
Thermite once in two hundred times. All I can imagine is that, that one
time, I somehow scanned his code within its few cycles of life, and that
then I crashed as a result. But how?

Program "Thermite II" (length 100) by "Robert Macrae"
;strategy Same old strategy, but nastier...
Killing Hazy Shade Of Winter III wins: 1
Thermite II wins: 199
Ties: 0

How did I get a win against Thermite?!?!
Here is an EXACT copy of what I sent to Pizza...
Thermite would've had to die within 3 cycles! ... :/

;redcode-94
;name Killing Hazy Shade Of Winter III
;kill Hazy Shade Of Winter III
;author John K W

p: ldp.b #0, #0
jmp &lt;-1

Any ideas, anyone :-?</code></pre></figure>

<p>Source: <a href="http://corewar.co.uk/cw/cw024.txt">http://corewar.co.uk/cw/cw024.txt</a></p>

<p>When executing the code of the second warrior “Killing Hazy Shade Of Winter III” I noticed there is a false assumption in the email. The warrior doesn’t need to die in three cycles!</p>

<p>The first round it’ll execute:</p>

<p>LDP.B #0,#0 (and become LDP.B #0,#-1)</p>

<p>Then it executes:</p>

<p>JMP &lt;-1 (to a location two higher than the warrior, which is usually empty code… but not always!)</p>

<p>The final line in Thermite’s code is a JMP instruction to the launch-instruction which loads Thermite’s bomber ‘Brand’. If John K W’s warrior was loaded at a position 100 or 101 from Thermite it would parasite into the bomber and become Brand before Thermite itself does. This is how the small seemingly suicidal warrior can kill Thermite.</p>

<p>After 18 years, <strong>Q.E.D.</strong> :-)</p>


        </span>

        <p class="post-meta">
          <a class="post-comments" href="https://royvanrijn.com/blog/2014/05/solving-a-18-year-old-core-war-mystery/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  

  <!-- Pagination -->
  
  <div class="pagination">
    <div class="pagination-center">
    
      <div class="pagination-item"><a href="/page/3">&laquo; Prev</a></div>
    

    
      
        <div class="pagination-item"><a href="/index.html">1</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/2">2</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/3">3</a></div>
      
    
      
        <div class="pagination-item"><strong>4</strong></div>
      
    
      
        <div class="pagination-item"><a href="/page/5">5</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/6">6</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/7">7</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/8">8</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/9">9</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/10">10</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/11">11</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/12">12</a></div>
      
    

    
      <div class="pagination-item"><a href="/page/5">Next &raquo;</a></div>
    
    </div>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <span class="svg-icon linkedin">Connect on LinkedIn</span>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <span class="svg-icon stackoverflow">Follow me on StackOverflow</span>
        </a>

        <a href="https://github.com/royvanrijn">
          <span class="svg-icon github">Follow me on GitHub</span>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <ispan class="svg-icon twitter">Follow me on Twitter</span>
        </a>
          
        <a href="/feed/index.xml">
          <span class="svg-icon rss">Check out the RSS feed</span>
        </a>
	  </div>
    
    </div>

  </div>

</footer>


  </body>

</html>
