<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>royvanrijn  | Java, algorithms, math, science and more!</title>
  <meta name="description" content="Java, algorithms, math, science and more!">
  
  <meta name="keywords" content="royvanrijn,programming,java,blog,devoxx,conference,speaker,technology,science,math,azspcs,tips,tricks" />
  
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://royvanrijn.com/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="http://royvanrijn.com/feed/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@royvanrijn" />
  <meta name="twitter:title" content="royvanrijn" />
  <meta name="twitter:description" content="Java, algorithms, math, science and more!" />
  
  <meta name="twitter:image" content="http://www.royvanrijn.com/thumbnails/default.jpg"/>
  

<script>
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-1', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn';
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" width="990" height="307"/>
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <hr/>
  <!-- This loops through the paginated posts -->
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2018/05/java-and-docker-memory-limits/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/docker.png" alt="Java and Docker, the limitations" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2018-05-02T16:14:11+02:00" class="date">
            May 2, 2018 16:14:11
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2018/05/java-and-docker-memory-limits/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2018/05/java-and-docker-memory-limits/">Java and Docker, the limitations</a></h1>

        <span itemprop="articleBody">
          <h1 id="tldr">TLDR;</h1>

<p>Java and Docker aren’t friends out of the box. Docker can set memory and CPU limitations that Java can’t automatically detect. Using either Java Xmx flags (cumbersome/duplicated) <em>or</em> the new experimental JVM flags we can solve this issue.</p>

<p><a href="https://blog.docker.com/2018/04/improved-docker-container-integration-with-java-10/">Docker love</a> for Java is in its way in newer versions of both OpenJ9 and OpenJDK 10!</p>

<h1 id="mismatch-in-virtualization">Mismatch in virtualization</h1>

<p>The combination of Java and Docker isn’t a match made in heaven, initially it was far from it. For starters, the whole premise of the JVM, Java Virtual Machine, was that having a Virtual Machine makes the underlying hardware irrelevant from the program’s point of view.</p>

<p>So what do we gain by packaging our Java application inside a JVM (Virtual Machine) inside a Docker container? Not a lot, for the most part you are duplicating JVMs and Linux containers, which kills memory usage. This just sounds silly.</p>

<p>It does make it easy to bundle together your program, the settings, a specific JDK, Linux settings and (if needed) an application server and other tools as one ‘thing’. This complete container has a better level of encapsulation from a devops/cloud point of view.</p>

<h2 id="problem-1-memory">Problem 1: Memory</h2>

<p>Most applications in production today are still using Java 8 and this might give you problems. Java 8 doesn’t work well with Docker. The problem is the amount of memory and CPUs available isn’t the amount of memory and CPU of <em>your machine</em>, it is what <em>Docker</em> is allowing you to use (duh).</p>

<p>For example if you limit your Docker container to have 500MB of memory, this isn’t something Java is aware of. Java doesn’t see this limit.</p>

<p>To fix this you will <strong>also</strong> need to specify to Java there is a maximum memory limit. You’ll need to specify this <em>inside</em> your container, at the wrong abstraction if you ask me. If you forget to tell the JVM there is a limit set by Docker you’ll have a problem. Docker will take action into its own hands and kill the process inside the container if too much memory is used! The Java process is ‘Killed’. This is not what we want…</p>

<p>From Java 9 onwards (and from 8u131+, this was backported) there have been extra options added to the JVM:</p>

<p><em>-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap</em></p>

<p>If you add these flags the JVM will look at the Linux <em>cgroup</em> configuration. This is where Docker containers specify their maximum memory settings. Now, if your application reaches the limit set by Docker (500MB), the JVM will see this limit. It’ll try to GC. If it still runs out of memory the JVM will do what it is supposed to do, throw an OutOfMemoryException. Basically this allows the JVM to ‘see’ the limit that has been set by Docker.</p>

<p>In the future Oracle wants to make these properties the new default.</p>

<h2 id="problem-2-cpu">Problem 2: CPU</h2>

<p>The second problem is that Java doesn’t understand Docker’s memory settings is solved in Java 9, but there is a similar problem with the CPU. In short, the JVM will look at the hardware and detect the amount of CPU’s and it’ll optimize to use those CPU’s. But again, Docker won’t allow you to <strong>use</strong> all these CPU’s, there is a mismatch here. Sadly this isn’t fixed in Java 9, but was tackled in Java 10.</p>

<p>From Java 10 onwards the available CPUs will be calculated in a different way (by default) fixing this problem.</p>

<h1 id="testing-java-and-docker-memory-handling">Testing Java and Docker memory handling</h1>

<p>As a fun exercise, lets verify and test how Docker handles out of memory using a couple of different JVM versions/flags and even a different JVM.</p>

<p>First we create a test application, one that simply ‘eats’ memory and doesn’t free it.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemEat</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">List</span> <span class="n">l</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">byte</span> <span class="n">b</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1048576</span><span class="o">];</span>
            <span class="n">l</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
            <span class="n">Runtime</span> <span class="n">rt</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">();</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">"free memory: "</span> <span class="o">+</span> <span class="n">rt</span><span class="o">.</span><span class="na">freeMemory</span><span class="o">()</span> <span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>We can start Docker containers and run this application to see what will happen.</p>

<h2 id="test-1-java-8u111">Test 1: Java 8u111</h2>

<p>First we’ll start with a container that has an older version of Java 8 (update 111).</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker run -m 100m -it java:openjdk-8u111 /bin/bash</code></pre></figure>

<p>We compile and run the MemEat.java file:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">javac MemEat.java

java MemEat
...
free memory: 67194416
free memory: 66145824
free memory: 65097232
Killed</code></pre></figure>

<p>As expected, Docker has killed the our Java process. Not what we want (!). Also you can see the output, Java thinks it still has a lot of memory left to allocate.</p>

<p>We can fix this by providing Java with a maximum memory using the <em>-Xmx</em> flag:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">javac MemEat.java

java -Xmx100m MemEat
...
free memory: 1155664
free memory: 1679936
free memory: 2204208
free memory: 1315752
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
	at MemEat.main(MemEat.java:8)</code></pre></figure>

<p>After providing our own memory limits, the process is halted correctly, the JVM understands the limits it is operating under. The <strong>problem</strong> is however that you are now setting these memory limits <strong>twice</strong>, for Docker <em>AND</em> for the JVM.</p>

<h2 id="test-2-java-8u144">Test 2: Java 8u144</h2>

<p>As mentioned, with the new flags this has been fixed, the JVM will now follow the settings provided by Docker. We can test this using a newer JVM.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker run -m 100m -it adoptopenjdk/openjdk8 /bin/bash</code></pre></figure>

<p>(this OpenJDK Java image currently contains, at the time of writing, Java 8u144)</p>

<p>Next we compile and run the MemEat.java file again without any flags:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">javac MemEat.java

java MemEat
...
free memory: 67194416
free memory: 66145824
free memory: 65097232
Killed</code></pre></figure>

<p>The same problem exists. But we can now supply the experimental flags mentioned above:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">javac MemEat.java
java -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap MemEat
...
free memory: 1679936
free memory: 2204208
free memory: 1155616
free memory: 1155600
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
	at MemEat.main(MemEat.java:8)</code></pre></figure>

<p>This time we didn’t set any limits on the JVM by telling it what the limits <em>are</em>, we just told the JVM to look at the correct settings! Much better.</p>

<h2 id="test-3-java-10u23">Test 3: Java 10u23</h2>

<p>Some people in the comments and on Reddit mentioned that Java 10 solves everything by making the experimental flags the new default.
This behaviour can be turned off by disabling this flag: -XX:-UseContainerSupport.</p>

<p>I tested this but initially it didn’t work. At the time of writing this the OpenJDK10 Docker image has JVM jdk-10+23. This JVM doesn’t understand the ‘UseContainerSupport’ flag and the process was killed.</p>

<h2 id="test-4-java-10u46-nightly">Test 4: Java 10u46 (Nightly)</h2>

<p>But after starting the ‘nightly’ build of AdoptAJDK OpenJDK 10, it did work:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker run -m 100m -it adoptopenjdk/openjdk10:nightly /bin/bash</code></pre></figure>

<p>There is a problem in this nightly build, the exported path still points to 10+23, not to the packaged 10+46, we need to fix this:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">export PATH=$PATH:/opt/java/openjdk/jdk-10+46/bin/

javac MemEat.java

java MemEat
...
free memory: 3566824
free memory: 2796008
free memory: 1480320
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
  at MemEat.main(MemEat.java:8)</code></pre></figure>

<p>Succes! Without providing any flags Java 10 correctly detected Dockers memory limits.</p>

<h2 id="test-5-openj9">Test 5: OpenJ9</h2>

<p>I’ve also been experimenting with OpenJ9 recently, this free alternative JVM has been open sourced from IBMs J9 and is now maintained by Eclipse. It is fast and is very good with memory management, mindblowlingly good, often using up to 30-50% less memory for our microservices. This almost makes it possible to classify Spring Boot apps as ‘micro’ with a 100-200mb runtime nstead of 300mb+. I’m planning on doing a write-up about this very soon.</p>

<p>To my surprise however, OpenJ9 doesn’t yet have an option similar to the flags currently (backported) in Java 8/9/10+ for cgroup memory limits. For example if we apply the previous testcase to the latest AdoptAJDK OpenJDK 9 + OpenJ9 build:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker run -m 100m -it adoptopenjdk/openjdk9-openj9 /bin/bash</code></pre></figure>

<p>And we add the OpenJDK flags (which are ignored by OpenJ9) we get:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">java -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap MemEat
...
free memory: 83988984
free memory: 82940400
free memory: 81891816
Killed</code></pre></figure>

<p>Oops, the JVM is killed by Docker again.</p>

<p>I really hope a similar option will be added soon to OpenJ9, because I’d love to run this in production without having to specify the maximum memory twice. Eclipse/IBM is working on a fix for this, there are already issues and even pull requests for this issue.</p>

<p><strong>UPDATE: (not recommended hack)</strong></p>

<p>A slightly ugly/hacky way to fix this is using the following composed flag:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">java -Xmx`cat /sys/fs/cgroup/memory/memory.limit_in_bytes` MemEat
...
free memory: 3171536
free memory: 2127048
free memory: 2397632
free memory: 1344952
JVMDUMP039I Processing dump event "systhrow", detail "java/lang/OutOfMemoryError" at 2018/05/15 14:04:26 - please wait.
JVMDUMP032I JVM requested System dump using '//core.20180515.140426.125.0001.dmp' in response to an event
JVMDUMP010I System dump written to //core.20180515.140426.125.0001.dmp
JVMDUMP032I JVM requested Heap dump using '//heapdump.20180515.140426.125.0002.phd' in response to an event
JVMDUMP010I Heap dump written to //heapdump.20180515.140426.125.0002.phd
JVMDUMP032I JVM requested Java dump using '//javacore.20180515.140426.125.0003.txt' in response to an event
JVMDUMP010I Java dump written to //javacore.20180515.140426.125.0003.txt
JVMDUMP032I JVM requested Snap dump using '//Snap.20180515.140426.125.0004.trc' in response to an event
JVMDUMP010I Snap dump written to //Snap.20180515.140426.125.0004.trc
JVMDUMP013I Processed dump event "systhrow", detail "java/lang/OutOfMemoryError".
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
  at MemEat.main(MemEat.java:8)</code></pre></figure>

<p>In this case the heap size is limited to the memory allocated to the Docker instance, this works for older JVMs and OpenJ9. This is of course <em>wrong</em> because the container itself and other parts of the JVM off the heap also use memory. But it seems to work, appearantly Docker is lenient in this case. Maybe some bash-guru will make a better version subtracting a portion from the bytes for other processes.</p>

<p>Anyway, <strong>don’t</strong> do this, it might not work.</p>

<h2 id="test-6-openj9-nightly">Test 6: OpenJ9 (Nightly)</h2>

<p><strong>UPDATE 2: FIXED IN NIGHYLY</strong></p>

<p>If you run the following image:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker run -m 100m -it adoptopenjdk/openjdk9-openj9:nightly /bin/bash</code></pre></figure>

<p>You’ll get the latest nightly build of OpenJ9. In this image it has two things:</p>

<ol>
  <li>The PATH parameter is broken, fix that</li>
  <li>The JVM has a new flag that fixes everything for OpenJ9 (like Java 10 will)</li>
</ol>

<figure class="highlight"><pre><code class="language-text" data-lang="text">/opt/java/openjdk/jdk-9.0.4+12/bin/java -XX:+UseContainerSupport MemEat
...
free memory: 5864464
free memory: 4815880
free memory: 3443712
free memory: 2391032
JVMDUMP039I Processing dump event "systhrow", detail "java/lang/OutOfMemoryError" at 2018/05/15 21:32:07 - please wait.
JVMDUMP032I JVM requested System dump using '//core.20180515.213207.62.0001.dmp' in response to an event
JVMDUMP010I System dump written to //core.20180515.213207.62.0001.dmp
JVMDUMP032I JVM requested Heap dump using '//heapdump.20180515.213207.62.0002.phd' in response to an event
JVMDUMP010I Heap dump written to //heapdump.20180515.213207.62.0002.phd
JVMDUMP032I JVM requested Java dump using '//javacore.20180515.213207.62.0003.txt' in response to an event
JVMDUMP010I Java dump written to //javacore.20180515.213207.62.0003.txt
JVMDUMP032I JVM requested Snap dump using '//Snap.20180515.213207.62.0004.trc' in response to an event
JVMDUMP010I Snap dump written to //Snap.20180515.213207.62.0004.trc
JVMDUMP013I Processed dump event "systhrow", detail "java/lang/OutOfMemoryError".
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space</code></pre></figure>

<p><strong>TADAAA</strong>, a fix is on the way!</p>

<h1 id="conclusion">Conclusion</h1>

<p>If you are running Java inside a Docker container, make sure that you have:</p>

<p>Dockers memory limits defined <strong>AND:</strong></p>

<ol>
  <li>The proper Java -Xmx flags <strong>OR</strong></li>
  <li>A JDK that knows about cgroups and use the UseCGroupMemoryLimitForHeap flags</li>
</ol>

<p>If you have the option, go for JDK 10 which has better CPU calculation support.</p>

<p>If you want to use OpenJ9 (which I highly recommend for bringing down your memory footprint in production) you’ll still need to set both Docker <strong>and</strong> JVM memory limits with -Xmx.</p>

<p>Soon both Java 10 and OpenJ9 will have correct fixes in place, probably as a default (with the -XX:+UseContainerSupport flag).</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2018/05/java-and-docker-memory-limits/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2018/01/updating-dependencies-in-microservices/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="In a microservices landscape; When do you update?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2018-01-17T10:28:12+01:00" class="date">
            Jan 17, 2018 10:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2018/01/updating-dependencies-in-microservices/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2018/01/updating-dependencies-in-microservices/">In a microservices landscape; When do you update?</a></h1>

        <span itemprop="articleBody">
          <p>This week I’ve been stuggling with the following question:</p>

<blockquote>
  <p>When is the right time to upgrade?</p>
</blockquote>

<p>By upgrading, I mean everything: libraries, tools, Java versions, application servers, MQ servers…</p>

<p>My current project uses a reactive upgrade policy, we upgrade for four reasons:</p>

<ol>
  <li>Something is broken and fixed in a later version</li>
  <li>We need or want to use a new feature</li>
  <li>Support for a version we’re using is being dropped</li>
  <li>The old version we’re using has a known security issue/CVE</li>
</ol>

<p>The first two reasons are entirely up to the programmers to decide. The third reason is up to the company that gives us support. For the fourth upgrade reason, security, we have some automation in place. We are using the <a href="https://www.owasp.org/index.php/OWASP_Dependency_Check">OWASP dependency checker</a> Maven plugin for our libraries.</p>

<p>But:</p>
<ul>
  <li>Is a reactive update policy good enough?</li>
  <li>Are there any pro-active strategies?</li>
  <li>Do you want to invest in keeping your microservices up-to-date?</li>
  <li>Do you let your services deteriorate and dispose, replace them in the future with new technologies?</li>
</ul>

<p>More on this in my (kind-of-weekly) vlog:</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/LRE-feZWmlM"></iframe>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2018/01/updating-dependencies-in-microservices/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2018/01/java-9-adoptation/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Fear of upgrading to Java 9, is it justified?" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2018-01-17T10:28:12+01:00" class="date">
            Jan 17, 2018 10:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2018/01/java-9-adoptation/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2018/01/java-9-adoptation/">Fear of upgrading to Java 9, is it justified?</a></h1>

        <span itemprop="articleBody">
          <p>It seems that the adoptation of Java 9 is slow, very slow. In a <a href="https://twitter.com/royvanrijn/status/950718660641017856">Twitter poll</a> this week I asked:
“Which version of Java are you using in production?”</p>

<p>The poll got almost 300 replies and to my surprise just 3% of the respondents are using Java 9 at the moment. Most are using Java 8 and there are even more people using Java 6… So what is holding people back? Why is almost no-one using Java 9?</p>

<p>It turns out a lot of people are scared to upgrade to Java 9. They think it’ll be hard to do, libraries and tools will fail them. They are scared for another Jar-hell.</p>

<p>That is why I took one of my larger projects, that has been running in production for a long time, and try to upgrade it to Java 9.</p>

<h2 id="upgrading-walk-in-the-park-or-walk-in-jar-hell">Upgrading: Walk in the park or walk in jar-hell?</h2>

<p>Here are my results and findings, in a new format: <strong>a vlog</strong></p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/tKUNMyZ9LEU"></iframe>

<p>If you like the vlog and follow my website, please subscribe to my channel on YouTube!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2018/01/java-9-adoptation/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2017/06/inverse-conways-law/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/default.jpg" alt="Inverse Conway's law" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2017-06-22T14:28:12+02:00" class="date">
            Jun 22, 2017 14:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2017/06/inverse-conways-law/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2017/06/inverse-conways-law/">Inverse Conway's law</a></h1>

        <span itemprop="articleBody">
          <p>Today I got to present at <a href="http://www.devoxx.pl">Devoxx Poland</a> on being agile and managing your architecture.</p>

<p>One of the points I made during the talk had to do with Conway’s Law. For those unfamiliar with it, here it is:</p>

<blockquote>
  <p>organizations which design systems … are constrained to produce designs which are copies of the communication structures of these organizations <cite>M. Conway</cite></p>
</blockquote>

<p>This basically means that the code you create is likely to reflect the way the people and teams in your company communicate. For example, banks are usually pretty strict and have a tendency to document things. The code written at banks in turn have the tendency to use SOAP for example, verbose and strict.</p>

<p>The project I’m currently working on has a very agile mindset, we change a lot and have open communication. This reflects in our codebase as well, all the code is easy to understand and easy to change (thankfully!).</p>

<p>But lately we’ve started to move away from our old monolith and we’ve began cutting it up into microservices. That’s when I noticed something odd, which I call the <strong>Inverse Conway’s Law</strong> (maybe it is <strong>Roy’s Law</strong>?):</p>

<blockquote>
  <p>organisations which radically change their system design should expect changes in communication structure <cite>Roy van Rijn</cite></p>
</blockquote>

<p>What does this mean?</p>

<p>We’ve started to move towards a microservice environment, where each team has a responsibility over a couple of services. They’ve developed it and they <em>own</em> it. This ownership completely changed the culture in our team. Up to now if the monolithic backend was broken or offline, everyone was hurting and everyone wanted to fix this as soon as possible. With microservices, this is gone. The first thing we now do is check which microservice failed. If it isn’t theirs, it is not their problem, it’s someone elses problem now!</p>

<p>This is just one example on how changing the design of our system changed the culture and team dynamic. It is one thing that sounds logical when you think about it, but I didn’t expect this before we started the transition.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2017/06/inverse-conways-law/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2017/02/javaone-rock-star-2016/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/rockstar.png" alt="JavaOne Rock Star 2016" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2017-02-01T09:28:12+01:00" class="date">
            Feb 1, 2017 09:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2017/02/javaone-rock-star-2016/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2017/02/javaone-rock-star-2016/">JavaOne Rock Star 2016</a></h1>

        <span itemprop="articleBody">
          <p>Today I got an email with the subject: “Congratulations JavaOne 2016 Rock Star!”. It turns out the JavaOne 2016 Ignite session was voted enough to receive a JavaOne <a href="https://www.oracle.com/javaone/rock-star-wall-of-fame.html">Rock Star</a> Award!</p>

<p>I was so excited, elated even!</p>

<p><img src="/images/rockstar1.gif" alt="Rocking that talk" /></p>

<p>But I quickly found out that the JavaOne Rock Star lifestyle <strong>isn’t</strong> as much fun as it sounds.</p>

<ul>
  <li>Being 3 hours late for a meeting, even a Rock Star can’t do that.</li>
  <li>Peeing in the corner of your office while holding a bottle of Jack Daniels, still not appreciated.</li>
  <li>Wearing ripped jeans, a leather jacket and other than that just chest hair, is considered <em>too</em> casual.</li>
  <li>The groupies? It is like answering random Stack Overflow questions, non-stop, face to face.</li>
  <li>After each coding session, smashing your MacBook on the floor… quickly becomes expensive.</li>
</ul>

<p><img src="/images/drunk-wombat.jpg" alt="Drunk Wombat holding bottle of Jack Daniels" class="aligncenter" /></p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2017/02/javaone-rock-star-2016/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2017/01/vikipedia-a-java-youtube-bot/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/java.png" alt="Vikipedia: A Java YouTube bot" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2017-01-30T13:28:12+01:00" class="date">
            Jan 30, 2017 13:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2017/01/vikipedia-a-java-youtube-bot/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2017/01/vikipedia-a-java-youtube-bot/">Vikipedia: A Java YouTube bot</a></h1>

        <span itemprop="articleBody">
          <p>YouTube, the future of television. I’ve got a lot of subscriptions to YouTube channels that deliver quality content, and those shows are ‘cast’ (using my Chromecast) to my TV. Another thing I often do is look up information, for example I watch talks from programming conferences like <a href="https://www.youtube.com/channel/UCCBVCTuk6uJrN3iFV_3vurg/videos">Devoxx</a> using YouTube.</p>

<p>This gave me an idea, what if I can take some free information (like Wikipedia, all creative commons) and use that to create content for YouTube? Maybe I’ll even get some views :-)</p>

<p>So this is what I’ve come up with, the following video is generated completely automatically:</p>

<iframe id="randomVikipediaVideo" width="560" height="315" src="https://www.youtube.com/channel/UCSjEbLaNj1yKFgQpjLoqkUw" frameborder="0" allowfullscreen=""></iframe>

<script>

function nextVideo(autoplay) {

    /* Don't always insert the same video in the article, spread the views across the videos randomly: */
    var iframe = document.getElementById('randomVikipediaVideo');
    var allVideos = ["dw_HP2AeYIU","VXNElLG9t_Q","2shv5Fv7ZNg","mnYrSUiLIgg","N45qnVlEAHw","1qBaUYcXJWM","ayZCJizN604","Z6N4bJDs9m4","AX4Ex5nYQqM","w9QF30yOGag","gruzWYNhE04","5rKxcZKIOP0","T-QvHcEMHEc","I4BR-pA9APc","QsbM9R0qAWE","4kPdhwVCAck","vV3JjOLOc0o","YU1UFQr9ezA","-6XJK7-L4Qk","1Uxn51TtA24","UknPDIoHVYc","WmTwh7AsaJQ","8dNTnrA_5gY","EH1MytpdcpM","bavzjaZLCJc","vro8u3N4HBc","k-LDzwP8jbs","dGPQUHKlabc","VlC1q_Edqj0","-zOb7D33SCE","OtyjkvlMJQY","ta3S29-evYY","KNTMCnZTp4k","UaH7hZXIiso","zIWxkcpc4cI","c5Ql0T-DHWM","whC5odvJmzA","lRpBMLmxQ3A","OEkTxgxFxm8","wzHdr1cG9qY","hRAU_4VPtVE","y8AO2YmnRgU","EzkyZefY5QI","RHmfvXO4dAc","krXrsq5MXmE","7KSlXBn9BFU","t0xr4dreV8g","wsX4dZj21pU","46OeYWZNXC4","u90MHVbJWLQ","j6DrUXCi55I","e5RxuXO1MGw","yQ12Q03RQ8M","1NU6c4CoOa4","l0EcOf-ivSI","Z1HSEsLo2M0","qDbl0gxu7Dc","EVztRfoZHQ0","yq-s6RegMzY","Mvx7WMFZ-ec","rynm5ii1gKI","hnDQzbAhQW0","RJBUHNiW_LA","z7PDxRpEuCM","GWYoMnviUTo","KJnKrh4HqO8","Qj18ci7ahXU","LVPTjW0HWCE","kKYJGL5zOdA","Gy3uG2sB0EI","EobwR1VvP6U","1e3oKKtT9Uc","9HT1Jq-pJsU","4mmTbQhYSe8","aCBmsv-Z0pY","XkytdbikWwQ","Kvh0Ks-xp_Q","Yo7Rro5aIJo","xlUjTuo11v4","3XpyQCxAFhE","upGOccVyjPk","U1XToo-yA0o","iTXIDqoozxY","Mpnaojg9CGg","G1Akiwn2b0k","YgEuC4B54Qw","owCh8KOVa1k","VE23gPaLWoI","ZKFksbkTKzI","xB1pPhgUSFo","2y9Nen8GedM","DmTxZSL0ezQ","S6L9d9oMP8k","NeaNEY_-HsQ","3lOEjy3G8zs","fabUIVQJS-U","AjlP3xVboPI","DOLK4E9CN44","xevdO-i_5X8","iBsClalmitY","tVAudOBNpSY","U5uXj1ITxvM","8ly91g6SpQY","Lx-QCSrwPVg","3Wd-AX8znpY","HVSxw2asHmw","BgtgmoAljkg","LEa03im5k5A","GofEE8LOGs4","86Swgtxs6Po","i3d1LspMBIU","PirEmJOo6CE","Lv6VILwZz1M","7YmUhQwq2YU","exePCusCm9k","H3PD7frrI_8","ghTqYWxoVrA","4rPNThNEQO4","P3o36TonBXE","5VsQd2ovTHY","HmwWy97ef5A","-0QlVaGlk1E","zO3Rl-rh6Bs","o9pkhKm_kAI","y5_fnfMm1_o","n9MQM919MDI","u73-_ofPYwA","WXWcfUwRWK8","PpyKc8dc4iQ","naEG81DttQk","4bMcrDV1vJs","BWNUqERTWyo","UCgOm1WvWB8","PjRJf-3i7wA","gCokmHyYIsk","o7Fkorc8xw4","0N81aj-0v8I","0Sts7wqwuhI","KmxQ9YvYP8U","1NuL1LFJqN4","EI9U85KR00k","sKTZ39Z55kM","RqGQRHwqD1Q","ToJ1hL_UxR8","BzVFH7dudGI","4YV-kJsnTY4","Hh1Ktyion00","cS0DksC2ThE","vVhUdj_6AJI","WBGEAkHIdEY","OhNypsK8dgs","KWgxgSwNQeg","wBq0yFH1NKA","by_kgenndME","Q3PfF8KQnnQ","qyubdFmpOzY","Fd4OuSQKSYc","M91jqRCuwSE","SZeFzFvvnww","1x9mR-8Jlk8","v60DhhXigj8","L2EtzWbmsSM","8OEh0WRIZpU","A6Fq0BDKUkI","B0fISmMwe0o","UJvXxTLMNCc","Oyit-UF0hU0","sJnT-ZBx-aw","w9DhHHmxkxk","09s8AsA_1_8","WpULC6QbFs8","oooZW-0Ib00","D6doByXH2qg","YNskJwjp2qs","GCwyct06ewQ","1wwGHpuoTRY","xCjBcNHVMN8","XXjCXeov7MU","j5pp75JMHLg","tN0Xhw1kXek","dnKc7ujewTg","508DpfT1xjM","7eeef5LwqBc","L3BFStFNPUc","b7Ap5MoqYOI","xBdrHXqTU9w","N7zUVxlp4kU","tqfJ3x337VE","jG4XesjoSfw","z79-HH7SgmA","Uu3qbMp9DVs","au8KcahWxG4","k2mDwz01YZk","f-vvDNc5mT0","Idg7R-9OI74","mhxE8xaaFi0","XryqTofd1tE","4yItBLDG6pc","zuKkQpziypw","9ewf9WEYy2M","uZK0M_K34MU","UIwzSvZYvBY","du0aqYDnd0Q","jy9azLipJbA","J-6yhQRz6_o","N3N2mQ7laF4","LtxnksrTXG0","-jqVIXfCkBI","P3MZsfQ4its","YVU1Ko9xKkU","s1R40DPur88","wfgny3djwGk","YLZ2x1-r6AQ","fUQX7gPNr7I","Cru4l_KrDv0","D1iuOpxeytw","FGhk31NdBoY","YPSW9YpFlu0","2ZST_JEpfRU","ZwH0E4EypOg","HA19BfHDrFk","blpoR8ooqI0","uI0KwvCqFVw","PoAI247TCWo","tF1gASEhQEQ","aZKK6d5IDbI","_jEgK66-ixg","2cb4Vt8EBEY","eXhlj12yOkM","-X9sVpmzkko","JTpPXmyER94","KDSkPksssrI","LV52_vn82tM","cvAu2-xaJ7k","KMq8JJYSSVM","92PtXvteSeI","obf4rmqWNfY","-0PT7-_5y58","5tzT5Aa2w58","-s9m266PR3A","xTyZVhbQ2l8","xNZgiBLUqWA","60zr04WK_7k","2wQegUuMv-A","SKeHyxQMBlg","7_n560myhjA","88TdVV7swU4","wpqmuNaET48","FVym7WQTBCM","oOm1eMCiNbQ","cgS1FTromKY","gLITbNSHRQ8","P_rMQK5w8lY","boJKjmTK_lg","QkiOMJ0nO-0","Wu8YElT21fQ","jcRegawJ4DY","Q_OW_A5uyYo","QQNVmwHBC1Y","MgasuaHMZow","c9M2OSRrLbY","rs-blPkEmSc","8IXc5BmlGBc","yrjrb_wK0fg","JLxWvfUO2lM","t0QIsLg7kxM","DZFKdRVzymw","_S5Njfgm0GA","bcd5L_UHATo","fvwi4hKxTFU","GnSUGxgUT54","d0y3Q-00ZNA","XBDsnpsmTYs","RrL4OcobwYI","5zf76gHJGto","_NoLH86yO7k","ub2uWc_mndk","RUqSACHf-Qo","XaUHVOpXCuA","Lo7qvHIWICk","MHw4wQ44ZjY","__yMErSqfK0","4atX5oRvoTU","R2Qd9Vf40g4","2m2UFpaB8NY","GyE0Z_1A6_M","LWnbLpF3AlU","mYQTMJnO6hs","dRl8xPKoXlQ","UabkSkq5wUs","lZ9e_43F0Vw","SK4NaWuUUhM","H2CMnpmSH1Y","WeKMvlBuDgc","9Ta7PW8cDL4","CXRRwU5k3U8","dwAlC6zcvl4","MoKrxAWu5Wk","S7uoR1gVw_A","6_hpi9qSz_M","VmwiIZ7OV6Y","NOS4reuwl-o","CSrD1srzfWE","KRH33rHzeh8","F6MBzJF7mTo","IRSb4qBbaGQ","L7Z3O1vw6bo","h6bTtr9qMf4","MUlyzmxEZ4I","OM7tycgoZyE","kEgajhCjKVU","Py0_yYTs3i4","Nwrlzz5L9Zc","RNmLNxM1cQg","jgih4zIJJQ0","Sclpx3BN4TQ","rTIvHfYbw_8","yJQXTCXlaDY","tHTXjVR-KlQ","ASue7eEeaYU","KwNNFTAYgYU","FgYHaJlEIws","b3EDCuFDlX8","9U3CAcmJB5M","_Gfhivl4oxY","-7DDBHcU8sU","RzGxbeOeF_E","IAnpo_fWCFs","lJGnVjwhxn4","4UWXEhA2_lw","nQi44X0yky8","dl8JAi-oy2E","qhdxInl7FnM","mI1FPIzucvI","uCsPGI_fKLY","b-HqkyuD1bw","Pf34zP-r0Vw","203nO3CQx8E","VTBS73N9HAA","mYiS70eXi2Y","nL7DkuSzTME","8gYPuHs3a3w","-6clJ54425g","ENEt6YPP-bA","3dcub25B8vo","c0C2q4uC2lU","vP1XuZFnCuY","d8eQGh2hmZs","DnwVCpFUa8c","o13RQmWafQQ","Fzeq5q7fZec","Rc3BiJyptyQ","0MTZ_4TpeCs","NWAlGoRayI8","_CxnGtd5wRc","GsJ52VMmOTA","4xoPkMY9jTY","FbVZX4QpLt0","vR8nfv-nuRw","hPDjW_WDLjE","Xt-KS-7yxIY","Af2EbXntrNo","YcWjPXF61bw","REFb1N0IOTU","Xq7RGuyXHac","0ZNk6o4eQW0","ndBFMQ4cfVg","1g3BJOTOjdg","Vw1noAhipyU","CzRRqzh2rc8","8AlSU3uYgwE","Fm4Hwq3yIv8","ox43bEl6Zd8","pZiOS2hX984","gYOE1g9t6WA","lqQ_R0A1Sjk","Fkzh2BXYX4c","F3M1Afx-foY","IVnxLf4VwnM","C2hzcRh8A94","UX5fDO8-CQ8","XwX-DcngYV8","YBsWk-mxIo0","vgcLJVrRlEg","wnAddG_K7DI","j5uKfryafHA","wIiIbwASTqc","EhtwtkSvWyA","769WvedTtbw","GyVMfFetXsI","nyIKQ5D123Q","STjTk8jwoQw","wMPyviYwxWU","0bD6qoS2sz4","v2F-dCCB-jY","qPVkEm7apu0","ZlCQKTIT3xA","_00UwBZX9p8","9OpPtRH61SM","Lgsw-yPW7d4","RIkobdBlBZ4","Iq_pCB-Dl8w","SzxXJQxdO9c","dkpEcuOHcSA","N71fY05Lsxg","szOc2LWxQHY","73bKxGIHYrs","qWL_QRAAH38","dDzkglVA6o8","GRo09AmIMak","fby9mwcYdnY","qY_FxwvWA_o","oIU6UL-coG0","6BrtQYvRy4g","UjWFmAEA79A","MpPWOGB3FuA","nrg-D07wy1M","WswpDPrmVM4","tl24wXyIONo","iHSN9Y-Vf_8","KLNPjVbwb7Q","-ihJHRKhIFQ","nE4YbY0sNH8","mZpSx73ozao","X01cwva4g8Q","t0rBJ2gxk9g","pvD8gIIUkyM","-Iv9fO-q5-I","-__thIfjTO4","zQf51_qR0zY","J0U_Gmw7MaI","mEUAdBA8w0Q","NfFZMjGmWVc","Lil5_uWyFbY","ejtUgTgppwU","QGIUnYo4UpQ","ibTsY0YlW6g","lwbcUgwM5l8","nbnh_kdDBfw","ucElDXT1Ygs","XtG7KQuTcio","tYIo5ApR9Eg","ZuTtJotj-LI","Ws_qpfu4CD0","bMLtbEUngkg","D1WpvfHFt0Y","m9RqegSPQsg","mgJ5hiy0WKw","rtfJGm6Rml0","JEv9tyXOnnc","UYiHvh9E2pU","TyooQUmlcOA","dcVWjjfgguU",];

    var videoId = allVideos[Math.floor(Math.random()*allVideos.length)];
    iframe.src = 'https://www.youtube.com/embed/' + videoId + "?autoplay=" + autoplay;

}

nextVideo(0);

</script>

<form>

<button onclick="nextVideo(1);return false">Click to play next random video</button>

</form>

<h1 id="step-1-wikipedia-api">Step 1: Wikipedia API</h1>

<p>The first step in creating these videos was to get some actual freely available content. For this I chose to use Wikipedia. This can be accessed using JSON/REST, and to quickly hack this into place I decided to use a framework called ‘Unirest’. This makes the while prototype easy:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// API URI for the English Wikipedia</span>
<span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ENGLISH_WIKIPEDIA</span> <span class="o">=</span> <span class="s">"https://en.wikipedia.org/w/api.php"</span><span class="o">;</span>

<span class="c1">// Using a 'search query', name of the page, retrieve the content:</span>
<span class="kd">private</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getPageContent</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">query</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnirestException</span> <span class="o">{</span>
    <span class="c1">//Example URI created for query 'Stack Overflow': https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;titles=Stack%20Overflow&amp;redirects=true</span>
    <span class="n">HttpResponse</span><span class="o">&lt;</span><span class="n">JsonNode</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">Unirest</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">ENGLISH_WIKIPEDIA</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryString</span><span class="o">(</span><span class="s">"format"</span><span class="o">,</span> <span class="s">"json"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryString</span><span class="o">(</span><span class="s">"action"</span><span class="o">,</span> <span class="s">"query"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryString</span><span class="o">(</span><span class="s">"prop"</span><span class="o">,</span> <span class="s">"extracts"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryString</span><span class="o">(</span><span class="s">"titles"</span><span class="o">,</span> <span class="n">query</span><span class="o">)</span>
            <span class="o">.</span><span class="na">queryString</span><span class="o">(</span><span class="s">"redirects"</span><span class="o">,</span> <span class="s">"true"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">asJson</span><span class="o">();</span>

    <span class="n">JSONObject</span> <span class="n">pagesObject</span> <span class="o">=</span> <span class="n">response</span>
            <span class="o">.</span><span class="na">getBody</span><span class="o">()</span>
            <span class="o">.</span><span class="na">getObject</span><span class="o">()</span>
            <span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="s">"query"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="s">"pages"</span><span class="o">);</span>
    <span class="k">if</span><span class="o">(</span><span class="n">pagesObject</span><span class="o">.</span><span class="na">keys</span><span class="o">().</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">pageKey</span> <span class="o">=</span> <span class="n">pagesObject</span><span class="o">.</span><span class="na">keys</span><span class="o">().</span><span class="na">next</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">htmlContent</span> <span class="o">=</span> <span class="n">pagesObject</span><span class="o">.</span><span class="na">getJSONObject</span><span class="o">(</span><span class="n">pageKey</span><span class="o">).</span><span class="na">getString</span><span class="o">(</span><span class="s">"extract"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">htmlContent</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>The resulting JSON (see this <a href="https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;titles=Stack%20Overflow&amp;redirects=true">example</a>) contains the Wikipedia page in simple processed HTML. From this HTML I used a library called ‘Jsoup’ to extract the plain text. The first alinea of text contains the introduction of the topic, this is what I’ve decided to use as content for the video. Initially I had <em>all</em> the content of the page in the videos, but they quickly turned out to be 30+ minutes long and very boring.</p>

<p>This is the code I used to go from HTML to the first alinea of text:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * Clean the HTML, get inner text of first alinea and break into sentences.
 * @param htmlContent
 * @return
 */</span>
<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">cleanAndBreakIntoSentences</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">htmlContent</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">Jsoup</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">htmlContent</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">fullText</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="n">Elements</span> <span class="n">elements</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">children</span><span class="o">();</span>

    <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">elements</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
    <span class="k">while</span><span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">Element</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>

        <span class="c1">// All the text is contained in paragraph elements:</span>
        <span class="k">if</span><span class="o">(</span><span class="n">elem</span><span class="o">.</span><span class="na">is</span><span class="o">(</span><span class="s">"p"</span><span class="o">))</span> <span class="o">{</span>

            <span class="n">String</span> <span class="n">source</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="na">text</span><span class="o">();</span>

            <span class="c1">// Break the text into sentences using the smart JDK 'BreakIterator':</span>
            <span class="n">BreakIterator</span> <span class="n">breakIterator</span> <span class="o">=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">getSentenceInstance</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">US</span><span class="o">);</span>
            <span class="n">breakIterator</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">breakIterator</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">breakIterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span> <span class="n">end</span> <span class="o">!=</span> <span class="n">BreakIterator</span><span class="o">.</span><span class="na">DONE</span><span class="o">;</span> <span class="n">start</span> <span class="o">=</span> <span class="n">end</span><span class="o">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">breakIterator</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">fullText</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">source</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">start</span><span class="o">,</span><span class="n">end</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">// If we reach a header, stop processing, we only need the first section/alinea:</span>
        <span class="k">if</span><span class="o">(</span><span class="n">elem</span><span class="o">.</span><span class="na">is</span><span class="o">(</span><span class="s">"h2"</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// We break on the first (sub-) title:</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">fullText</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<h1 id="step-2-stunning-visuals-with-java-2d">Step 2: Stunning visuals with Java 2D</h1>

<p>We have some text, now how do we turn this into a video? We need visuals! I decided to cut the content into seperate lines, and for each line I have a single ‘slide’. This is an (buffered) image created using Java’s 2D API and saved to file.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * For each sentence, create a buffered image and paint some text on this.
 * We need the text to be 'wrapped', for this I repurpose a JTextArea, on a JPanel.
 * 
 * Also increase the font size so the text fits on the screen.
 */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">paintText</span><span class="o">(</span><span class="n">Graphics2D</span> <span class="n">g2</span><span class="o">,</span> <span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">JPanel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPanel</span><span class="o">();</span>
    <span class="n">panel</span><span class="o">.</span><span class="na">setOpaque</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">panel</span><span class="o">.</span><span class="na">setSize</span><span class="o">(</span><span class="k">new</span> <span class="n">Dimension</span><span class="o">(</span><span class="mi">1920</span><span class="o">,</span> <span class="mi">1080</span><span class="o">));</span>
    <span class="n">panel</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="n">JTextArea</span> <span class="n">area</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextArea</span><span class="o">();</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setSize</span><span class="o">(</span><span class="k">new</span> <span class="n">Dimension</span><span class="o">(</span><span class="mi">1920</span><span class="o">,</span><span class="mi">1080</span><span class="o">));</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setFocusable</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setBorder</span><span class="o">(</span><span class="n">BorderFactory</span><span class="o">.</span><span class="na">createEmptyBorder</span><span class="o">(</span><span class="n">BORDER_SIZE</span><span class="o">,</span> <span class="n">BORDER_SIZE</span><span class="o">,</span> <span class="n">BORDER_SIZE</span><span class="o">,</span> <span class="n">BORDER_SIZE</span><span class="o">));</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setWrapStyleWord</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setLineWrap</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setOpaque</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="kt">int</span> <span class="n">fontSize</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="c1">// Increase the font size as long as it fits on screen (and don't go bigger than 100, looks ugly):</span>
    <span class="k">while</span><span class="o">(</span><span class="n">area</span><span class="o">.</span><span class="na">getPreferredScrollableViewportSize</span><span class="o">().</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">1080</span> <span class="o">&amp;&amp;</span> <span class="n">fontSize</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">fontSize</span> <span class="o">+=</span> <span class="mi">10</span><span class="o">;</span>
        <span class="n">area</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="n">Font</span><span class="o">(</span><span class="s">"Futura"</span><span class="o">,</span> <span class="n">Font</span><span class="o">.</span><span class="na">PLAIN</span><span class="o">,</span> <span class="n">fontSize</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="n">area</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="n">Font</span><span class="o">(</span><span class="s">"Futura"</span><span class="o">,</span> <span class="n">Font</span><span class="o">.</span><span class="na">PLAIN</span><span class="o">,</span> <span class="n">fontSize</span> <span class="o">-</span> <span class="mi">10</span><span class="o">));</span>
    <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">area</span><span class="o">);</span>

    <span class="c1">// Print this panel on the Graphics2D object (which is a BufferedImage)</span>
    <span class="n">panel</span><span class="o">.</span><span class="na">printAll</span><span class="o">(</span><span class="n">g2</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h1 id="step-3-text-to-speech">Step 3: Text-To-Speech</h1>

<p>Instead of using a Java Text-To-Speech (TTS) library, which aren’t very clear or good, I decided to use the build-in OS/X command ‘say’.
On the command line you can execute: <code class="highlighter-rouge">say Hello world!</code></p>

<p>The ‘say’ command supports different voices and also has the ability to store the output in a file. Which is perfect for us!</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="c1">// Execute the say command with a given filename, voice and sentence to speak:</span>
    <span class="kd">final</span> <span class="n">Process</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">exec</span><span class="o">(</span><span class="s">"say -o "</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s">" -v "</span> <span class="o">+</span> <span class="n">voice</span> <span class="o">+</span> <span class="s">" -r 210 "</span> <span class="o">+</span> <span class="n">line</span> <span class="o">+</span> <span class="s">""</span><span class="o">);</span>

    <span class="k">new</span> <span class="nf">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="n">String</span> <span class="n">line1</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line1</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line1</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}).</span><span class="na">start</span><span class="o">();</span>

    <span class="c1">// Wait for the say-command to finish</span>
    <span class="n">p</span><span class="o">.</span><span class="na">waitFor</span><span class="o">();</span></code></pre></figure>

<h1 id="step-4-putting-it-all-together">Step 4: Putting it all together</h1>

<p>What do we have now? A list of sentences from Wikipedia, for each sentence we have an image and we have an audio snippet created with TTS. Now it is time to put everything together and create a video.
The easiest way to do this is to use ffmpeg, a powerful command line video tool. To make this easier I created a small method ‘executeCommandLine’ which does the same thing as the snippet with ‘Runtime.getRuntime().exec’ shown above.</p>

<p>Combine the image (png file) and the TTS audio (mp4 file) into a series of MPG files:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="k">for</span><span class="o">(</span><span class="n">VikipediaSentence</span> <span class="n">sentence</span> <span class="o">:</span> <span class="n">sentences</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">sentence</span><span class="o">.</span><span class="na">getFilename</span><span class="o">();</span>
        <span class="c1">//Combine audio and image into a short video:</span>
        <span class="n">executeCommandLine</span><span class="o">(</span><span class="s">"ffmpeg -loop 1 -y -i "</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s">".png -i "</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s">".mp4 -tune stillimage -shortest "</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s">".mpg"</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<p>We now have a series of small MPG files. They need to be combined into a single video. For this we need a text file which contains a list of all the MPG files. This is stored on disc and next we execute the following command:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//merge all:</span>
<span class="n">executeCommandLine</span><span class="o">(</span><span class="s">"ffmpeg -f concat -safe 0 -i output/snippet_list.txt -c copy output/output.mpg"</span><span class="o">);</span></code></pre></figure>

<p>Next we convert the video from one large MPG to MP4 file (which is a nicer, compressed format):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">//convert to mp4:</span>
<span class="n">executeCommandLine</span><span class="o">(</span><span class="s">"ffmpeg -i output/output.mpg -c:v libx264 -c:a aac -strict experimental -b:a 192k -pix_fmt yuv420p -shortest output/output.mp4"</span><span class="o">);</span></code></pre></figure>

<p>And to add a little more ‘production value’ I’ve gone online and found some soothing (free, creative commons) background music. This music is looped into a large audio file of 50 minutes (enough for all videos). Again using ffmpeg the audio is mixed in:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// add background music:</span>
<span class="n">executeCommandLine</span><span class="o">(</span><span class="s">"ffmpeg -i output/output.mp4 -i input/background_loop.mp3 -filter_complex amerge -c:v copy -c:a aac -strict experimental output/finaloutput.mp4"</span><span class="o">);</span></code></pre></figure>

<p>There it is, we have a complete video with text audio, text visuals and background music! Only one thing left to do, uploading to YouTube!</p>

<h1 id="step-5-uploading-everything-to-youtube">Step 5: Uploading everything to YouTube</h1>

<p>To automate the process of uploading, I first needed a place to put the videos, so I created a new YouTube channel named: <a href="https://www.youtube.com/channel/UCSjEbLaNj1yKFgQpjLoqkUw">Vikipedia</a></p>

<p>Next we can use the Google YouTube Data API. It turns out this is <em>very</em> easy and well documented. I don’t even need to share the code I wrote here because I used the example from Google’s website itself! Check out this <a href="https://developers.google.com/youtube/v3/code_samples/java#upload_a_video">amazing documentation</a>. Very detailed and does exactly what I needed it to do.</p>

<p>The example code takes a video file and uploads it. The only things I changed were setting the correct description, I was ready to generate all the content!</p>

<h1 id="not-implemented-yet">Not implemented (yet?)</h1>

<p>Things I wanted to implement (but didn’t and probably never will):</p>

<ul>
  <li>Add a little color to the videos (black and white is boring)</li>
  <li>Add <a href="https://trac.ffmpeg.org/wiki/Waveform">waveform</a> from ffmpeg (just to keep it visually interesing)</li>
  <li>Download (did this) and use (didn’t do this) the images from the Wikipedia page and add those to the video</li>
</ul>

<h1 id="final-thoughts">Final thoughts</h1>

<ul>
  <li>Yes, it is pretty easy to hack together a bot to create YouTube videos.</li>
  <li>No, the quality isn’t <em>that</em> good… yet?</li>
  <li>Yes, it can be made in a single afternoon!</li>
  <li>No, I’m not going to automate the spidering of Wikipedia and upload a million videos… (but I could easily do that!)</li>
</ul>

<p>Up to now all the videos created are based on a small list of ‘hot topics’ I found on Wikipedia and Twitter. I don’t want to automate the entire process and flood YouTube, the content just isn’t good enough for that. But it was a fun project for a lazy afternoon! I’ve learned a lot of new tricks, maybe you can benefit from that as well.</p>

<p>The next thing I want to do with the 400+ YouTube videos I’ve generated is to see how (and if) people are going to watch them. Do they show up in the search results? Which topics are searched and watched? Maybe more on that in a future post!</p>

<p>Do <strong>you</strong> have any good ideas on how to generate videos, let me know in the <strong>comments</strong>!
I’ve created a bot that generates music some years, maybe I should improve that bot to upload its own YouTube music videos? ;-)</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2017/01/vikipedia-a-java-youtube-bot/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/12/three-new-jeps/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/java.png" alt="Three new JEPs" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-12-06T07:28:12+01:00" class="date">
            Dec 6, 2016 07:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/12/three-new-jeps/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/12/three-new-jeps/">Three new JEPs</a></h1>

        <span itemprop="articleBody">
          <p>This morning <a href="https://twitter.com/mreinhold">Mark Reinhold</a> submitted three brand new JEPs (JDK Enhancement Proposal).</p>

<ul>
  <li><a href="http://openjdk.java.net/jeps/300">JEP 300</a>: Augment Use-Site Variance with Declaration-Site Defaults</li>
  <li><a href="http://openjdk.java.net/jeps/301">JEP 301</a>: Enhanced Enums</li>
  <li><a href="http://openjdk.java.net/jeps/302">JEP 302</a>: Lambda Leftovers</li>
</ul>

<p>These proposals are enhancements to the JDK (Java Development Kit) and OpenJDK. A long term roadmap for the JDK projects, a look into what the future of Java might hold.</p>

<p>Let’s dive right in and take a quick look on what these proposals actually are!</p>

<h1 id="jep-300-augment-use-site-variance-with-declaration-site-defaults">JEP 300: Augment Use-Site Variance with Declaration-Site Defaults</h1>

<p>When you currently use Java Generics you probably already know about wildcards. It is possible to set lower and upper bounds to generics using the keywords <strong>? extends</strong> and <strong>? super</strong>. There are two parts to using wildcards, declaration side and use side, this JEP focusses mainly on making the use side easier and more powerful.</p>

<h2 id="declaration-side">Declaration side</h2>

<p>It is possible to set a bound with a wildcard on the declaration side:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Shelter</span><span class="o">&lt;</span><span class="n">X</span> <span class="kd">extends</span> <span class="n">Animal</span><span class="o">&gt;</span> <span class="o">{</span>
	<span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<p>In this example we’ve declared that the Shelter has to contain Animals. It is possible to create an Shelter&lt;Cat&gt; or Shelter&lt;Dog&gt; now, but not Shelter&lt;Bike&gt;.</p>

<h2 id="use-side">Use side</h2>

<p>The second way to use wildcards is on the <em>use</em> side. There we can speak of so called <strong>in</strong> and <strong>out</strong>-variable wildcards.</p>

<p>The following code uses the ‘extends’ keyword to create the <strong>in</strong>-variable:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="c1">// Using extends we create an 'in' variable:</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Animal</span><span class="o">&gt;</span> <span class="n">inAnimals</span> <span class="o">=</span> <span class="n">animals</span><span class="o">;</span>

    <span class="c1">// From the inAnimals we can read: Animal (not subclasses)</span>
    <span class="n">Animal</span> <span class="n">animal</span> <span class="o">=</span> <span class="n">inAnimals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// &lt;- reading Animal is fine</span>
    <span class="n">Cat</span> <span class="n">cat</span> <span class="o">=</span> <span class="n">inAnimals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// &lt;- compile error, we can't read Cat</span>

    <span class="c1">// We can write: nothing (!) making it almost read-only</span>
    <span class="n">inAnimals</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Animal</span><span class="o">());</span> <span class="c1">// &lt;- compile error</span></code></pre></figure>

<p>There is also the ‘super’ keyword (not very common) to create an <strong>out</strong>-variable use side:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">animals</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="c1">// Using super we create an 'out' variable, setting an upper bound:</span>
    <span class="n">List</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">Cat</span><span class="o">&gt;</span> <span class="n">outAnimals</span> <span class="o">=</span> <span class="n">animals</span><span class="o">;</span>

    <span class="c1">// From the outAnimals we can read: object (no superclasses!)</span>
    <span class="n">Cat</span> <span class="n">cat</span> <span class="o">=</span> <span class="n">outAnimals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// &lt;- compile error, illegal</span>
    <span class="n">Object</span> <span class="n">o</span> <span class="o">=</span> <span class="n">outAnimals</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// &lt;- we can only read object</span>

    <span class="c1">// On the write side, we've set a bound to Cat:</span>
    <span class="n">outAnimals</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Cat</span><span class="o">());</span> <span class="c1">// &lt;- correct!</span>
    <span class="n">outAnimals</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">());</span> <span class="c1">// &lt;- compile error</span>
    <span class="n">outAnimals</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Animal</span><span class="o">());</span> <span class="c1">// &lt;- compile error</span></code></pre></figure>

<h2 id="so-what-is-jep-300">So what is JEP 300?</h2>

<p>The motivation of the JEP states:</p>

<blockquote>
  <p>Since invariant uses of these type arguments are less flexible than their wildcard equivalents, while providing no extra power, a reasonable practice is to always use a wildcard when mentioning the type.</p>
</blockquote>

<p>It is almost always more powerful and equivalent to use wildcards on the use side. The problem is that this is verbose and adds a lot of noise to your code. The proposal wants to make it possible to declare (at the declaration side) what the default wildcard strategy should be.</p>

<p>For example look at the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">interface</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="n">contravariant</span> <span class="n">T</span><span class="o">,</span> <span class="n">covariant</span> <span class="n">R</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="n">R</span> <span class="nf">apply</span><span class="o">(</span><span class="n">T</span> <span class="n">arg</span><span class="o">);</span>
    
    <span class="o">}</span>
    <span class="c1">// other possible syntaxes are Function&lt;-T, +R&gt; or Function&lt;in T, out R&gt;</span></code></pre></figure>

<p>The compiler can now automatically treat every use of the type e.g., Function&lt;String, Number&gt; as if it had wildcards Function&lt;? super String, ? extends Number&gt;.</p>

<p>On the use side the proposal says:</p>

<blockquote>
  <p>Rather than making changes to subtyping, we preprocess the source code so that types like Function&lt;String, Number&gt; are implicitly expanded to Function&lt;? super String, ? extends Number&gt;.</p>
</blockquote>

<p>This should make it more powerful and just as readable to using wildcards by default without even noticing them.</p>

<h1 id="jep-301-enhanced-enums">JEP 301: Enhanced Enums</h1>

<p>The next proposal Mark has submitted is about using Enums with Generics. Look at the following example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">enum</span> <span class="n">Pet</span> <span class="o">{</span>

    <span class="n">BELLA</span><span class="o">(</span><span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">"Bella"</span><span class="o">)),</span>
    <span class="n">BUDDY</span><span class="o">(</span><span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">"Buddy"</span><span class="o">)),</span>
    <span class="n">TIGGER</span><span class="o">(</span><span class="k">new</span> <span class="n">Cat</span><span class="o">(</span><span class="s">"Tigger"</span><span class="o">));</span>

    <span class="n">Animal</span> <span class="n">animal</span><span class="o">;</span>

    <span class="n">Pet</span><span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">animal</span> <span class="o">=</span> <span class="n">animal</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Animal</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">animal</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>We have an enum with three pets. These pets have an instance of an animal inside them. And we have a way of retrieving them.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="n">Pet</span><span class="o">.</span><span class="na">BELLA</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">);</span> <span class="c1">// prints: "Bella"</span></code></pre></figure>

<p>But one thing we can’t do it call the method “.bark()” on BELLA, because we don’t know this is a Dog.</p>

<p>The proposal JEP 301 wants to make it possible to correlate a specific type to an enum constant:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">enum</span> <span class="n">Pet</span><span class="o">&lt;</span><span class="n">A</span> <span class="kd">extends</span> <span class="n">Animal</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="n">BELLA</span><span class="o">&lt;</span><span class="n">Dog</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">"Bella"</span><span class="o">)),</span>
    <span class="n">BUDDY</span><span class="o">&lt;</span><span class="n">Dog</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">"Buddy"</span><span class="o">)),</span>
    <span class="n">TIGGER</span><span class="o">&lt;</span><span class="n">Cat</span><span class="o">&gt;(</span><span class="k">new</span> <span class="n">Cat</span><span class="o">(</span><span class="s">"Tigger"</span><span class="o">));</span>

    <span class="n">A</span> <span class="n">animal</span><span class="o">;</span>

    <span class="n">Pet</span><span class="o">(</span><span class="n">A</span> <span class="n">animal</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">animal</span> <span class="o">=</span> <span class="n">animal</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">A</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">animal</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Having coupled the Dog type to enum BELLA it should now we possible to call:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Pet</span><span class="o">.</span><span class="na">BELLA</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">bark</span><span class="o">();</span> <span class="c1">// WOOF!</span>
<span class="n">Pet</span><span class="o">.</span><span class="na">TIGGER</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">purr</span><span class="o">();</span> <span class="c1">// Purrrrrrrrr.....</span></code></pre></figure>

<h1 id="jep-302-lambda-leftovers">JEP 302: Lambda Leftovers</h1>

<p>This is turning out to be a rather long blogpost but we’ve reached the final proposed JEP of the day: <strong>Lambda Leftovers</strong></p>

<h2 id="accidental-ambiguities">Accidental ambiguities</h2>

<p>One of the problems people are having with the lambdas at the moment, and this JEP wants to improve, are accidental ambiguities.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Predicate</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">)</span> <span class="o">{</span>
   <span class="o">...</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Function</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">function</span><span class="o">)</span> <span class="o">{</span>
   <span class="o">...</span>
<span class="o">}</span>

<span class="n">apply</span><span class="o">(</span><span class="n">input</span> <span class="o">-&gt;</span> <span class="kc">false</span><span class="o">);</span> <span class="c1">// &lt;- compile error</span>

<span class="cm">/**
 * Ambiguous method call. Both:
 * apply (Predicate&lt;Animal&gt;)        in classname and
 * apply (Function&lt;Animal, String&gt;) in classname match
 */</span>
    </code></pre></figure>

<p>Why are we having this problem? Both methods are possible candidates of the lambda. If we look further and see the return type ‘boolean’ it should be clear we wanted to call the Predicate method and not the Function (which should return a String). Right now this doesn’t work, but it is something the compiler could figure out for us.</p>

<h2 id="underscores">Underscores</h2>

<p>Up to Java 8 it was perfectly acceptable to use the underscore character ‘_’ as a variable name. But this has been changed, all leading up to JEP 302. In most languages with lambda’s it is possible to denote certain inputs as <em>unused</em>. This is done using the underscore. In Java this causes problems because it is right now a valid variable name.</p>

<p>Starting with Java 8 the use of an underscore as lambda argument caused a warning and from Java 9 the use of an underscore became an error. This allows future Java versions beyond 9 to be able to use the underscore for other purposes. And one of those purposes is to bring it back as a default variable name. Not causing collisions if used multiple times and it can’t be used as variable by calling _.toString() for example.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Ignore the second parameter, just use i:</span>
<span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">biss</span> <span class="o">=</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>

<span class="c1">// Even possible, ignore both:</span>
<span class="n">BiFunction</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">b2</span> <span class="o">=</span> <span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="s">"someString"</span><span class="o">;</span>
    </code></pre></figure>

<h2 id="shadowing-of-parameters">Shadowing of parameters</h2>

<p>Another small change that is proposed is allowing to shadow parameters. For example look at the following code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">computeSomeKey</span><span class="o">();</span>

<span class="n">map</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">key</span> <span class="o">-&gt;</span> <span class="n">key</span><span class="o">.</span><span class="na">length</span><span class="o">())</span> <span class="c1">// compile error, key already defined</span>

<span class="n">map</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>  <span class="c1">// compile error, can't redefine key inside this scope</span>
    <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">});</span></code></pre></figure>

<p>In both cases ‘key’ is already defined, can’t be used as a parameter or local variable inside the lambda. The proposal wants to lift this restriction, allowing the use of ‘key’ as a parameter or as a local inside the lambda using so called ‘shadowing’.</p>

<p>One possible drawback is readability, and I too think that this might be a problem.
For example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"theInitialKey"</span><span class="o">;</span>

<span class="n">map</span><span class="o">.</span><span class="na">computeIfAbsent</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"theShadowKey"</span><span class="o">;</span> <span class="c1">// &lt;- delete this</span>
    <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">});</span></code></pre></figure>

<p>The second variable “theShadowKey” is taking the place of the first “theInitialKey”. This can be quite confusing because if you delete the second declaration nothing would break. The other variable would come from the shadows and take its place. This feels dangerous and confusing to me, not very ‘Java’-like.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Another day, three new JEPs submitted. Java is moving forward and trying to improve the user experience with genetics and lambdas. These proposals look like good, small, low-impact improvements that can really benefit the common programmer.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/12/three-new-jeps/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/10/excuse-me-sorry-to-interrupt/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/interrupt.jpg" alt="Excuse me, sorry to interrupt..." width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-10-20T10:28:12+02:00" class="date">
            Oct 20, 2016 10:28:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/10/excuse-me-sorry-to-interrupt/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/10/excuse-me-sorry-to-interrupt/">Excuse me, sorry to interrupt...</a></h1>

        <span itemprop="articleBody">
          <p>Interruptions are a software developers worst nightmare. This is what you often hear. There is nothing worse than being interrupted while working hard on a problem, while you’re in <em>the zone</em>. You’ll lose your train of thought and the world collapses.</p>

<p>The idea is that in software development you are sometimes very deep into a problem, analysing code:</p>

<p>This orchestrator calls that service, it is managed by this class and talks to that queue. So this generator has these parameters and it all depends on… “<strong>hey</strong> <em>I still need your time sheet</em>”</p>

<p><img src="/images/rage.gif" alt="Rage" class="aligncenter" /></p>

<p><strong>Poof</strong>… everything gone. Your mind is now filled with rage and lost the entire train of thought. This is the main reason programmers hate interruptions.</p>

<h1 id="root-cause-analysis">Root cause analysis</h1>

<p>During the <a href="https://www.oracle.com/javaone/">JavaOne</a> 2016 conference I attended a talk by Holly Cummins called <em>“Euphoria Despite the Despair”</em>. In this talk she went in depth into what makes work <strong>fun</strong> and stressed the point that interruptions should be <strong>avoided</strong> <em>at all cost</em>.</p>

<p>She even talked about a team that has a dedicated duo that had ‘interruption duty’. A Slack-bot was created so you could ask which colleagues you could interrupt each day.</p>

<p>But… are we judging too quickly here? Are <strong>all</strong> interruptions bad? I don’t think they are. Time to dig a little bit deeper.</p>

<h1 id="sync-versus-async-and-good-versus-bad">Sync versus async and good versus bad</h1>

<p>Interruptions are synchronous and blocking. Someone walks up to you and stands near your desk trying to get your attention. You might have a few milliseconds to finish what you are doing but you’ll need to reply. Other forms of communication are asynchronous, for example mail or chat clients (Slack). Someone asks a question and when you have the time to reply, you reply.</p>

<p>Our team has evolved to use this to our advantage. Some problems ask for <strong>direct</strong> action, but <em>most</em> can be handled <strong>asynchronous</strong>. This is something we talk about and discuss.</p>

<p>For example: If my manager wants a time sheet? Ask me asynchronous, it can wait. If a colleague has a question but is able to do other things first? Ask asynchronous, it can wait. If a colleague is <em>stuck</em> and can’t continue to work? I’d be happy to drop what I’m doing and assist! This is what teams do, they work together and communicate!</p>

<p>Don’t throw all interruptions on one big pile and label them as bad, distinguish between the <strong>good</strong> and <strong>bad</strong> interruptions.</p>

<h1 id="mount-the-headphones-get-in-the-zone">Mount the headphones, get in the zone</h1>

<p>Sometimes, as a programmer, you just want to concentrate and solve some deep problem alone.</p>

<p>In our team this can be done in two ways:</p>

<ol>
  <li>Work at <strong>home</strong> or in a small <strong>dedicated room</strong> in our office</li>
  <li>Put on your <strong>headphones</strong>, if they are on, you signal you don’t want to be disturbed</li>
</ol>

<p>I do this too, mostly using my headphones. Most of the time I don’t even have music playing and I can hear everything the team says (this is important, more on this below!).</p>

<p>In my opinion though we need to <strong>rethink</strong> this. Is it really the <em>best</em> way to program when you are ‘in the zone’?</p>

<p>I think you are much more likely to solve problems when you openly <strong>share</strong> and <strong>collaborate</strong>. Pairing isn’t just for trivial work, instead: the trivial things are things you should do alone! Teams should have no secrets, at each point in time you should have a pretty good idea what each of your team buddies is working on. Actively ask questions, even trivial things.</p>

<h1 id="near-subliminal-team-updates">Near-subliminal team updates</h1>

<p>What? “Near-subliminal” team updates? Yes, I’m so sorry, I can’t think of a better name. Can you? <strong>Please tell me</strong>.</p>

<p>One thing that is very important in software development is the use of what I’ve just called near-subliminal team updates/mumblings. It is the main reason I have headphones on without any music, and why I don’t like working at different locations (at home or in cubicles).</p>

<h2 id="example">Example</h2>

<p>You are working on something and you feel the need to refactor a class. At this moment you say/mumble out loud:</p>

<p><em>“Hey team, I’m going to refactor <strong>classname</strong> because <strong>reason</strong> okay?”</em></p>

<p>This is what I call a near-subliminal team update, and they are <em>very</em> important. They can solve a lot of problems!</p>

<ol>
  <li>
    <p>Maybe you <strong>don’t</strong> agree with <strong>reason</strong>, this is the perfect time to talk about that. You don’t want to wait until a code review and tell them it was a bad idea later the same day.</p>
  </li>
  <li>
    <p>Maybe you are also working on something in <strong>classname</strong> and it might collide with your work. You don’t want to wait until you <em>git pull</em> and need to merge, tackle it right away!</p>
  </li>
  <li>
    <p>Maybe it <strong>isn’t</strong> relevant to you at all (which is most of the time)… Well, most likely you don’t even really notice the update. It didn’t contain any trigger words. Terms you are working on or have an opinion about. You aren’t really interrupted and can continue to work.</p>
  </li>
</ol>

<h1 id="conclusion">Conclusion</h1>

<p>To summerize:</p>

<ol>
  <li>Don’t treat all interruptions as <strong>evil</strong>, they are not…</li>
  <li>If you are annoyed about interrupts, <strong>talk</strong> about it</li>
  <li>Speak up, mumble, use those near-submliminal team updates!</li>
</ol>

<p>Did I miss anything? How do you cope or deal with interruptions?</p>

<p>And <strong>please</strong>: If there is someone with a <strong>better name</strong> for these short near-subliminal status updates, let me know!</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/10/excuse-me-sorry-to-interrupt/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/09/the-future-of-java-ee/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/java.png" alt="JavaOne 2016, the Future of Java EE" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-09-18T19:45:12+02:00" class="date">
            Sep 18, 2016 19:45:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/09/the-future-of-java-ee/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/09/the-future-of-java-ee/">JavaOne 2016, the Future of Java EE</a></h1>

        <span itemprop="articleBody">
          <p>Lately there has been a lot of rumor going around about the future of Java EE. Oracle ex-employees <a href="https://twitter.com/reza_rahman">Reza Rahman</a> was one of the first to voice their concern about Java EE. It seemed that all development on the seperate JSRs (Java Specification Requests) that make up Java EE 8 ground to a halt and Oracle was thinking about stopping Java EE development all together.</p>

<p>Oracle finally gave some insight on their proposal of the future of Java EE during <a href="https://www.oracle.com/javaone/index.html">JavaOne</a> 2016 (where I am right now).</p>

<h1 id="what-is-java-ee">What is Java EE?</h1>

<p>First, lets take a step back and look at what Java EE actually is. If you download Java SDK/JRE you are able to compile classes and run them. In the language (java.* and javax.*) there are a couple of libraries that you can use. For example if you want to compute mathematical equations there are classes to use in the java.math.* package.</p>

<p>Oracle quickly realized it is hard to make larger enterprise applications using just these libraries. That is why they developed the following things:</p>

<ol>
  <li>A set of interfaces (API) for Enterprise Applications (Java EE)</li>
  <li>A default server <em>implemention</em> for these API’s (Glassfish)</li>
  <li>A licensing structure for vendors that want to implement these API’s</li>
</ol>

<p>So if you want to make an Java EE application you can use the Java EE API. For example you can define Servlets for web communication. Next when you deploy this application on an official licensed Java EE server it’ll make sure the methods are implemented and called when a URL is invoked.</p>

<h1 id="java-ee-at-javaone-2016">Java EE at <a href="https://www.oracle.com/javaone/index.html">JavaOne</a> 2016</h1>

<p>During the keynote Oracle informed the crowd about Java EE 8. Rumor was that Oracle wanted to completely stop developing Java EE because the demand has been decreasing over the years. More and more ‘fat’-jar applications are being deployed on simple web servers that don’t implement the full Java EE specification. Oracle has to think about the return value, is the effort of developing a new Java EE 8 specification worth the effort? They clearly thought it wasn’t.</p>

<p>The problem for Oracle was the big backlash coming from the community. A couple of initiatives were started to create a voice and support for Java EE (for example the Java EE Guardians and EE Central). This put Oracle in a bad position. If they stopped developing Java EE the community would be very dissapointed. The initiatives would demand the rights to the API to keep developing it themselfs. But Oracle can’t do this because they are earning money from selling licenses.</p>

<p>The decision has been made to continue developing Java EE 8. And during the keynote they proposed a release of EE 8 in 2017. Going forward they’re talking about changing the focus to reflect ‘modern’ enterprise development. They want to add support for virtualization (Docker anyone?) and microservices, modernizing Java EE.</p>

<h1 id="my-thoughts">My thoughts</h1>

<p>Parts of Java EE, for example CDI and JPA are in my opinion very succesful. Java EE looked at the options in the market and they’ve defined a new, clearer, general, evolved API that allows you to change the underlaying technology/vendor. This is very good! It is always valuable when vendors get together and define a shared API together based on the lessons learned from their own implementations.</p>

<p>The problem is that Java EE 8 as a whole is too large, it is a monolith. If I start a new project I’d love to pick some parts from Java EE and just use those. There is no need to have one huge Java EE certified server if instead you can pick one particular CDI and JPA implementation.</p>

<p>The future of Java EE isn’t to continue as one big bundled EE server. We need to break it up. All the parts can have their own lifecycle and seperate implementations. This makes it easier to get smaller certified implementations and doesn’t require large EE servers. This also allows for pruning, if certain parts aren’t relevant anymore, don’t use it and stop developing.</p>

<p>Vendors like Red Hat (owner of WildFly) are already breaking up their Java EE implementation using frameworks like <a href="http://wildfly-swarm.io/">WildFly Swarm</a>. Swarm allows you to package and run just the parts of the specification you’re using. This is, what I think, the real future of enterprise Java.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/09/the-future-of-java-ee/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/09/job-titles-when-writing-code/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/communication.jpg" alt="Job titles when writing code" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-09-17T19:45:12+02:00" class="date">
            Sep 17, 2016 19:45:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/09/job-titles-when-writing-code/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/09/job-titles-when-writing-code/">Job titles when writing code</a></h1>

        <span itemprop="articleBody">
          <p>The company I work for (<a href="https://www.jpoint.nl/">JPoint</a>) we don’t have work titles. Well, we do, but you’re free to pick one. Some people call themselfs ‘software developer’, some are having more luck as ‘software architect’, others label themselfs as ‘software craftsman’ and there might be a ‘software ninja/rockstar’ hanging around.</p>

<p>But I have a problem with that… all those terms don’t reflect on what we do. Currently I’m sitting in a session at <a href="https://www.oracle.com/javaone/index.html">JavaOne</a> and I’m having the feeling people don’t realize what their job actually is.</p>

<p>#So, what does a software coder do?#</p>

<p>When creating software <em>we instruct a computer what to do</em>.</p>

<p>That is it.</p>

<p>We tell a machine how to respond. We don’t build things (develop), we don’t slay things (ninja!), we don’t rock, we just tell the computer what to do.</p>

<p>That is why a programming language is called… a <strong>language</strong>. It is a way we, as coders, communicate with the computer.</p>

<p>Is it that simple? Sadly no.</p>

<p>When writing code, we are not alone. There are also other coders that read/write/edit/analyse our code. It isn’t enough that just you and the machine understand, other coders have to understand as well.</p>

<p>We started out programming in binary, but this was way too complicated for humans. So we invented programming languages. First we created assembly. This made it easier for a human to tell the machine what to do. But assembly was still too complicated. Slowly the programming languages became closer and closer to human language.</p>

<p>#Alternatives#</p>

<p>My job is to write code, code that the machine understands. The code must also be pleasant to read and understand by other humans. Also, in this, I’m putting a lot of creativity.</p>

<p>Maybe you are a <strong>software author</strong> or <strong>software writer</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wri•ter (rahy-ter)

noun
1. a person engaged in writing (books, articles, stories, etc.) as an occupation or profession; an author or journalist.
2. a person who commits his or her thoughts, ideas, etc., to writing
</code></pre></div></div>

<p>This fits our job much better!</p>

<p>If you want something more exotic, and your code has a good flow and shows creativity, you might call yourself a: <strong>software poet</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>po•et (ˈpoʊ ɪt)

noun
1. one who writes poetry.
2. one who displays imagination and sensitivity along with eloquent expression.
</code></pre></div></div>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/09/job-titles-when-writing-code/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/08/saving-the-world-with-a-code-review/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/oh-no-the-robots.png" alt="Saving the world with a code review" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-08-29T09:45:12+02:00" class="date">
            Aug 29, 2016 09:45:12
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/08/saving-the-world-with-a-code-review/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/08/saving-the-world-with-a-code-review/">Saving the world with a code review</a></h1>

        <span itemprop="articleBody">
          <p>This morning I noticed the following tweet by fellow programmer (and runner) Arun Gupta:</p>

<blockquote class="twitter-tweet" data-cards="hidden" data-lang="en"><p lang="en" dir="ltr">Why code reviews are important? <a href="https://t.co/8KyMo7Syis">pic.twitter.com/8KyMo7Syis</a></p>&mdash; Arun Gupta (@arungupta) <a href="https://twitter.com/arungupta/status/769886902090539008">August 28, 2016</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>The tweet contained the following cartoon by <a href="http://oppressive-silence.com/comics/oh-no-the-robots">‘Oppressive Silence’</a>, check out their website for more laughs!</p>

<p><img src="/images/oh-no-the-robots.jpg" alt="Oh no the robots" class="aligncenter" />
<sub>(<a href="http://oppressive-silence.com/comics/oh-no-the-robots">Source of the comic</a>)</sub></p>

<h1 id="solved-by-a-code-review">Solved by a code review?</h1>

<p>The main question I’d like to ask:</p>

<p>Is this really something that you’ll find during a code review?</p>

<p>I think my answer below won’t surprise you, but the reasoning behind it might. First lets look at <strong>four</strong> reasons this bug should never happen to me (or any other experienced programmer).</p>

<h1 id="1-static-variablesglobal-state">1) Static variables/global state</h1>

<p>The first obvious problem with the code is the usage of static state. The variable ‘isCrazyMurderingRobot’ is mutable and static, so anywhere in the code the value can be changed. This makes it very hard to reason about the variable and keep track of it. Any programmer can come along and change the value in some method. This is unacceptable, there is almost <strong>no</strong> reason to use mutable static variables.</p>

<p>Top tip: If you have variables, especially mutable variables, keep their scope as small as possible!</p>

<h1 id="2-final-method-arguments">2) Final method arguments</h1>

<p>If you solve the global state problem you’ll probably end up with something like this (translated to Java):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">interact_with_humans</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">isCrazyMurderingRobot</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">isCrazyMurderingRobot</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">kill</span><span class="o">(</span><span class="n">humans</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">be_nice_to</span><span class="o">(</span><span class="n">humans</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span></code></pre></figure>

<p>Whenever an argument is passed to a method I have the habit (and my IDE-settings enforce this for me) to make them final. Method arguments should never change inside a method. It is just strange if you need to do this when you think about it. It probably means the method should have its own (scoped) mutable variable.</p>

<p>In the code the following would happen:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">interact_with_humans</span><span class="o">(</span><span class="kd">final</span> <span class="kt">boolean</span> <span class="n">isCrazyMurderingRobot</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">isCrazyMurderingRobot</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Compilation error: 'Cannot assign a value to final variable 'isCrazyMurderingRobot'</span></code></pre></figure>

<p>The code won’t even compile before telling me what is wrong, the world is saved!</p>

<h1 id="3-static-code-analysis">3) Static code analysis</h1>

<p>Another reason this bug will never happen in my code is because we have static code analysis on <em>all</em> our projects. A program like <a href="http://findbugs.sourceforge.net/">FindBugs</a> will immediately flag this as a major problem, assigning values inside an if-statement.</p>

<p>Look at this particular check in FindBugs:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">QBA: Method assigns boolean literal in boolean expression (QBA_QUESTIONABLE_BOOLEAN_ASSIGNMENT)

This method assigns a literal boolean value (true or false) to a boolean variable inside an if or while expression. Most probably this was supposed to be a boolean comparison using ==, not an assignment using =.</code></pre></figure>

<p>Static code analysis is an essential tool in modern programming, it is just so convenient, never reads over certain bugs like a human would (spoiler: more on that in the final conclusion below).</p>

<h1 id="4-yoda-conditions">4) Yoda conditions</h1>

<p>The final reason this bug will never happen in my code is: <a href="https://en.wikipedia.org/wiki/Yoda_conditions">Yoda conditions</a></p>

<p>A habit I learned a long time ago (in older languages) is writing my if-statements like Yoda. Good it is, mistakes you won’t make. The reason behind doing this is that it’ll prevent exactly the bug in the cartoon.</p>

<p>In the cartoon the if-statement would change from: <em>‘is crazy murdering robot true?’</em> to <em>‘true is crazy murdering robot?’</em>.</p>

<p>If you do this, the following happens:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">interact_with_humans</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">isCrazyMurderingRobot</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="kc">true</span> <span class="o">=</span> <span class="n">isCrazyMurderingRobot</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Compilation error: 'Variable expected'</span></code></pre></figure>

<h1 id="conclusion--saving-the-world">Conclusion / saving the world</h1>

<p>So, do I think Arun is right? Will code reviews find the bug in the cartoon? Yes and no.</p>

<p>Humans are good at reasoning, thinking, being creative, finding bugs, but there is one thing we are horrible at: syntax parsing.</p>

<p>During a code review you are just as likely (maybe even <em>more</em> likely) to read over this typo and don’t notice it. A second pair of eyes won’t save the world here just yet.</p>

<p><strong>But</strong>: when reviewing this piece of code, I <strong>will</strong> complain about the global state! If you start to refactor, encapsulating the logic and remove the mutable static variable the bug will be noticed and solved. So <strong>yes</strong>, if you do a code review, the code would have be been fixed and humans will be safe for just a little bit longer.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/08/saving-the-world-with-a-code-review/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/06/gender-inqeuality-my-honest-mistake/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/joyofcoding_sad.png" alt="Gender (in-)equality: my honest mistake" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-06-20T09:25:02+02:00" class="date">
            Jun 20, 2016 09:25:02
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/gender-inqeuality-my-honest-mistake/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/06/gender-inqeuality-my-honest-mistake/">Gender (in-)equality: my honest mistake</a></h1>

        <span itemprop="articleBody">
          <p>Gender equality and discrimination in IT is a hot topic. More and more women are (rightfully) opening their mouth and point out problem areas. There are just <em>some</em> men who just don’t get it, those insensitive idiots, they are the reason IT is such a toxic harsh environment for women.</p>

<p>So I thought…</p>

<p>This is a story about when I realized I am (unintentionally) one of those idiots.</p>

<h1 id="joy-of-coding">Joy of Coding</h1>

<p>This friday I spoke at <a href="http://joyofcoding.org/">Joy of Coding</a> in Rotterdam. An awesome conference and a real example for other conferences regarding gender equality. The main organizer is female (Hi <a href="http://felienne.com">Felienne</a>!), she’s the face of the conference, presented the opening and announced the speakers on the main stage. They have a very good rule of conduct: Don’t make <em>any</em> assumptions. Also the line-up of speakers was almost 50/50 male and female.</p>

<p>And of all the conferences: <strong>This</strong> is the conference I made my mistake.</p>

<h1 id="hilary-parker">Hilary Parker</h1>

<p>The last speaker at the conference was <a href="https://twitter.com/hspter">Hilary Parker</a>. She’s a Data Scientist at <a href="https://www.stitchfix.com/">Stitch Fix</a> and talked about how programming in data science is maturing. No longer are the scientists tweaking Excel sheets, they’ve started to use tools and languages (like <a href="https://www.r-project.org/">R</a>) to do all the analysis.</p>

<p><img src="/images/hilary_parker.jpg" alt="Hilary Parker talking about The Joy of Analysis Development" class="aligncenter" /></p>

<p>I loved the presentation and I also love the fact more and more women are taking the step and talking on stage at conferences. We should totally cherish them! There were however two small things that I noticed though, first: on two occasions her screen went ‘asleep’ and the had to dash to her laptop and wiggle the cursor. The other thing was, Hilary talks with a very obvious ‘Silicon Valley’-accent. She has the habbit of putting ‘like’ multiple times in every sentence as a filler word.</p>

<p>It sounded like this:</p>

<p>“So <em>like</em>, when you <em>like</em> load all the data files, and <em>like</em> you run a tool <em>like</em> R, you <em>like</em> immediately … etc”. This got a little annoying once I noticed it. It kind of takes the focus away from the content.</p>

<h1 id="twitter">Twitter</h1>

<p>After the conference I didn’t have time to talk to Hilary in person. But I wanted to help her, I want to see more female speakers at conferences. So I went on Twitter, send her a DM (direct message) and gave her some unsolicited feedback in private.</p>

<p>What I said came down to: Have you considered installing ‘<a href="http://lightheadsw.com/caffeine/">caffeine</a>’? It is the perfect tool for public speakers to stop the screensaver from kicking in on OS/X. Also, I’ve noticed you are using the word ‘like’ a lot, up to the point it becomes a distraction. I think you could become an even awesomer speaker if you lessen the usage of the word ‘like’.</p>

<p>Her reply was simple, but blew my mind:</p>

<blockquote>
  <p>Hilary:</p>

  <p>Hey, have you seen this? <a href="http://larahogan.me/blog/on-unsolicited-criticism/">http://larahogan.me/blog/on-unsolicited-criticism/</a></p>
</blockquote>

<h1 id="unsolicited-criticism">Unsolicited criticism</h1>

<p>It turns out that unsolicited feedback almost exclusively happens with female speakers. Reading that article I realized that I never have this. People do sometimes come up to me after giving a talk, but only to say ‘nice talk’ or something similar.</p>

<p>This is the moment I realized I’m biased too. I never thought about this being a problem, but I can understand this can be <strong>extremely</strong> annoying as a female speaker. It was obviously not my intention to <strong>be a jerk</strong> giving unsolicited advice…</p>

<h1 id="so-why-did-you-do-it">So why did you do it?</h1>

<p>So what is the reason I made this mistake? I’ve been thinking about this for a couple of days now. In Lara’s article she mentions some possible reasons it happens, but I have some additional ones:</p>

<p><strong>Cherish female speakers</strong></p>

<p>If you’re reading this you might think I’m just one of those insensitive men at conferences, but trust me, I’m trying not to be! The last couple of years I’ve been <em>actively</em> involved in changing our community to be a better place for <em>everyone</em>. I’ve helped organize and volunteer at various Devoxx4Kids events. I’ve been in CFP committees and have fought for more female speakers there….</p>

<p>One of the reasons I gave my feedback was because I want to see more female speakers. If a men fails, there are dozens of other men waiting to replace him. I thought that with my advice Hilary could become an even better public speaker, increasing her chance to speak at events and being an example to more women.</p>

<p><strong>Women are more affable?</strong></p>

<blockquote>
  <p>Affable:</p>

  <p>pleasantly easy to approach and to talk to; friendly; cordial; warmly polite:</p>
</blockquote>

<p>This statement is also gender discrimination, but in a positive way. From my experience women are more affable. They are friendlier, easier to approach and to talk to. Male speakers can have a ‘macho’ attitude, I don’t want to go up to them and give them feedback.</p>

<p>This might also be a big part of why female speakers receive unsolicited feedback and male speakers don’t.</p>

<h1 id="lessons-learned">Lessons learned</h1>

<p>For me this experience was a real eye-openener, if you’ve made it this far and haven’t read <a href="http://larahogan.me/blog/on-unsolicited-criticism/">Lara’s post</a> yet, please do!</p>

<p>She writes:</p>

<blockquote>
  <p>Ask yourself some questions. When’s the right time? Is it constructive? What’s moving you to give feedback to them right now? And is it possible that your brain was itched by them not in a bad way, but in a potentially eye-opening way for you? It may reveal some unconscious biases in yourself that would be worthwhile for you to explore</p>
</blockquote>

<p>It is very easy to fall into the gender trap. In my case it was a completely honest mistake, I wanted to help. But Hilary did nothing wrong, she talked the way she always does, with a ‘Valley’ accent… so what? Why was <em>this</em> the time I had to give some feedback?</p>

<p>I never thought that unsolicited feedback would be a problem female speakers have to deal with. I’d like to apologize and thank Hilary, she opened my eyes to this problem and allowed me mention her in this blogpost.</p>

<p>So next time <strong>you</strong> feel the urge to give some unsolicited feedback, stop and think about it…</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/gender-inqeuality-my-honest-mistake/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/06/joy-of-coding-2016/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/joyofcoding.png" alt="Speaking at Joy of Coding 2016" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-06-19T18:25:02+02:00" class="date">
            Jun 19, 2016 18:25:02
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/joy-of-coding-2016/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/06/joy-of-coding-2016/">Speaking at Joy of Coding 2016</a></h1>

        <span itemprop="articleBody">
          <p>Most conferences I get to visit are about Java. Java frameworks, techniques, other JVM languages, all of them have pretty much the same focus. However: there is one conference on my agenda that is… <em>different</em> (in a good way!). <a href="http://joyofcoding.org/">Joy of Coding</a> is all about (you’ve guessed it) the joy we experience while coding. The topics are very broad, some talks are technical, others are not.</p>

<h1 id="talking-about-game-theory">Talking about game theory</h1>

<p>At this edition of the Rotterdam-based conference I was invited to talk about game theory and game algorithms, and I explained this by going from a simple game, to noughts and crosses, to chess and finally to Go. From <a href="https://en.wikipedia.org/wiki/Minimax">minimax</a> to <a href="https://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning">alpha-beta pruning</a> to <a href="https://en.wikipedia.org/wiki/Artificial_neural_network">neural networks</a>. It is the same talk as I did <a href="/blog/2016/06/devoxx-uk-2016/">last week</a> at Devoxx UK, but now I had much more time, 30 minutes. This allowed me to go deeper into the algorithms and for example explain the free optimization you get with alpha-beta pruning.</p>

<p>The absolute best thing about Joy of Coding?
The logo/mascot! Just look at this extremely happy cute octopus:</p>

<p><img src="/images/octopus_joyofcoding.jpg" alt="Cutest conference mascot: Joy of Coding Octopus" class="aligncenter" /></p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/joy-of-coding-2016/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/06/devoxx-uk-2016/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/devoxxuk2016.jpg" alt="Speaking at Devoxx UK 2016" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-06-10T13:25:02+02:00" class="date">
            Jun 10, 2016 13:25:02
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/devoxx-uk-2016/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/06/devoxx-uk-2016/">Speaking at Devoxx UK 2016</a></h1>

        <span itemprop="articleBody">
          <p>Last week I went to London with my colleague Bert Jan Schrijver for the Devoxx UK 2016 conference. The UK-member of the international Devoxx conference family is smaller than its siblings. The event was three days, with the first two having talks and the last day was filled with hands-on-labs. During the first two days there were four parallel tracks giving the almost 1000 visitors enough content to pick from.</p>

<p><img src="/images/devoxxuk_speaking.jpg" alt="Roy van Rijn speaking at Devoxx UK" class="aligncenter" /></p>

<p>The quality of the speakers is very high in London. There are usually a lot of international speakers, probably due to the Devoxx-branding. But also the LJC (London Java Community) has done a lot to encourage their members to do public speaking, it shows!</p>

<h1 id="day-1">Day 1</h1>

<p>Devoxx UK started with one large keynote. James Veitch (stand-up comedian/nerd) entertained us with his experiences with so called ‘nigerian’ spammers. If you’ve never seen a presentation by him, check out <a href="https://www.ted.com/talks/james_veitch_this_is_what_happens_when_you_reply_to_spam_email">his TED Talk</a> for example right now! He’s amazing.</p>

<p>After the entertaining kick-off Mark Hazell (organizer) took the stage. And during his talk the next Devoxx-sibling was announced: <a href="https://devoxx.us/">Devoxx US</a>. For the first time Devoxx is going to cross the Atlantic ocean. It will take place 21 to 23 March 2017 (during the Java 9 release?) in San José.</p>

<p>This news was followed by two technical keynotes. The first one was by Hadi Hariri (about the ‘free lunch’ in open source software) anf the second talk was by Mazz Mosley (about her Agile experiences). After this the four parallel tracks started. My colleague Bert Jan immediately took the stage with his talk on microservices in Vert.x.</p>

<p>The first conference day ended with the Ignite sessions (5 minute talks, 20 slides, auto-forwarding slides, fun topics), this is where I talked about the coming of Skynet (from the Terminator movies) and the fact that Skynet will run on the JVM.</p>

<p>The second day of the conference has again four rooms with parallel sessions. And during lunch I had my main talk, a 15 minute quickie about game theory, algorithms and the breakthroughs of Google/DeepMinds AlphaGo. The talk takes you from the most simple game you can imagine to Noughts and Crosses, to Chess and finally to Go. It talks about the algorithms you can use to make a computer play these games and why all those techniques don’t work with Go.</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/xGZmiqn4Blo"></iframe>

<h1 id="day-2">Day 2</h1>

<p>The second day ended with the usual Community Keynote. During this keynote some crazy French guy warned us for Brexit, they talked about the problems with Java EE and they did three short interviews, one of them was with me! Martijn and Antonio asked me some questions about Joggling (which I’d done an Ignite talk before) and filming at Devoxx. The most scary part was then Antonio challenged me to juggle three glasses… which I did: (skip to 16:79)</p>

<iframe type="text/html" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" src="http://www.youtube.com/embed/P-qwkVuwIs"></iframe>

<p>We ended the day like real Londoners do: in the pub. After the last talk we went to ‘DevRoxx’, a party sponsored by Tomitribe, Lightbend, Couchbase and Atlassian.</p>

<h1 id="impression-video">Impression video</h1>

<p>I’m also the ‘official’ Devoxx UK camera man/editor and I’ve created the following movie:</p>

<iframe type="text/html" src="http://player.vimeo.com/video/170226861" width="640" height="390" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/06/devoxx-uk-2016/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  
    <article itemscope itemtype="http://schema.org/Article">
    <div class="post">

      <div class="post-thumbnail">
      	<a href="/blog/2016/05/how-to-become-a-software-architect/">
      	
      		<img itemprop="image" class="post-thumbnail-img" src="/thumbnails/architect.png" alt="How to become a software architect" width="100" height="100" />
      	
    	</a>
      </div>
  
      <div class="post-data">
        <p class="post-meta">
          Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Roy van Rijn</span></span> 
          (<span itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><span itemprop="name">royvanrijn.com</span></span>) on 
          <span itemprop="datePublished" content="2016-05-10T12:25:02+02:00" class="date">
            May 10, 2016 12:25:02
          </span>
          : <a class="post-comments" href="http://royvanrijn.com/blog/2016/05/how-to-become-a-software-architect/#disqus_thread">0 comments</a>
        </p>
        <h1 itemprop="headline" class="post-title"><a class="title-link" href="/blog/2016/05/how-to-become-a-software-architect/">How to become a software architect</a></h1>

        <span itemprop="articleBody">
          <p>Yesterday, on the <a href="http://virtualjug.com/">vJUG</a> mailing list, Gilberto Santos asked the following question:</p>

<blockquote>

  <p>I’m working as Software Engineer and as intend to grow up to architect position, now on I was wondering how to best way to get there , should be :</p>

  <p>Java certifications</p>

  <p>Masters</p>

  <p>Both ?</p>

</blockquote>

<p>I replied to him over the email, but it might be something more developers are struggling with, time for a blog post!</p>

<h1 id="architects-should-code">Architects should code</h1>

<p>There are two types of software architect:</p>

<ol>
  <li>The one that draws Visio® diagrams</li>
  <li>The one that develops/codes</li>
</ol>

<p>The first type of architect likes to talk, have meetings, draw diagrams and give orders. This, to me, is <strong>not</strong> good.</p>

<p>Architects should write code, they should be part of a team. In fact, everybody that writes code <em>is</em> effectively an architect and should have basic knowledge about architecture principles. For example every programmer should know about the <a href="https://nl.wikipedia.org/wiki/SOLID">SOLID</a> principles.</p>

<p>Simon Brown has some good presentations on this topic on his website <a href="http://www.codingthearchitecture.com/presentations/">coding the architecture</a>.</p>

<h1 id="mistakes">Mistakes</h1>

<p>The best advice I can give a developer that wants to grow into a senior/architect position is:</p>

<p><strong>Make mistakes, lots of them.</strong></p>

<p>If you want to become a better architect the most important skill to master is the art of making mistakes, noticing them, and not repeating them in the future. Most ‘enterprise’ architects I’ve worked with set up a project and leave before the thing they had designed starts to rot, smell and fall apart. They never experience the flipside of what they set up, you can make everything look good on paper.</p>

<p>As a programmer and architect you need to experience this ‘project rot’. To learn you need to feel the mistakes that are in every system. Once you start seeing problems, admit the things you’ve made aren’t perfect, and start changing them. Try to fix the mistakes.</p>

<p>Matt Damon would say: <em>“I’m going to have to refactor the shit out of this.”</em></p>

<p>This experience is what makes you a <em>real</em> architect. The best architects I’ve worked with knew instantly what needed to change and which solutions would work better than others. They develop an instinct for this. In Dutch we have a saying <em>‘they know where the shoe pinches’</em>. Which means: just by looking at it they have a ‘feel’ for what hurts and will cause problems (in the future).</p>

<h1 id="however">However….</h1>

<p>This experience/instinct is what makes you a good architect and a good programmer. But sadly this doesn’t directly get you a better job or position within a company. Managers, recruiters and HR can’t easily test for this instinct. Sadly: the thing they look at most of the time is certifications.</p>

<p>For example, I’ve mentioned the <a href="https://nl.wikipedia.org/wiki/SOLID">SOLID</a> principles, and they are very important. It takes a maximum of 5 minutes to learn the acronym and use it in job interviews or get a certification. To really understand it though you need to <em>experience</em> SOLID. You need to encounter situations where huge classes have a lot of responsibilities. This is the problem with most certifications: they encourage you to memorize rules and principles, not to <strong>understand</strong> them. I’d rather have someone in my team that naturely breaks up code into clean interfaces than someone who memorized that the ‘I’ in SOLID stands for the ‘Interface segregation principle’.</p>

<p>Once you developed this ‘architect instinct’, people will notice it. Colleagues will remember and this will help you get better jobs and positions in the future. You’ll need to prove yourself and grow your network. Try to get recommendations from people you’ve worked with and you will become a <strong>real</strong> senior programmer and architect.</p>


        </span>


        <p class="post-meta">
          <a class="post-comments" href="http://royvanrijn.com/blog/2016/05/how-to-become-a-software-architect/#disqus_thread">0 comments</a>
        </p>
      </div>
    </div>
    </article>
  
    <hr/>
  

  <!-- Pagination -->
  
  <div class="pagination">
    <div class="pagination-center">
    
      <div class="pagination-item">&laquo; Prev</div>
    

    
      
        <div class="pagination-item"><strong>1</strong></div>
      
    
      
        <div class="pagination-item"><a href="/page/2">2</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/3">3</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/4">4</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/5">5</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/6">6</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/7">7</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/8">8</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/9">9</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/10">10</a></div>
      
    
      
        <div class="pagination-item"><a href="/page/11">11</a></div>
      
    

    
      <div class="pagination-item"><a href="/page/2">Next &raquo;</a></div>
    
    </div>
  </div>
  

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <span class="svg-icon linkedin">Connect on LinkedIn</span>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <span class="svg-icon stackoverflow">Follow me on StackOverflow</span>
        </a>

        <a href="https://github.com/royvanrijn">
          <span class="svg-icon github">Follow me on GitHub</span>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <ispan class="svg-icon twitter">Follow me on Twitter</span>
        </a>
          
        <a href="/feed/index.xml">
          <span class="svg-icon rss">Check out the RSS feed</span>
        </a>
	  </div>
    
    </div>

  </div>

</footer>


  </body>

</html>
