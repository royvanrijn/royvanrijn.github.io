<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Playing around with HTML 5</title>
  <meta name="description" content="Yesterday, while browsing DZone, I encountered a couple of HTML 5 blogs. So I decided to try and code some HTML5 - Canvas myself.This is the result of one ho...">
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  
  <link rel="apple-touch-icon" href="/images/avatar.jpg" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://royvanrijn.com/blog/2010/04/playing-around-with-html-5/">
  <link rel="alternate" type="application/rss+xml" title="royvanrijn" href="http://royvanrijn.com/feed/" />
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

	<a class="site-title" href="/">
	  <img src="/images/header_royvanrijn.jpg" alt="royvanrijn" />
    </a>

    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    
    <div class="page-navigation"> 
      <div class="left"> 
         
          <a href="/blog/2010/04/some-of-my-software-development-rules/" title="Previous Post: Some of my software development rules">&laquo; Some of my software development rules</a> 
         
      </div> 
      <div class="right"> 
         
          <a href="/blog/2010/06/creating-shazam-in-java/" title="next Post: Creating Shazam in Java">Creating Shazam in Java &raquo; </a> 
         
      </div> 
      <div class="clear"></div> 
    </div> 

    <h1 class="post-title">Playing around with HTML 5</h1>
    <p class="post-meta">
    	Apr 14, 2010 12:45:43
    	 - <a class="post-comments" href="http://royvanrijn.com/blog/2010/04/playing-around-with-html-5/#disqus_thread"></a>
    </p>
  </header>

  <article class="post-content">
    <p>Yesterday, while browsing DZone, I encountered a couple of HTML 5 blogs. So I decided to try and code some HTML5 - Canvas myself.</p>
<p><!--more--></p>
<p>This is the result of one hour trail-and-error:<br />
<!--start_raw--><br />
    <canvas id="myCanvas" width="600" height="800"><br />
      <b>Sorry, no &lt;canvas /&gt; support, please upgrade your browser!</b><br />
    </canvas></p>
<p>    <script></p>
<p>      var myCanvas = document.getElementById('myCanvas');<br />
      g = myCanvas.getContext('2d');<br />
      g.moveTo(0,0);<br />
      MAX_AMOUNT = 100;<br />
      amount = 1;<br />
      WIDTH = myCanvas.width;<br />
      HEIGHT = myCanvas.height;</p>
<p>      var circles = new Array();<br />
      circles[0] = new Circle();</p>
<p>      function Circle(inx, iny) {<br />
        this.r = 30 + Math.round(20 * Math.random());<br />
        this.max = 40 + Math.round(20 * Math.random());</p>
<p>        if(!inx) {<br />
          this.x = Math.round(((WIDTH-((this.r+this.max)*2))*Math.random())+(this.r+this.max));<br />
          this.y = Math.round(((HEIGHT-((this.r+this.max)*2))*Math.random())+(this.r+this.max));<br />
        } else {<br />
          this.x = inx;<br />
          this.y = iny;<br />
        }<br />
        this.c = getColor();  // The color of the circle<br />
        this.speed = 0.2+(Math.random()*0.3);</p>
<p>        this.growing = true;<br />
        this.t = Math.round(Math.random()*this.max);</p>
<p>        this.redraw = function() {<br />
          this.t = (this.t + this.speed)%this.max;<br />
          g.fillStyle = this.c;<br />
          g.beginPath();<br />
          g.arc(this.x,this.y,this.currentRadius(),0,Math.PI*2,true);<br />
          g.fill();<br />
          g.closePath();<br />
        }</p>
<p>        this.currentRadius = function() {<br />
          return this.r+Math.abs(this.t-(this.max/2))<br />
        }<br />
      }</p>
<p>      function cycle() {<br />
        g.fillStyle="#fff";<br />
        g.fillRect(0,0,WIDTH,HEIGHT);<br />
        for (var i=0; i<circles.length; i++) {<br />
          circles[i].redraw();<br />
        }<br />
      }</p>
<p>      function getColor() {<br />
        //return random color between 155-255<br />
        var rgb = [];<br />
        for (var i = 0; i < 3; i++) {<br />
          rgb[i] = Math.round(100 * Math.random() + 155);<br />
        }<br />
        return 'rgb(' + rgb.join(',') + ')';<br />
      }</p>
<p>      function click(e) {<br />
        xy = getxy(e, myCanvas);<br />
        if (!e) e = event;<br />
        circles[amount] = new Circle(xy.x,xy.y);<br />
        amount = (amount+1) % MAX_AMOUNT;<br />
      }</p>
<p>      function getxy(e, o) {<br />
        //gets mouse position relative to object o</p>
<p>	if(g) {<br />
		var bo = getpos(o);<br />
		var x = e.clientX - bo.x;	//correct for canvas position, workspace scroll offset<br />
		var y = e.clientY - bo.y;<br />
		x += document.documentElement.scrollLeft;	//correct for window scroll offset<br />
		y += document.documentElement.scrollTop;<br />
		return { x: x-.5, y: y-.5 }; //-.5 prevents antialiasing of stroke lines<br />
	    }<br />
       }<br />
      function getpos(o) {<br />
        //gets position of object o<br />
	var bo, x, y, b; x = y = 0;<br />
	if(document.getBoxObjectFor) {	//moz<br />
		bo = document.getBoxObjectFor(o);<br />
		x = bo.x; y = bo.y;<br />
	} else if (o.getBoundingClientRect) { //ie (??)<br />
		bo = o.getBoundingClientRect();<br />
		x = bo.left; y = bo.top;<br />
	} else { //opera, safari etc<br />
		while(o && o.nodeName != 'BODY') {<br />
			x += o.offsetLeft;<br />
			y += o.offsetTop;<br />
			b = parseInt(document.defaultView.getComputedStyle(o,null).getPropertyValue('border-width'));<br />
			if(b > 0) { x += b; y +=b; }<br />
			o = o.offsetParent;<br />
		}<br />
	}<br />
	return { x:x, y:y }<br />
      }<br />
      function move(e) {<br />
        xy = getxy(e, myCanvas);<br />
        var curx = xy.x;<br />
        var cury = xy.y;<br />
        for (var i=0; i<circles.length; i++) {<br />
          var distx = Math.abs(curx-circles[i].x);<br />
          var disty = Math.abs(cury-circles[i].y);<br />
          var threshold = circles[i].currentRadius()-10;<br />
          if(distx
<threshold && disty<threshold) {<br />
             if(curx > circles[i].x) {<br />
               circles[i].x -= distx/4;<br />
             } else {<br />
               circles[i].x += distx/4;<br />
             }<br />
             if(cury > (circles[i].y+(circles[i].r/2))) {<br />
               circles[i].y -= disty/4;<br />
             } else {<br />
               circles[i].y += disty/4;<br />
             }<br />
          }<br />
        }<br />
      }</p>
<p>      if (document.addEventListener) {<br />
        document.addEventListener("mousedown",click, false);<br />
        document.addEventListener("mousemove",move, false);<br />
      } else if (document.attachEvent) {<br />
        document.attachEvent("onmousedown",click);<br />
        document.attachEvent("onmousemove",move);<br />
      }</p>
<p>      setInterval(cycle, 20);</p>
<p>    </script><br />
<!--end_raw--><br />
Maybe I'll do a write-up soon, but for now, just check the sources. (Yes they are wrong/hack-ish, I know...).</p>

  </article>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'royvanrijn';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-wrapper">
      
      <div class="footer-wrapper-content">
      
        <a href="https://www.linkedin.com/profile/view?id=10356027">
          <i class="svg-icon linkedin"></i>
        </a>
      
        <a href="http://stackoverflow.com/users/442274/roy-van-rijn">
          <i class="svg-icon stackoverflow"></i>
        </a>

        <a href="https://github.com/royvanrijn">
          <i class="svg-icon github"></i>
        </a>

        <a href="https://twitter.com/royvanrijn">
          <i class="svg-icon twitter"></i>
        </a>
          
        <a href="/feed/index.xml">
          <i class="svg-icon rss"></i>
        </a>
	  </div>
    
    </div>

  </div>
  
  <script>
  
  <!-- Google Analytics -->
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3219266-2', 'auto');
  ga('send', 'pageview');

  <!-- Disqus Comment Count -->
  var disqus_shortname = 'royvanrijn'; // required: replace example with your forum shortname
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());

  </script>

</footer>


  </body>

</html>
